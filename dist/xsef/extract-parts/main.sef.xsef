<?xml version="1.0" encoding="utf-8"?>
<package xmlns='http://ns.saxonica.com/xslt/export' xmlns:fn='http://www.w3.org/2005/xpath-functions' xmlns:java-type='http://saxon.sf.net/java-type' xmlns:vv='http://saxon.sf.net/generated-variable' xmlns:xs='http://www.w3.org/2001/XMLSchema' when='2024-12-11T15:53:15.6561592+01:00' id='0' version='30' packageVersion='1' saxonProduct='SAXON-EE' saxonVersion='12.3' buildDateTime='2024-12-11T15:53:15.6561592+01:00' target='EE' targetVersion='1' relocatable='true' implicit='true'>
 <co id='0' binds='1'>
  <function name='Q{http://www.functx.com}remove-attributes' line='2381' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1NE' slots='2'>
   <arg name='Q{}elements' as='*NE'/>
   <arg name='Q{}names' as='*AS'/>
   <check role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2385' card='1' diag='5|0|XTTE0780|functx:remove-attributes#2'>
    <forEach>
     <varRef name='Q{}elements' slot='0'/>
     <copy line='2393' flags='cin' sit='1NE'>
      <sequence role='content'>
       <filter flags='b'>
        <axis name='attribute' nodeTest='NA'/>
        <fn name='not'>
         <ufCall name='Q{http://www.functx.com}name-test' tailCall='false' bSlot='0'>
          <fn name='name'>
           <dot type='1NA'/>
          </fn>
          <varRef name='Q{}names' slot='1'/>
         </ufCall>
        </fn>
       </filter>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </copy>
    </forEach>
   </check>
  </function>
 </co>
 <co id='2' binds=''>
  <function name='Q{http://www.functx.com}is-node-in-sequence-deep-equal' line='1573' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AB' slots='3'>
   <arg name='Q{}node' as='?N'/>
   <arg name='Q{}seq' as='*N'/>
   <some role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1579' var='Q{}nodeInSeq' slot='2'>
    <varRef name='Q{}seq' slot='1'/>
    <fn name='deep-equal'>
     <varRef name='Q{}nodeInSeq' slot='2'/>
     <varRef name='Q{}node' slot='0'/>
     <str val='http://www.w3.org/2005/xpath-functions/collation/codepoint'/>
     <map size='0'/>
    </fn>
   </some>
  </function>
 </co>
 <co id='3' binds=''>
  <template name='Q{}roman.integer' flags='os' line='258' module='scoreDef.xsl' slots='2'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='259'>
    <param name='Q{}pLayerDef' slot='0' flags='t'>
     <str role='select' val=''/>
     <supplied role='conversion' slot='0'/>
    </param>
    <param line='260' name='Q{}pStaffDef' slot='1' flags='t'>
     <str role='select' val=''/>
     <supplied role='conversion' slot='1'/>
    </param>
    <choose line='286'>
     <choose line='268'>
      <fn line='263' name='exists'>
       <tail start='2'>
        <fn name='distinct-values'>
         <data diag='0|0||fn:distinct-values'>
          <slash simple='2'>
           <conditionalSort>
            <fn name='exists'>
             <tail start='2'>
              <treat as='N' diag='1|0|XPTY0019|/'>
               <varRef name='Q{}pStaffDef' slot='1'/>
              </treat>
             </tail>
            </fn>
            <docOrder intra='0'>
             <slash simple='2'>
              <treat as='N' diag='1|0|XPTY0019|/'>
               <varRef name='Q{}pStaffDef' slot='1'/>
              </treat>
              <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
             </slash>
            </docOrder>
           </conditionalSort>
           <axis name='attribute' nodeTest='NA nQ{}decls'/>
          </slash>
         </data>
        </fn>
       </tail>
      </fn>
      <false/>
      <true/>
      <true/>
     </choose>
     <valueOf line='287'>
      <fn name='concat'>
       <str val=' '/>
       <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}get' type='*'>
        <map size='10'>
         <str val='1'/>
         <str val='I'/>
         <str val='2'/>
         <str val='II'/>
         <str val='3'/>
         <str val='III'/>
         <str val='4'/>
         <str val='IV'/>
         <str val='5'/>
         <str val='V'/>
         <str val='6'/>
         <str val='VI'/>
         <str val='7'/>
         <str val='VII'/>
         <str val='8'/>
         <str val='VIII'/>
         <str val='9'/>
         <str val='IX'/>
         <str val='10'/>
         <str val='X'/>
        </map>
        <atomSing diag='0|1||map:get'>
         <conditionalSort>
          <fn name='exists'>
           <tail start='2'>
            <treat as='N' diag='1|0|XPTY0019|/'>
             <varRef name='Q{}pLayerDef' slot='0'/>
            </treat>
           </tail>
          </fn>
          <docOrder intra='0'>
           <slash simple='2'>
            <treat as='N' diag='1|0|XPTY0019|/'>
             <varRef name='Q{}pLayerDef' slot='0'/>
            </treat>
            <axis name='attribute' nodeTest='NA nQ{}n'/>
           </slash>
          </docOrder>
         </conditionalSort>
        </atomSing>
       </ifCall>
      </fn>
     </valueOf>
     <true/>
     <valueOf line='290'>
      <str val=''/>
     </valueOf>
    </choose>
   </sequence>
  </template>
 </co>
 <co id='4' binds='5 6 7 8 9 10'>
  <mode onNo='TC' flags='dW' patternSlots='0'>
   <templateRule prec='0' prio='-0.5' seq='19' rank='0' minImp='0' slots='0' matches='ND' flags='s' line='98' module='main.xsl'>
    <p.nodeTest role='match' test='ND'/>
    <choose role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='100'>
     <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg1559972335' bSlot='0'/>
     <message line='101'>
      <valueOf role='select'>
       <str val='No extraction performed as all parts are selected!'/>
      </valueOf>
      <str role='terminate' val='no'/>
      <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
     </message>
     <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg1943747471' bSlot='1'/>
     <callT line='104' name='Q{}perform.extraction' bSlot='2' flags='t'/>
     <true/>
     <sequence line='107'>
      <choose>
       <or op='or'>
        <gVarRef name='Q{}P_XSPEC_TEST' bSlot='3'/>
        <gVarRef name='Q{}P_OVERWRITE_FILE' bSlot='4'/>
       </or>
       <copyOf line='108' flags='c'>
        <dot type='1ND' flags='a'/>
       </copyOf>
      </choose>
      <callT line='110' name='Q{}create.message.parts.nonavailable' bSlot='5' flags='t'/>
     </sequence>
    </choose>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='1' part='1' rank='0' minImp='0' slots='0' matches='NA' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='NA'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='1' rank='0' minImp='0' slots='0' matches='N' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='N u[NP,NE,NC,NT]'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
  </mode>
 </co>
 <co id='11' binds=''>
  <globalParam name='Q{}P_GLOBAL_CONTEXT_ITEM' as='1ND' line='15' module='main.xsl' visibility='PUBLIC'>
   <treat defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='15' as='ND' diag='8|0|XTTE0590|P_GLOBAL_CONTEXT_ITEM'>
    <dot flags='a'/>
   </treat>
  </globalParam>
 </co>
 <co id='12' binds='1 12 12'>
  <function name='Q{http://www.functx.com}remove-attributes-deep' line='2343' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*N' slots='2'>
   <arg name='Q{}nodes' as='*N'/>
   <arg name='Q{}names' as='*AS'/>
   <forEach role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2347'>
    <varRef name='Q{}nodes' slot='0'/>
    <choose line='2349'>
     <instance of='1NE'>
      <dot type='1N'/>
     </instance>
     <compElem line='2350'>
      <fn role='name' name='string'>
       <convert from='AQ' to='AS'>
        <fn name='node-name'>
         <dot type='1N'/>
        </fn>
       </convert>
      </fn>
      <sequence role='content' line='2353'>
       <filter flags='b'>
        <axis name='attribute' nodeTest='NA'/>
        <fn name='not'>
         <ufCall name='Q{http://www.functx.com}name-test' tailCall='false' bSlot='0'>
          <fn name='name'>
           <dot type='1NA'/>
          </fn>
          <varRef name='Q{}names' slot='1'/>
         </ufCall>
        </fn>
       </filter>
       <ufCall name='Q{http://www.functx.com}remove-attributes-deep' tailCall='false' bSlot='1'>
        <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
        <varRef name='Q{}names' slot='1'/>
       </ufCall>
      </sequence>
     </compElem>
     <instance line='2356' of='1ND'>
      <dot type='1N'/>
     </instance>
     <doc line='2357'>
      <ufCall line='2359' name='Q{http://www.functx.com}remove-attributes-deep' tailCall='false' bSlot='2'>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
       <varRef name='Q{}names' slot='1'/>
      </ufCall>
     </doc>
     <true/>
     <dot line='2363' type='1N'/>
    </choose>
   </forEach>
  </function>
 </co>
 <co id='13' binds='14'>
  <globalVariable name='Q{}CONTROL_EVENTS' as='*AS' line='4' module='controlEvents.xsl' visibility='PRIVATE'>
   <treat defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='5' as='AS' diag='3|0|XTTE0570|CONTROL_EVENTS'>
    <cvUntyped to='AS' diag='3|0|XTTE0570|CONTROL_EVENTS'>
     <data diag='3|0|XTTE0570|CONTROL_EVENTS'>
      <callT name='Q{}get.config.items' bSlot='0'>
       <withParam name='Q{}id' flags='c' as='1AS'>
        <str val='controlEvents'/>
       </withParam>
      </callT>
     </data>
    </cvUntyped>
   </treat>
  </globalVariable>
 </co>
 <co id='15' binds='16 17 18'>
  <template name='Q{}create.message.extracting.parts' flags='os' line='159' module='global.xsl' slots='1'>
   <message role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='168'>
    <sequence role='select'>
     <valueOf>
      <str val='Extracting requested parts '/>
     </valueOf>
     <valueOf>
      <fn name='string-join'>
       <gVarRef name='Q{}PARTS_TO_EXTRACT_MSG' bSlot='0'/>
       <str val=', '/>
      </fn>
     </valueOf>
     <valueOf>
      <str val='. '/>
     </valueOf>
     <choose>
      <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg78505498' bSlot='1'/>
      <sequence>
       <valueOf>
        <str val='Note that the following requested staves are not available in the current MEI: '/>
       </valueOf>
       <valueOf>
        <fn name='string-join'>
         <for line='166' var='Q{}part' as='NE nQ{http://www.mozarteum.at/ns/dme}part' slot='0'>
          <gVarRef role='in' name='Q{http://saxon.sf.net/generated-variable}gg1508495047' bSlot='2'/>
          <fn role='return' name='concat'>
           <str val='('/>
           <fn name='string-join'>
            <sequence>
             <slash>
              <varRef name='Q{}part' slot='0'/>
              <attVal name='Q{}staff'/>
             </slash>
             <slash>
              <varRef name='Q{}part' slot='0'/>
              <attVal name='Q{}layer'/>
             </slash>
            </sequence>
            <str val='-'/>
           </fn>
           <str val=')'/>
          </fn>
         </for>
         <str val=', '/>
        </fn>
       </valueOf>
       <valueOf flags='S'>
        <str val='.'/>
       </valueOf>
      </sequence>
     </choose>
    </sequence>
    <str role='terminate' val='no'/>
    <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
   </message>
  </template>
 </co>
 <co id='18' binds='19'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg1508495047' as='*NE nQ{http://www.mozarteum.at/ns/dme}part' line='166' module='global.xsl' visibility='PRIVATE'>
   <filter defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='166' flags='b'>
    <slash simple='1'>
     <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
     <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
    </slash>
    <fn name='exists'>
     <filter flags='b'>
      <axis name='attribute' nodeTest='NA nQ{}available'/>
      <compareToString op='eq' val='no'>
       <cast flags='a' as='1AS'>
        <data diag='1|0||='>
         <dot type='1NA nQ{}available'/>
        </data>
       </cast>
      </compareToString>
     </filter>
    </fn>
   </filter>
  </globalVariable>
 </co>
 <co id='20' binds=''>
  <function name='Q{http://www.functx.com}sequence-deep-equal' line='2696' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AB' slots='3'>
   <arg name='Q{}seq1' as='*'/>
   <arg name='Q{}seq2' as='*'/>
   <every role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2703' var='Q{}i' slot='2'>
    <to>
     <int val='1'/>
     <fn name='max'>
      <sequence>
       <fn name='count'>
        <varRef name='Q{}seq1' slot='0'/>
       </fn>
       <fn name='count'>
        <varRef name='Q{}seq2' slot='1'/>
       </fn>
      </sequence>
     </fn>
    </to>
    <fn name='deep-equal'>
     <subscript>
      <varRef name='Q{}seq1' slot='0'/>
      <varRef name='Q{}i' slot='2'/>
     </subscript>
     <subscript>
      <varRef name='Q{}seq2' slot='1'/>
      <varRef name='Q{}i' slot='2'/>
     </subscript>
     <str val='http://www.w3.org/2005/xpath-functions/collation/codepoint'/>
     <map size='0'/>
    </fn>
   </every>
  </function>
 </co>
 <co id='21' binds='22 23 4'>
  <template name='Q{}enhance.requested.parts' flags='os' line='111' module='global.xsl' slots='5'>
   <let role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='112' var='Q{}availableStaves' as='+ADI' slot='0'>
    <treat line='114' as='ADI' diag='3|0|XTTE0570|availableStaves'>
     <check card='+' diag='3|0|XTTE0570|availableStaves'>
      <cvUntyped to='ADI' diag='3|0|XTTE0570|availableStaves'>
       <data diag='3|0|XTTE0570|availableStaves'>
        <try flags='r'>
         <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg1470291630' bSlot='0'/>
         <catch errors='*'>
          <message line='116'>
           <valueOf role='select'>
            <str val='The file does not contain any staves!'/>
           </valueOf>
           <str role='terminate' val='no'/>
           <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
          </message>
         </catch>
        </try>
       </data>
      </cvUntyped>
     </check>
    </treat>
    <let line='121' var='Q{}requestedParts' as='1NE nQ{http://www.mozarteum.at/ns/dme}parts' slot='1'>
     <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg247183083' bSlot='1'/>
     <elem line='124' name='dme:parts' nsuri='http://www.mozarteum.at/ns/dme'>
      <sequence line='125'>
       <att name='allPartsRequested' flags='l'>
        <convert line='127' from='AZ' to='AS'>
         <choose>
          <or op='or'>
           <fn name='exists'>
            <slash simple='2'>
             <slash simple='1'>
              <varRef name='Q{}requestedParts' slot='1'/>
              <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
             </slash>
             <axis name='attribute' nodeTest='NA nQ{}layer'/>
            </slash>
           </fn>
           <fn name='exists'>
            <slash simple='2'>
             <slash simple='1'>
              <varRef name='Q{}requestedParts' slot='1'/>
              <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
             </slash>
             <axis name='attribute' nodeTest='NA nQ{}split'/>
            </slash>
           </fn>
          </or>
          <atomic val='no' type='AZ'/>
          <true/>
          <cast line='135' flags='a' as='1AZ'>
           <choose>
            <let ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' var='Q{}seq1' slot='2'>
             <forEach defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~'>
              <slash simple='2'>
               <slash simple='1'>
                <varRef name='Q{}requestedParts' slot='1'/>
                <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
               </slash>
               <axis name='attribute' nodeTest='NA nQ{}staff'/>
              </slash>
              <cast flags='a' as='1ADI'>
               <data diag='2|0||cast as'>
                <dot type='1NA nQ{}staff'/>
               </data>
              </cast>
             </forEach>
             <let var='Q{}seq2' slot='3'>
              <varRef defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' name='Q{}availableStaves' slot='0'/>
              <every module='functx-1.0-doc-2007-01.xsl' line='2703' var='Q{}i' slot='4'>
               <to>
                <int val='1'/>
                <fn name='max'>
                 <sequence>
                  <fn name='count'>
                   <varRef name='Q{}seq1' slot='2'/>
                  </fn>
                  <fn name='count'>
                   <varRef name='Q{}seq2' slot='3'/>
                  </fn>
                 </sequence>
                </fn>
               </to>
               <fn name='deep-equal'>
                <subscript>
                 <varRef name='Q{}seq1' slot='2'/>
                 <varRef name='Q{}i' slot='4'/>
                </subscript>
                <subscript>
                 <varRef name='Q{}seq2' slot='3'/>
                 <varRef name='Q{}i' slot='4'/>
                </subscript>
                <str val='http://www.w3.org/2005/xpath-functions/collation/codepoint'/>
                <map size='0'/>
               </fn>
              </every>
             </let>
            </let>
            <str val='yes'/>
            <true/>
            <str val='no'/>
           </choose>
          </cast>
         </choose>
        </convert>
       </att>
       <iterate line='140'>
        <slash role='select' simple='1'>
         <varRef name='Q{}requestedParts' slot='1'/>
         <axis name='child' nodeTest='NE'/>
        </slash>
        <params role='params'/>
        <copy role='action' line='142' flags='cinl' sit='1NE'>
         <sequence role='content'>
          <att name='available' flags='l'>
           <convert line='144' from='AZ' to='AS'>
            <choose>
             <gcEE ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' op='=' card='N:1' comp='GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint'>
              <varRef defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' name='Q{}availableStaves' slot='0'/>
              <attVal name='Q{}staff'/>
             </gcEE>
             <atomic val='yes' type='AZ'/>
             <true/>
             <atomic val='no' type='AZ'/>
            </choose>
           </convert>
          </att>
          <applyT line='148' bSlot='2'>
           <axis role='select' name='attribute' nodeTest='NA'/>
          </applyT>
         </sequence>
        </copy>
       </iterate>
      </sequence>
     </elem>
    </let>
   </let>
  </template>
 </co>
 <co id='24' binds=''>
  <function name='Q{http://www.functx.com}capitalize-first' line='307' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='?AS' slots='1'>
   <arg name='Q{}arg' as='?AS'/>
   <fn role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='313' name='concat'>
    <sequence>
     <fn name='upper-case'>
      <fn name='substring'>
       <varRef name='Q{}arg' slot='0'/>
       <int val='1'/>
       <int val='1'/>
      </fn>
     </fn>
     <fn name='substring'>
      <varRef name='Q{}arg' slot='0'/>
      <int val='2'/>
     </fn>
    </sequence>
   </fn>
  </function>
 </co>
 <co id='25' binds='26 27'>
  <template name='Q{}new.staves.numbering' flags='os' as='1FM k[ADI] v[1ADI]' line='187' module='global.xsl' slots='3'>
   <treat role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='189' as='FM k[ADI] v[1ADI]' diag='7|0|XTTE0505|new.staves.numbering'>
    <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}merge' type='1FM'>
     <treat as='FM' diag='20|0|XTTE3375|xsl:map sequence constructor'>
      <iterate>
       <gVarRef role='select' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='0'/>
       <params role='params' line='190'>
        <param name='Q{}pCounter' slot='0' as='1ADI'>
         <int role='select' val='1'/>
         <treat role='conversion' as='ADI' diag='8|0|XTTE0590|pCounter'>
          <check card='1' diag='8|0|XTTE0590|pCounter'>
           <cvUntyped to='ADI' diag='8|0|XTTE0590|pCounter'>
            <data diag='8|0|XTTE0590|pCounter'>
             <supplied slot='0'/>
            </data>
           </cvUntyped>
          </check>
         </treat>
        </param>
       </params>
       <let role='action' line='204' var='Q{}newCount' as='1ADI' slot='1'>
        <arith op='+' calc='i+i'>
         <let line='193' var='Q{}precedingSibling' as='?NE nQ{http://www.mozarteum.at/ns/dme}part' slot='2'>
          <lastOf>
           <fn name='reverse'>
            <slash simple='1'>
             <dot type='1NE nQ{http://www.mozarteum.at/ns/dme}part'/>
             <axis name='preceding-sibling' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
            </slash>
           </fn>
          </lastOf>
          <choose line='195'>
           <fn name='exists'>
            <filter flags='b'>
             <varRef name='Q{}precedingSibling' slot='2'/>
             <fn name='exists'>
              <axis name='attribute' nodeTest='NA nQ{}split'/>
             </fn>
            </filter>
           </fn>
           <fn line='196' name='count'>
            <docOrder intra='1'>
             <slash simple='2'>
              <indexedFilter2 comp='CCC'>
               <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg2081739790' bSlot='1'/>
               <cast role='use' flags='ae' as='?AS'>
                <attVal name='Q{}n'/>
               </cast>
               <cast role='search' flags='ae' as='?AS'>
                <slash>
                 <varRef name='Q{}precedingSibling' slot='2'/>
                 <attVal name='Q{}staff'/>
                </slash>
               </cast>
              </indexedFilter2>
              <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
             </slash>
            </docOrder>
           </fn>
           <true/>
           <fn line='199' name='count'>
            <varRef name='Q{}precedingSibling' slot='2'/>
           </fn>
          </choose>
         </let>
         <varRef name='Q{}pCounter' slot='0'/>
        </arith>
        <sequence line='205'>
         <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}entry' type='1FM'>
          <check card='1' diag='0|0||map:entry'>
           <cast flags='ae' as='?ADI'>
            <attVal name='Q{}staff'/>
           </cast>
          </check>
          <varRef name='Q{}newCount' slot='1'/>
         </ifCall>
         <nextIteration line='207'>
          <withParam name='Q{}pCounter' as='1ADI' slot='0'>
           <varRef name='Q{}newCount' slot='1'/>
          </withParam>
         </nextIteration>
        </sequence>
       </let>
      </iterate>
     </treat>
     <map size='2'>
      <str val='duplicates'/>
      <str val='reject'/>
      <str val='duplicates-error-code'/>
      <str val='XTDE3365'/>
     </map>
    </ifCall>
   </treat>
  </template>
 </co>
 <co id='17' binds='19'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg78505498' as='1AB' line='168' module='global.xsl' visibility='PRIVATE'>
   <fn defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='168' name='exists'>
    <filter flags='b'>
     <slash simple='1'>
      <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
      <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
     </slash>
     <fn name='exists'>
      <filter flags='b'>
       <axis name='attribute' nodeTest='NA nQ{}available'/>
       <compareToString op='eq' val='no'>
        <cast flags='a' as='1AS'>
         <data diag='1|0||='>
          <dot type='1NA nQ{}available'/>
         </data>
        </cast>
       </compareToString>
      </filter>
     </fn>
    </filter>
   </fn>
  </globalVariable>
 </co>
 <co id='28' binds=''>
  <function name='Q{http://www.functx.com}add-or-update-attributes' line='103' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='?NE' slots='4'>
   <arg name='Q{}elements' as='*NE'/>
   <arg name='Q{}attrNames' as='*AQ'/>
   <arg name='Q{}attrValues' as='*A'/>
   <check role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='108' card='?' diag='5|0|XTTE0780|functx:add-or-update-attributes#3'>
    <forEach>
     <varRef name='Q{}elements' slot='0'/>
     <copy line='110' flags='cin' sit='1NE'>
      <sequence role='content'>
       <forEach>
        <varRef name='Q{}attrNames' slot='1'/>
        <let line='111' var='Q{}seq' as='1ADI' slot='3'>
         <fn name='position'/>
         <compAtt line='114' flags='l'>
          <convert role='name' from='AQ' to='AS'>
           <dot type='1AQ'/>
          </convert>
          <convert role='namespace' from='AU' to='AS'>
           <fn name='namespace-uri-from-QName'>
            <dot type='1AQ'/>
           </fn>
          </convert>
          <convert role='select' from='A' to='AS'>
           <subscript>
            <varRef name='Q{}attrValues' slot='2'/>
            <varRef name='Q{}seq' slot='3'/>
           </subscript>
          </convert>
         </compAtt>
        </let>
       </forEach>
       <copyOf line='116' flags='c'>
        <union op='|'>
         <filter flags='b'>
          <axis name='attribute' nodeTest='NA'/>
          <fn name='not'>
           <gcEE op='=' card='N:1' comp='EQC'>
            <varRef name='Q{}attrNames' slot='1'/>
            <fn name='node-name'>
             <dot type='1NA'/>
            </fn>
           </gcEE>
          </fn>
         </filter>
         <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
        </union>
       </copyOf>
      </sequence>
     </copy>
    </forEach>
   </check>
  </function>
 </co>
 <co id='29' binds=''>
  <function name='Q{http://www.functx.com}is-leap-year' line='1506' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AB' slots='2'>
   <arg name='Q{}date' as='?A'/>
   <let role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1514' var='Q{}year' as='1ADI' slot='1'>
    <cast flags='a' as='1ADI'>
     <fn name='substring'>
      <fn name='string'>
       <varRef name='Q{}date' slot='0'/>
      </fn>
      <int val='1'/>
      <int val='4'/>
     </fn>
    </cast>
    <or op='or'>
     <and op='and'>
      <compareToInt op='eq' val='0'>
       <arith op='mod' calc='i%i'>
        <varRef name='Q{}year' slot='1'/>
        <int val='4'/>
       </arith>
      </compareToInt>
      <compareToInt op='ne' val='0'>
       <arith op='mod' calc='i%i'>
        <varRef name='Q{}year' slot='1'/>
        <int val='100'/>
       </arith>
      </compareToInt>
     </and>
     <compareToInt op='eq' val='0'>
      <arith op='mod' calc='i%i'>
       <varRef name='Q{}year' slot='1'/>
       <int val='400'/>
      </arith>
     </compareToInt>
    </or>
   </let>
  </function>
 </co>
 <co id='30' binds=''>
  <function name='Q{http://www.functx.com}index-of-node' line='1306' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*ADI' slots='4'>
   <arg name='Q{}nodes' as='*N'/>
   <arg name='Q{}nodeToFind' as='1N'/>
   <for role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1313' var='Q{}seq' as='ADI' slot='2'>
    <to role='in'>
     <int val='1'/>
     <fn name='count'>
      <varRef name='Q{}nodes' slot='0'/>
     </fn>
    </to>
    <let role='return' var='Q{http://saxon.sf.net/generated-variable}v0' as='?AB' slot='3' flags='l'>
     <is op='is'>
      <subscript>
       <varRef name='Q{}nodes' slot='0'/>
       <varRef name='Q{}seq' slot='2'/>
      </subscript>
      <varRef name='Q{}nodeToFind' slot='1'/>
     </is>
     <filter flags='i'>
      <varRef name='Q{}seq' slot='2'/>
      <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='3'/>
     </filter>
    </let>
   </for>
  </function>
 </co>
 <co id='31' binds='11'>
  <template name='Q{}get.fermata.staff' flags='os' line='250' module='controlEvents.xsl' slots='1'>
   <cast role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='255' flags='a' as='1ADI'>
    <atomSing diag='2|0||cast as'>
     <slash simple='2'>
      <slash line='252' simple='1'>
       <let var='Q{}startidPointer' as='1AS' slot='0'>
        <fn name='substring-after'>
         <cvUntyped to='AS' diag='0|0||fn:substring-after'>
          <slash>
           <treat as='N' diag='14|2|XPTY0020|'>
            <dot flags='a'/>
           </treat>
           <attVal name='Q{}startid'/>
          </slash>
         </cvUntyped>
         <str val='#'/>
        </fn>
        <check line='253' card='?' diag='3|0|XTTE0570|refElement'>
         <slash>
          <gVarRef name='Q{}P_GLOBAL_CONTEXT_ITEM' bSlot='0'/>
          <fn name='id'>
           <varRef name='Q{}startidPointer' slot='0'/>
          </fn>
         </slash>
        </check>
       </let>
       <axis line='255' name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staff'/>
      </slash>
      <axis name='attribute' nodeTest='NA nQ{}n'/>
     </slash>
    </atomSing>
   </cast>
  </template>
 </co>
 <co id='32' binds='4 4 26 33'>
  <template name='Q{}process.app' flags='os' line='58' module='events.xsl' slots='7'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='59'>
    <param name='Q{}staffN' slot='0'>
     <str role='select' val=''/>
     <supplied role='conversion' slot='0'/>
    </param>
    <elem ns='=http://www.music-encoding.org/ns/mei array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='62' name='app' nsuri='http://www.music-encoding.org/ns/mei' flags='d'>
     <sequence line='64'>
      <applyT bSlot='0'>
       <slash role='select' simple='2'>
        <slash simple='1'>
         <treat as='N' diag='14|3|XPTY0020|'>
          <dot flags='a'/>
         </treat>
         <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}app'/>
        </slash>
        <axis name='attribute' nodeTest='NA'/>
       </slash>
      </applyT>
      <let line='65' var='Q{}currApp' as='*NE nQ{http://www.music-encoding.org/ns/mei}app' slot='1'>
       <slash simple='1'>
        <treat as='N' diag='14|3|XPTY0020|'>
         <dot flags='a'/>
        </treat>
        <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}app'/>
       </slash>
       <let line='70' var='Q{http://saxon.sf.net/generated-variable}v0' as='*NE' slot='2' flags='l'>
        <slash simple='2'>
         <varRef name='Q{}currApp' slot='1'/>
         <axis name='child' nodeTest='NE'/>
        </slash>
        <forEach line='68'>
         <to>
          <int val='1'/>
          <fn name='count'>
           <slash simple='2'>
            <varRef name='Q{}currApp' slot='1'/>
            <axis name='child' nodeTest='NE'/>
           </slash>
          </fn>
         </to>
         <let line='69' var='Q{}counter' as='1ADI' slot='3'>
          <dot type='1ADI'/>
          <let line='70' var='Q{}child' as='*NE' slot='4'>
           <subscript>
            <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='2'/>
            <varRef name='Q{}counter' slot='3'/>
           </subscript>
           <compElem line='71' flags='l'>
            <fn role='name' name='string'>
             <slash>
              <varRef name='Q{}child' slot='4'/>
              <fn name='name'>
               <dot type='1NE'/>
              </fn>
             </slash>
            </fn>
            <sequence role='content' line='72'>
             <applyT bSlot='1'>
              <slash role='select' simple='1'>
               <varRef name='Q{}child' slot='4'/>
               <axis name='attribute' nodeTest='NA'/>
              </slash>
             </applyT>
             <let line='73' var='Q{}reqLayer' as='1AS' slot='5'>
              <let ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' var='Q{}staffN' as='1ADI' slot='6'>
               <treat ns='=http://www.music-encoding.org/ns/mei array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' as='ADI' diag='0|0||dme:requested-layer'>
                <check card='1' diag='0|0||dme:requested-layer'>
                 <cvUntyped to='ADI' diag='0|0||dme:requested-layer'>
                  <data diag='0|0||dme:requested-layer'>
                   <varRef name='Q{}staffN' slot='0'/>
                  </data>
                 </cvUntyped>
                </check>
               </treat>
               <check module='global.xsl' line='100' card='1' diag='5|0|XTTE0780|dme:requested-layer#1'>
                <slash>
                 <slash simple='2'>
                  <indexedFilter2 comp='QUNC' flags='u'>
                   <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='2'/>
                   <attVal role='use' name='Q{}staff'/>
                   <varRef role='search' name='Q{}staffN' slot='6'/>
                  </indexedFilter2>
                  <axis name='attribute' nodeTest='NA nQ{}layer'/>
                 </slash>
                 <cast flags='a' as='1AS'>
                  <data diag='2|0||cast as'>
                   <dot type='1NA nQ{}layer'/>
                  </data>
                 </cast>
                </slash>
               </check>
              </let>
              <applyT line='74' mode='Q{}layer' bSlot='3'>
               <filter role='select' flags='b'>
                <slash simple='1'>
                 <varRef name='Q{}child' slot='4'/>
                 <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layer'/>
                </slash>
                <vc op='eq' onEmpty='0'>
                 <cast flags='ae' as='?AS'>
                  <attVal name='Q{}n'/>
                 </cast>
                 <varRef name='Q{}reqLayer' slot='5'/>
                </vc>
               </filter>
              </applyT>
             </let>
            </sequence>
           </compElem>
          </let>
         </let>
        </forEach>
       </let>
      </let>
     </sequence>
    </elem>
   </sequence>
  </template>
 </co>
 <co id='34' binds='11'>
  <template name='Q{}get.references' flags='os' line='259' module='controlEvents.xsl' slots='15'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='260'>
    <param name='Q{}pControlEvent' slot='0' flags='i' as='1NE'>
     <treat role='conversion' as='NE' diag='8|0|XTTE0590|pControlEvent'>
      <check card='1' diag='8|0|XTTE0590|pControlEvent'>
       <supplied slot='0'/>
      </check>
     </treat>
    </param>
    <param line='261' name='Q{}pNewStaffN' slot='1' flags='i' as='1ADI'>
     <treat role='conversion' as='ADI' diag='8|0|XTTE0590|pNewStaffN'>
      <check card='1' diag='8|0|XTTE0590|pNewStaffN'>
       <cvUntyped to='ADI' diag='8|0|XTTE0590|pNewStaffN'>
        <data diag='8|0|XTTE0590|pNewStaffN'>
         <supplied slot='1'/>
        </data>
       </cvUntyped>
      </check>
     </treat>
    </param>
    <let line='263' var='Q{}currentMeiBody' as='1NE nQ{http://www.music-encoding.org/ns/mei}body' slot='2'>
     <check card='1' diag='3|0|XTTE0570|currentMeiBody'>
      <slash>
       <varRef name='Q{}pControlEvent' slot='0'/>
       <fn name='reverse'>
        <axis name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}body'/>
       </fn>
      </slash>
     </check>
     <ifCall line='266' name='Q{http://www.w3.org/2005/xpath-functions/map}merge' type='1FM'>
      <forEach>
       <sequence>
        <slash simple='1'>
         <varRef name='Q{}pControlEvent' slot='0'/>
         <axis name='attribute' nodeTest='NA nQ{}startid'/>
        </slash>
        <slash simple='1'>
         <varRef name='Q{}pControlEvent' slot='0'/>
         <axis name='attribute' nodeTest='NA nQ{}endid'/>
        </slash>
       </sequence>
       <let line='267' var='Q{}reference' as='?NE' slot='3'>
        <let var='Q{http://saxon.sf.net/generated-variable}current1023960212' as='1' slot='4'>
         <dot type='1NA'/>
         <let var='Q{http://saxon.sf.net/generated-variable}v0' as='1AS' slot='5' flags='l'>
          <fn name='substring-after'>
           <cvUntyped to='AS' diag='0|0||fn:substring-after'>
            <data diag='0|0||fn:substring-after'>
             <varRef name='Q{http://saxon.sf.net/generated-variable}current1023960212' slot='4'/>
            </data>
           </cvUntyped>
           <str val='#'/>
          </fn>
          <check card='?' diag='3|0|XTTE0570|reference'>
           <slash>
            <gVarRef name='Q{}P_GLOBAL_CONTEXT_ITEM' bSlot='0'/>
            <fn name='id'>
             <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='5'/>
            </fn>
           </slash>
          </check>
         </let>
        </let>
        <choose line='270'>
         <instance of='1NE'>
          <varRef name='Q{}reference' slot='3'/>
         </instance>
         <let line='272' var='Q{}measureId' as='1NA nQ{http://www.w3.org/XML/1998/namespace}id' slot='6'>
          <check card='1' diag='3|0|XTTE0570|measureId'>
           <slash simple='2'>
            <slash>
             <varRef name='Q{}reference' slot='3'/>
             <fn name='reverse'>
              <axis name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}measure'/>
             </fn>
            </slash>
            <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
           </slash>
          </check>
          <let line='274' var='Q{http://saxon.sf.net/generated-variable}v1' as='1AS' slot='7' flags='l'>
           <cvUntyped to='AS' diag='0|0||fn:id'>
            <data diag='0|0||fn:id'>
             <varRef name='Q{}measureId' slot='6'/>
            </data>
           </cvUntyped>
           <let var='Q{}newStaff' as='1NE nQ{http://www.music-encoding.org/ns/mei}staff' slot='8'>
            <check card='1' diag='3|0|XTTE0570|newStaff'>
             <docOrder intra='1'>
              <filter flags='b'>
               <slash simple='2'>
                <slash>
                 <varRef name='Q{}currentMeiBody' slot='2'/>
                 <fn name='id'>
                  <varRef name='Q{http://saxon.sf.net/generated-variable}v1' slot='7'/>
                 </fn>
                </slash>
                <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staff'/>
               </slash>
               <gc op='=' card='1:1' comp='QUNC'>
                <attVal name='Q{}n'/>
                <varRef name='Q{}pNewStaffN' slot='1'/>
               </gc>
              </filter>
             </docOrder>
            </check>
            <let line='275' var='Q{}tstamp' as='1NA nQ{}tstamp' slot='9'>
             <check card='1' diag='3|0|XTTE0570|tstamp'>
              <slash simple='1'>
               <varRef name='Q{}reference' slot='3'/>
               <axis name='attribute' nodeTest='NA nQ{}tstamp'/>
              </slash>
             </check>
             <ifCall line='300' name='Q{http://www.w3.org/2005/xpath-functions/map}entry' type='1FM'>
              <fn name='local-name'>
               <dot type='1NA'/>
              </fn>
              <fn name='string-join'>
               <choose line='282'>
                <fn name='exists'>
                 <filter flags='b'>
                  <slash simple='1'>
                   <varRef name='Q{}reference' slot='3'/>
                   <axis name='ancestor' nodeTest='NE'/>
                  </slash>
                  <or op='or'>
                   <fn name='exists'>
                    <axis name='self' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}choice'/>
                   </fn>
                   <fn name='exists'>
                    <axis name='self' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}app'/>
                   </fn>
                  </or>
                 </filter>
                </fn>
                <let line='289' var='Q{http://saxon.sf.net/generated-variable}v4' as='1AS' slot='10' flags='l'>
                 <cast flags='a' as='1AS'>
                  <data diag='1|1||='>
                   <varRef name='Q{}tstamp' slot='9'/>
                  </data>
                 </cast>
                 <let line='286' var='Q{http://saxon.sf.net/generated-variable}v2' as='?AS' slot='11' flags='l'>
                  <cast flags='ae' as='?AS'>
                   <slash>
                    <varRef name='Q{}reference' slot='3'/>
                    <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
                   </slash>
                  </cast>
                  <let var='Q{}variantID' as='1NA nQ{http://www.w3.org/XML/1998/namespace}id' slot='12'>
                   <check card='1' diag='3|0|XTTE0570|variantID'>
                    <slash simple='2'>
                     <filter line='283' flags='b'>
                      <slash simple='1'>
                       <check card='1' diag='3|0|XTTE0570|variantsElement'>
                        <lastOf>
                         <slash>
                          <varRef name='Q{}reference' slot='3'/>
                          <fn name='reverse'>
                           <filter flags='b'>
                            <axis name='ancestor' nodeTest='NE'/>
                            <or op='or'>
                             <fn name='exists'>
                              <axis name='self' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}choice'/>
                             </fn>
                             <fn name='exists'>
                              <axis name='self' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}app'/>
                             </fn>
                            </or>
                           </filter>
                          </fn>
                         </slash>
                        </lastOf>
                       </check>
                       <axis line='286' name='child' nodeTest='NE'/>
                      </slash>
                      <fn line='286' name='exists'>
                       <filter flags='b'>
                        <axis name='descendant' nodeTest='NE'/>
                        <vc op='eq' onEmpty='0'>
                         <cast flags='ae' as='?AS'>
                          <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
                         </cast>
                         <varRef name='Q{http://saxon.sf.net/generated-variable}v2' slot='11'/>
                        </vc>
                       </filter>
                      </fn>
                     </filter>
                     <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                    </slash>
                   </check>
                   <let line='289' var='Q{http://saxon.sf.net/generated-variable}v3' as='1AS' slot='13' flags='l'>
                    <cvUntyped to='AS' diag='0|0||fn:id'>
                     <data diag='0|0||fn:id'>
                      <varRef name='Q{}variantID' slot='12'/>
                     </data>
                    </cvUntyped>
                    <data>
                     <slash simple='2'>
                      <docOrder intra='1'>
                       <filter flags='b'>
                        <slash simple='2'>
                         <docOrder intra='1'>
                          <slash>
                           <slash simple='1'>
                            <varRef name='Q{}newStaff' slot='8'/>
                            <axis name='descendant-or-self' nodeTest='N'/>
                           </slash>
                           <fn name='id'>
                            <varRef name='Q{http://saxon.sf.net/generated-variable}v3' slot='13'/>
                           </fn>
                          </slash>
                         </docOrder>
                         <axis name='descendant' nodeTest='N u[NP,NE,NC,NT]'/>
                        </slash>
                        <vc op='eq' onEmpty='0'>
                         <cast flags='ae' as='?AS'>
                          <attVal name='Q{}tstamp'/>
                         </cast>
                         <varRef name='Q{http://saxon.sf.net/generated-variable}v4' slot='10'/>
                        </vc>
                       </filter>
                      </docOrder>
                      <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                     </slash>
                    </data>
                   </let>
                  </let>
                 </let>
                </let>
                <true/>
                <let line='293' var='Q{http://saxon.sf.net/generated-variable}v5' as='1AS' slot='14' flags='l'>
                 <cast flags='a' as='1AS'>
                  <data diag='1|1||='>
                   <varRef name='Q{}tstamp' slot='9'/>
                  </data>
                 </cast>
                 <data>
                  <slash simple='2'>
                   <filter flags='b'>
                    <slash simple='1'>
                     <varRef name='Q{}newStaff' slot='8'/>
                     <axis name='descendant' nodeTest='N u[NP,NE,NC,NT]'/>
                    </slash>
                    <vc op='eq' onEmpty='0'>
                     <cast flags='ae' as='?AS'>
                      <attVal name='Q{}tstamp'/>
                     </cast>
                     <varRef name='Q{http://saxon.sf.net/generated-variable}v5' slot='14'/>
                    </vc>
                   </filter>
                   <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                  </slash>
                 </data>
                </let>
               </choose>
               <str val=','/>
              </fn>
             </ifCall>
            </let>
           </let>
          </let>
         </let>
         <true/>
         <sequence line='303'>
          <message>
           <sequence role='select'>
            <valueOf>
             <str val='No reference found for @'/>
            </valueOf>
            <valueOf>
             <slash>
              <dot type='1NA'/>
              <fn name='name'>
               <dot type='1NA'/>
              </fn>
             </slash>
            </valueOf>
            <valueOf flags='S'>
             <str val='="'/>
            </valueOf>
            <valueOf>
             <convert from='AZ' to='AS'>
              <data>
               <dot type='1NA'/>
              </data>
             </convert>
            </valueOf>
            <valueOf flags='S'>
             <str val='"!'/>
            </valueOf>
           </sequence>
           <str role='terminate' val='no'/>
           <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
          </message>
          <ifCall line='304' name='Q{http://www.w3.org/2005/xpath-functions/map}entry' type='1FM'>
           <fn name='local-name'>
            <dot type='1NA'/>
           </fn>
           <str val='NA'/>
          </ifCall>
         </sequence>
        </choose>
       </let>
      </forEach>
      <map size='2'>
       <str val='duplicates'/>
       <str val='reject'/>
       <str val='duplicates-error-code'/>
       <str val='XTDE3365'/>
      </map>
     </ifCall>
    </let>
   </sequence>
  </template>
 </co>
 <co id='35' binds='4 36 37'>
  <template name='Q{}renumber.staffdef' flags='os' line='111' module='scoreDef.xsl' slots='0'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='112'>
    <applyT bSlot='0'>
     <slash role='select' simple='1'>
      <treat as='N' diag='14|2|XPTY0020|'>
       <dot flags='a'/>
      </treat>
      <axis name='attribute' nodeTest='NA'/>
     </slash>
    </applyT>
    <choose line='113'>
     <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg1768065241' bSlot='1'/>
     <att line='114' name='n'>
      <convert from='ADI' to='AS'>
       <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}get' type='*'>
        <gVarRef name='Q{}NEW_STAVES_NUMBERING' bSlot='2'/>
        <check card='1' diag='0|1||map:get'>
         <cast flags='ae' as='?ADI'>
          <slash>
           <treat as='N' diag='14|2|XPTY0020|'>
            <dot flags='a'/>
           </treat>
           <attVal name='Q{}n'/>
          </slash>
         </cast>
        </check>
       </ifCall>
      </convert>
     </att>
    </choose>
   </sequence>
  </template>
 </co>
 <co id='38' binds='39 39 39'>
  <function name='Q{http://www.functx.com}date' line='567' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AA' slots='3'>
   <arg name='Q{}year' as='1A'/>
   <arg name='Q{}month' as='1A'/>
   <arg name='Q{}day' as='1A'/>
   <cast role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='578' flags='a' as='1AA'>
    <fn name='concat'>
     <sequence>
      <ufCall name='Q{http://www.functx.com}pad-integer-to-length' tailCall='false' bSlot='0'>
       <cast flags='a' as='1ADI'>
        <varRef name='Q{}year' slot='0'/>
       </cast>
       <int val='4'/>
      </ufCall>
      <str val='-'/>
      <ufCall name='Q{http://www.functx.com}pad-integer-to-length' tailCall='false' bSlot='1'>
       <cast flags='a' as='1ADI'>
        <varRef name='Q{}month' slot='1'/>
       </cast>
       <int val='2'/>
      </ufCall>
      <str val='-'/>
      <ufCall name='Q{http://www.functx.com}pad-integer-to-length' tailCall='false' bSlot='2'>
       <cast flags='a' as='1ADI'>
        <varRef name='Q{}day' slot='2'/>
       </cast>
       <int val='2'/>
      </ufCall>
     </sequence>
    </fn>
   </cast>
  </function>
 </co>
 <co id='40' binds='1 40 40'>
  <function name='Q{http://www.functx.com}remove-elements-deep' line='2409' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*N' slots='2'>
   <arg name='Q{}nodes' as='*N'/>
   <arg name='Q{}names' as='*AS'/>
   <forEach role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2413'>
    <varRef name='Q{}nodes' slot='0'/>
    <choose line='2415'>
     <instance of='1NE'>
      <dot type='1N'/>
     </instance>
     <choose line='2416'>
      <fn name='not'>
       <ufCall name='Q{http://www.functx.com}name-test' tailCall='false' bSlot='0'>
        <fn name='name'>
         <dot type='1N'/>
        </fn>
        <varRef name='Q{}names' slot='1'/>
       </ufCall>
      </fn>
      <compElem line='2417'>
       <fn role='name' name='string'>
        <convert from='AQ' to='AS'>
         <fn name='node-name'>
          <dot type='1N'/>
         </fn>
        </convert>
       </fn>
       <sequence role='content' line='2419'>
        <axis name='attribute' nodeTest='NA'/>
        <ufCall name='Q{http://www.functx.com}remove-elements-deep' tailCall='false' bSlot='1'>
         <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
         <varRef name='Q{}names' slot='1'/>
        </ufCall>
       </sequence>
      </compElem>
     </choose>
     <instance line='2423' of='1ND'>
      <dot type='1N'/>
     </instance>
     <doc line='2424'>
      <ufCall line='2426' name='Q{http://www.functx.com}remove-elements-deep' tailCall='false' bSlot='2'>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
       <varRef name='Q{}names' slot='1'/>
      </ufCall>
     </doc>
     <true/>
     <dot line='2430' type='1N'/>
    </choose>
   </forEach>
  </function>
 </co>
 <co id='41' binds='11'>
  <template name='Q{}startid2tstamp' flags='os' line='314' module='controlEvents.xsl' slots='1'>
   <let role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='315' var='Q{}startidPointer' as='1AS' slot='0'>
    <fn name='substring-after'>
     <cvUntyped to='AS' diag='0|0||fn:substring-after'>
      <slash>
       <treat as='N' diag='14|2|XPTY0020|'>
        <dot flags='a'/>
       </treat>
       <attVal name='Q{}startid'/>
      </slash>
     </cvUntyped>
     <str val='#'/>
    </fn>
    <att line='317' name='tstamp'>
     <convert from='AZ' to='AS'>
      <slash line='316'>
       <check card='1' diag='3|0|XTTE0570|reference'>
        <slash>
         <gVarRef name='Q{}P_GLOBAL_CONTEXT_ITEM' bSlot='0'/>
         <fn name='id'>
          <varRef name='Q{}startidPointer' slot='0'/>
         </fn>
        </slash>
       </check>
       <attVal line='317' name='Q{}tstamp'/>
      </slash>
     </convert>
    </att>
   </let>
  </template>
 </co>
 <co id='42' binds=''>
  <globalVariable name='Q{}CONFIG_PATH' as='1AU' line='29' module='main.xsl' visibility='PRIVATE'>
   <fn defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='29' name='resolve-uri'>
    <str val='config/config.xml'/>
    <check card='1' diag='0|1||fn:resolve-uri'>
     <convert from='AU' to='AS' diag='0|1||fn:resolve-uri'>
      <fn name='static-base-uri'/>
     </convert>
    </check>
   </fn>
  </globalVariable>
 </co>
 <co id='39' binds=''>
  <function name='Q{http://www.functx.com}pad-integer-to-length' line='2202' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AS' slots='3'>
   <arg name='Q{}integerToPad' as='?A'/>
   <arg name='Q{}length' as='1ADI'/>
   <choose role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2213'>
    <vc op='lt' onEmpty='0'>
     <varRef name='Q{}length' slot='1'/>
     <fn name='string-length'>
      <fn name='string'>
       <varRef name='Q{}integerToPad' slot='0'/>
      </fn>
     </fn>
    </vc>
    <treat as='AS' diag='5|0|XTTE0780|functx:pad-integer-to-length#2'>
     <check card='1' diag='5|0|XTTE0780|functx:pad-integer-to-length#2'>
      <cvUntyped to='AS' diag='5|0|XTTE0780|functx:pad-integer-to-length#2'>
       <data diag='5|0|XTTE0780|functx:pad-integer-to-length#2'>
        <fn name='error'>
         <qName pre='functx' uri='http://www.functx.com' loc='Integer_Longer_Than_Length'/>
        </fn>
       </data>
      </cvUntyped>
     </check>
    </treat>
    <true/>
    <fn name='concat'>
     <sequence>
      <fn line='2524' name='string-join'>
       <for var='Q{}i' as='ADI' slot='2'>
        <to role='in'>
         <int val='1'/>
         <arith line='2213' op='-' calc='i-i'>
          <varRef name='Q{}length' slot='1'/>
          <fn name='string-length'>
           <fn name='string'>
            <varRef name='Q{}integerToPad' slot='0'/>
           </fn>
          </fn>
         </arith>
        </to>
        <str role='return' val='0'/>
       </for>
       <str val=''/>
      </fn>
      <fn name='string'>
       <varRef name='Q{}integerToPad' slot='0'/>
      </fn>
     </sequence>
    </fn>
   </choose>
  </function>
 </co>
 <co id='43' binds=''>
  <globalParam name='Q{}P_LIB_PATH' as='*' line='28' module='main.xsl' visibility='PUBLIC'>
   <fn defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='28' name='resolve-uri'>
    <str val='lib'/>
    <check card='1' diag='0|1||fn:resolve-uri'>
     <convert from='AU' to='AS' diag='0|1||fn:resolve-uri'>
      <fn name='static-base-uri'/>
     </convert>
    </check>
   </fn>
  </globalParam>
 </co>
 <co id='44' binds=''>
  <function name='Q{http://www.functx.com}days-in-month' line='734' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='?ADI' slots='2'>
   <arg name='Q{}date' as='?A'/>
   <choose role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='744'>
    <and op='and'>
     <vc op='eq' onEmpty='0'>
      <fn name='month-from-date'>
       <cast flags='ae' as='?AA'>
        <varRef name='Q{}date' slot='0'/>
       </cast>
      </fn>
      <int val='2'/>
     </vc>
     <let line='1514' var='Q{}year' as='1ADI' slot='1'>
      <cast flags='a' as='1ADI'>
       <fn name='substring'>
        <fn name='string'>
         <varRef line='744' name='Q{}date' slot='0'/>
        </fn>
        <int val='1'/>
        <int val='4'/>
       </fn>
      </cast>
      <or op='or'>
       <and op='and'>
        <compareToInt op='eq' val='0'>
         <arith op='mod' calc='i%i'>
          <varRef name='Q{}year' slot='1'/>
          <int val='4'/>
         </arith>
        </compareToInt>
        <compareToInt op='ne' val='0'>
         <arith op='mod' calc='i%i'>
          <varRef name='Q{}year' slot='1'/>
          <int val='100'/>
         </arith>
        </compareToInt>
       </and>
       <compareToInt op='eq' val='0'>
        <arith op='mod' calc='i%i'>
         <varRef name='Q{}year' slot='1'/>
         <int val='400'/>
        </arith>
       </compareToInt>
      </or>
     </let>
    </and>
    <int val='29'/>
    <true/>
    <subscript>
     <literal count='12'>
      <int val='31'/>
      <int val='28'/>
      <int val='31'/>
      <int val='30'/>
      <int val='31'/>
      <int val='30'/>
      <int val='31'/>
      <int val='31'/>
      <int val='30'/>
      <int val='31'/>
      <int val='30'/>
      <int val='31'/>
     </literal>
     <fn name='month-from-date'>
      <cast flags='ae' as='?AA'>
       <varRef name='Q{}date' slot='0'/>
      </cast>
     </fn>
    </subscript>
   </choose>
  </function>
 </co>
 <co id='23' binds='45'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg247183083' as='1NE nQ{http://www.mozarteum.at/ns/dme}parts' line='121' module='global.xsl' visibility='PRIVATE'>
   <check defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='121' card='1' diag='3|0|XTTE0570|requestedParts'>
    <slash simple='1'>
     <gVarRef name='Q{}USER_PARAMETERS' bSlot='0'/>
     <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}parts'/>
    </slash>
   </check>
  </globalVariable>
 </co>
 <co id='46' binds='47 4 33'>
  <template name='Q{}splitStaff' flags='os' line='413' module='events.xsl' slots='6'>
   <let role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='414' var='Q{}currentStaff' as='1NE nQ{http://www.music-encoding.org/ns/mei}staff' slot='0'>
    <treat as='NE nQ{http://www.music-encoding.org/ns/mei}staff' diag='3|0|XTTE0570|currentStaff'>
     <dot flags='a'/>
    </treat>
    <let line='427' var='Q{http://saxon.sf.net/generated-variable}v2' as='?AZ' slot='1' flags='l'>
     <slash>
      <varRef name='Q{}currentStaff' slot='0'/>
      <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
     </slash>
     <let line='425' var='Q{http://saxon.sf.net/generated-variable}v1' as='*NA' slot='2' flags='l'>
      <slash simple='1'>
       <varRef name='Q{}currentStaff' slot='0'/>
       <axis name='attribute' nodeTest='NA'/>
      </slash>
      <let line='419' var='Q{http://saxon.sf.net/generated-variable}v0' as='1ADI' slot='3' flags='l'>
       <check card='1' diag='8|0|XTTE0590|staffN'>
        <cast flags='ae' as='?ADI'>
         <slash>
          <varRef name='Q{}currentStaff' slot='0'/>
          <attVal name='Q{}n'/>
         </slash>
        </cast>
       </check>
       <iterate line='415'>
        <slash role='select' simple='1'>
         <treat as='N' diag='14|3|XPTY0020|'>
          <dot flags='a'/>
         </treat>
         <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layer'/>
        </slash>
        <params role='params'/>
        <let role='action' line='417' var='Q{}newStaffNumber' as='1ADI' slot='4'>
         <callT line='418' name='Q{}get.new.staff.number' bSlot='0'>
          <withParam name='Q{}staffN' flags='c' as='1ADI'>
           <varRef line='419' name='Q{http://saxon.sf.net/generated-variable}v0' slot='3'/>
          </withParam>
          <withParam name='Q{}layerN' flags='c' as='1ADI'>
           <check line='420' card='1' diag='8|0|XTTE0590|layerN'>
            <cast flags='ae' as='?ADI'>
             <attVal name='Q{}n'/>
            </cast>
           </check>
          </withParam>
         </callT>
         <elem line='424' name='staff' nsuri='http://www.music-encoding.org/ns/mei' flags='d'>
          <sequence line='425'>
           <applyT bSlot='1'>
            <except role='select' op='except'>
             <varRef name='Q{http://saxon.sf.net/generated-variable}v1' slot='2'/>
             <docOrder intra='1'>
              <sequence>
               <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
               <axis name='attribute' nodeTest='NA nQ{}n'/>
              </sequence>
             </docOrder>
            </except>
           </applyT>
           <att line='426' name='n' flags='l'>
            <convert from='ADI' to='AS'>
             <varRef name='Q{}newStaffNumber' slot='4'/>
            </convert>
           </att>
           <att line='427' name='xml:id' nsuri='http://www.w3.org/XML/1998/namespace' flags='l'>
            <fn name='normalize-space'>
             <fn name='concat'>
              <varRef name='Q{http://saxon.sf.net/generated-variable}v2' slot='1'/>
              <str val='_'/>
              <varRef name='Q{}newStaffNumber' slot='4'/>
             </fn>
            </fn>
           </att>
           <let line='429' var='Q{}extractedLayer' as='1ND' slot='5'>
            <doc line='430'>
             <applyT mode='Q{}layer' bSlot='2'>
              <dot role='select' type='1NE nQ{http://www.music-encoding.org/ns/mei}layer'/>
             </applyT>
            </doc>
            <copyOf line='439' flags='c'>
             <varRef name='Q{}extractedLayer' slot='5'/>
            </copyOf>
           </let>
          </sequence>
         </elem>
        </let>
       </iterate>
      </let>
     </let>
    </let>
   </let>
  </template>
 </co>
 <co id='47' binds='48 37 26'>
  <template name='Q{}get.new.staff.number' flags='os' as='1ADI' line='230' module='global.xsl' slots='3'>
   <check role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='231' card='1' diag='7|0|XTTE0505|get.new.staff.number'>
    <sequence>
     <param name='Q{}staffN' slot='0' flags='i' as='1ADI'>
      <treat role='conversion' as='ADI' diag='8|0|XTTE0590|staffN'>
       <check card='1' diag='8|0|XTTE0590|staffN'>
        <cvUntyped to='ADI' diag='8|0|XTTE0590|staffN'>
         <data diag='8|0|XTTE0590|staffN'>
          <supplied slot='0'/>
         </data>
        </cvUntyped>
       </check>
      </treat>
     </param>
     <param line='232' name='Q{}layerN' slot='1' as='?ADI'>
      <empty role='select'/>
      <treat role='conversion' as='ADI' diag='8|0|XTTE0590|layerN'>
       <check card='?' diag='8|0|XTTE0590|layerN'>
        <cvUntyped to='ADI' diag='8|0|XTTE0590|layerN'>
         <data diag='8|0|XTTE0590|layerN'>
          <supplied slot='1'/>
         </data>
        </cvUntyped>
       </check>
      </treat>
     </param>
     <choose line='237'>
      <gVarRef name='Q{}RENUMBER_STAVES' bSlot='0'/>
      <let line='239' var='Q{}newFirstStaffDefNumber' as='1ADI' slot='2'>
       <check card='1' diag='3|0|XTTE0570|newFirstStaffDefNumber'>
        <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}get' type='*'>
         <gVarRef name='Q{}NEW_STAVES_NUMBERING' bSlot='1'/>
         <varRef name='Q{}staffN' slot='0'/>
        </ifCall>
       </check>
       <choose line='241'>
        <fn name='empty'>
         <slash simple='2'>
          <indexedFilter2 comp='QUNC' flags='u'>
           <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='2'/>
           <attVal role='use' name='Q{}staff'/>
           <varRef role='search' name='Q{}staffN' slot='0'/>
          </indexedFilter2>
          <axis name='attribute' nodeTest='NA nQ{}split'/>
         </slash>
        </fn>
        <varRef line='242' name='Q{}newFirstStaffDefNumber' slot='2'/>
        <vc line='245' op='eq' onEmpty='0'>
         <varRef name='Q{}layerN' slot='1'/>
         <int val='1'/>
        </vc>
        <varRef line='246' name='Q{}newFirstStaffDefNumber' slot='2'/>
        <true/>
        <arith line='254' op='-' calc='i-i'>
         <arith op='+' calc='i+i'>
          <varRef name='Q{}layerN' slot='1'/>
          <varRef name='Q{}newFirstStaffDefNumber' slot='2'/>
         </arith>
         <int val='1'/>
        </arith>
       </choose>
      </let>
      <true/>
      <varRef line='259' name='Q{}staffN' slot='0'/>
     </choose>
    </sequence>
   </check>
  </template>
 </co>
 <co id='48' binds='19 45'>
  <globalVariable name='Q{}RENUMBER_STAVES' as='1AB' line='74' module='main.xsl' visibility='PRIVATE'>
   <or defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='74' op='or'>
    <fn name='exists'>
     <slash simple='2'>
      <slash simple='1'>
       <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
       <axis name='descendant-or-self' nodeTest='NE'/>
      </slash>
      <axis name='attribute' nodeTest='NA nQ{}split'/>
     </slash>
    </fn>
    <fn name='exists'>
     <slash>
      <gVarRef name='Q{}USER_PARAMETERS' bSlot='1'/>
      <fn name='key'>
       <str val='Q{http://saxon.sf.net/}kk101'/>
       <str val='yes'/>
       <dot type='1ND'/>
      </fn>
     </slash>
    </fn>
   </or>
  </globalVariable>
 </co>
 <co id='49' binds='26'>
  <function name='Q{http://www.mozarteum.at/ns/dme}requested-layer' line='98' module='global.xsl' flags='pU' as='1AS' slots='1'>
   <arg name='Q{}staffN' as='1ADI'/>
   <check role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='100' card='1' diag='5|0|XTTE0780|dme:requested-layer#1'>
    <slash>
     <slash simple='2'>
      <indexedFilter2 comp='QUNC' flags='u'>
       <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='0'/>
       <attVal role='use' name='Q{}staff'/>
       <varRef role='search' name='Q{}staffN' slot='0'/>
      </indexedFilter2>
      <axis name='attribute' nodeTest='NA nQ{}layer'/>
     </slash>
     <cast flags='a' as='1AS'>
      <data diag='2|0||cast as'>
       <dot type='1NA nQ{}layer'/>
      </data>
     </cast>
    </slash>
   </check>
  </function>
 </co>
 <co id='45' binds='50 50 50 50 50'>
  <globalVariable name='Q{}USER_PARAMETERS' as='1ND' line='32' module='main.xsl' visibility='PRIVATE'>
   <choose defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='34'>
    <instance of='1ND'>
     <gVarRef name='Q{}P_USER_PARAMETERS' bSlot='0'/>
    </instance>
    <treat line='35' as='ND' diag='3|0|XTTE0570|USER_PARAMETERS'>
     <check card='1' diag='3|0|XTTE0570|USER_PARAMETERS'>
      <gVarRef name='Q{}P_USER_PARAMETERS' bSlot='2'/>
     </check>
    </treat>
    <instance line='37' of='1NE'>
     <gVarRef name='Q{}P_USER_PARAMETERS' bSlot='1'/>
    </instance>
    <doc line='38'>
     <gVarRef line='39' name='Q{}P_USER_PARAMETERS' bSlot='3'/>
    </doc>
    <true/>
    <check line='43' card='1' diag='3|0|XTTE0570|USER_PARAMETERS'>
     <fn name='parse-xml'>
      <treat as='AS' diag='0|0||fn:parse-xml'>
       <check card='?' diag='0|0||fn:parse-xml'>
        <cvUntyped to='AS' diag='0|0||fn:parse-xml'>
         <data diag='0|0||fn:parse-xml'>
          <gVarRef name='Q{}P_USER_PARAMETERS' bSlot='4'/>
         </data>
        </cvUntyped>
       </check>
      </treat>
     </fn>
    </check>
   </choose>
  </globalVariable>
 </co>
 <co id='51' binds=''>
  <function name='Q{http://www.functx.com}substring-after-if-contains' line='2915' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='?AS' slots='2'>
   <arg name='Q{}arg' as='?AS'/>
   <arg name='Q{}delim' as='1AS'/>
   <choose role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2923'>
    <fn name='contains'>
     <varRef name='Q{}arg' slot='0'/>
     <varRef name='Q{}delim' slot='1'/>
    </fn>
    <fn name='substring-after'>
     <varRef name='Q{}arg' slot='0'/>
     <varRef name='Q{}delim' slot='1'/>
    </fn>
    <true/>
    <varRef name='Q{}arg' slot='0'/>
   </choose>
  </function>
 </co>
 <co id='52' binds='19'>
  <globalVariable name='Q{}REQ_PARTS_EXTRACT_LAYERS' as='*ADI' line='52' module='main.xsl' visibility='PRIVATE' flags='x'>
   <slash defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='52'>
    <slash simple='2'>
     <filter flags='b'>
      <slash simple='1'>
       <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
       <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
      </slash>
      <fn name='exists'>
       <axis name='attribute' nodeTest='NA nQ{}layer'/>
      </fn>
     </filter>
     <axis name='attribute' nodeTest='NA nQ{}staff'/>
    </slash>
    <cast flags='a' as='1ADI'>
     <data diag='2|0||cast as'>
      <dot type='1NA nQ{}staff'/>
     </data>
    </cast>
   </slash>
  </globalVariable>
 </co>
 <co id='53' binds=''>
  <function name='Q{http://www.functx.com}yearMonthDuration' line='3442' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1ARY' slots='2'>
   <arg name='Q{}years' as='?AD'/>
   <arg name='Q{}months' as='?ADI'/>
   <treat role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='3449' as='ARY' diag='5|0|XTTE0780|functx:yearMonthDuration#2'>
    <check card='1' diag='5|0|XTTE0780|functx:yearMonthDuration#2'>
     <arith op='+' calc='a+a'>
      <arith op='*' calc='a*a'>
       <atomic val='P1M' type='ARY'/>
       <cvUntyped to='AO'>
        <choose line='1246'>
         <fn name='string'>
          <varRef line='3449' name='Q{}months' slot='1'/>
         </fn>
         <varRef line='3449' name='Q{}months' slot='1'/>
         <true/>
         <int val='0'/>
        </choose>
       </cvUntyped>
      </arith>
      <arith op='*' calc='a*a'>
       <atomic val='P1Y' type='ARY'/>
       <cvUntyped to='AO'>
        <choose line='1246'>
         <fn name='string'>
          <varRef line='3449' name='Q{}years' slot='0'/>
         </fn>
         <varRef line='3449' name='Q{}years' slot='0'/>
         <true/>
         <int val='0'/>
        </choose>
       </cvUntyped>
      </arith>
     </arith>
    </check>
   </treat>
  </function>
 </co>
 <co id='14' binds='43'>
  <template name='Q{}get.config.items' flags='os' line='86' module='global.xsl' slots='1'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='87'>
    <param name='Q{}id' slot='0' flags='i' as='1AS'>
     <treat role='conversion' as='AS' diag='8|0|XTTE0590|id'>
      <check card='1' diag='8|0|XTTE0590|id'>
       <cvUntyped to='AS' diag='8|0|XTTE0590|id'>
        <data diag='8|0|XTTE0590|id'>
         <supplied slot='0'/>
        </data>
       </cvUntyped>
      </check>
     </treat>
    </param>
    <slash line='88'>
     <docOrder intra='1'>
      <slash simple='2'>
       <slash>
        <fn name='doc'>
         <fn name='concat'>
          <data diag='0|0||fn:concat'>
           <gVarRef name='Q{}P_LIB_PATH' bSlot='0'/>
          </data>
          <str val='/lists/lists.xml'/>
         </fn>
        </fn>
        <fn name='id'>
         <varRef name='Q{}id' slot='0'/>
        </fn>
       </slash>
       <axis name='child' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}item'/>
      </slash>
     </docOrder>
     <data>
      <dot type='1NE nQ{http://www.mozarteum.at/ns/dme}item'/>
     </data>
    </slash>
   </sequence>
  </template>
 </co>
 <co id='54' binds=''>
  <function name='Q{http://www.functx.com}substring-before-match' line='3070' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AS' slots='2'>
   <arg name='Q{}arg' as='?AS'/>
   <arg name='Q{}regex' as='1AS'/>
   <check role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='3076' card='1' diag='5|0|XTTE0780|functx:substring-before-match#2'>
    <first>
     <fn name='tokenize'>
      <varRef name='Q{}arg' slot='0'/>
      <varRef name='Q{}regex' slot='1'/>
      <str val=''/>
     </fn>
    </first>
   </check>
  </function>
 </co>
 <co id='55' binds='35 26 56'>
  <template name='Q{}resolve.layerDef' flags='os' line='51' module='scoreDef.xsl' slots='4'>
   <copy role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='53' flags='cin' sit='1'>
    <sequence role='content'>
     <callT name='Q{}renumber.staffdef' bSlot='0'/>
     <let line='54' var='Q{}layerN' as='1NA nQ{}layer' slot='0'>
      <let var='Q{http://saxon.sf.net/generated-variable}current536310580' as='1' slot='1'>
       <dot flags='a'/>
       <check card='1' diag='3|0|XTTE0570|layerN'>
        <slash simple='2'>
         <indexedFilter2 comp='CCC'>
          <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='1'/>
          <attVal role='use' name='Q{}staff'/>
          <slash role='search'>
           <treat as='N' diag='1|0|XPTY0019|/'>
            <varRef name='Q{http://saxon.sf.net/generated-variable}current536310580' slot='1'/>
           </treat>
           <attVal name='Q{}n'/>
          </slash>
         </indexedFilter2>
         <axis name='attribute' nodeTest='NA nQ{}layer'/>
        </slash>
       </check>
      </let>
      <let line='63' var='Q{http://saxon.sf.net/generated-variable}v1' as='1AS' slot='2' flags='l'>
       <cast flags='a' as='1AS'>
        <data diag='1|1||='>
         <varRef name='Q{}layerN' slot='0'/>
        </data>
       </cast>
       <let line='55' var='Q{http://saxon.sf.net/generated-variable}v0' as='1AS' slot='3' flags='l'>
        <cast flags='a' as='1AS'>
         <data diag='1|1||='>
          <varRef name='Q{}layerN' slot='0'/>
         </data>
        </cast>
        <sequence>
         <att name='decls' flags='l'>
          <fn name='string-join'>
           <convert from='AZ' to='AS'>
            <data>
             <slash simple='2'>
              <filter flags='b'>
               <slash simple='1'>
                <treat as='N' diag='1|0|XPTY0019|/'>
                 <dot flags='a'/>
                </treat>
                <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
               </slash>
               <vc op='eq' onEmpty='0'>
                <cast flags='ae' as='?AS'>
                 <attVal name='Q{}n'/>
                </cast>
                <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='3'/>
               </vc>
              </filter>
              <axis name='attribute' nodeTest='NA nQ{}decls'/>
             </slash>
            </data>
           </convert>
           <str val=' '/>
          </fn>
         </att>
         <callT line='62' name='Q{}get.part.labels' bSlot='2'>
          <withParam name='Q{}pLayerDef' flags='t' as='1NE nQ{http://www.music-encoding.org/ns/mei}layerDef'>
           <check line='63' card='1' diag='8|0|XTTE0590|pLayerDef'>
            <filter flags='b'>
             <slash simple='1'>
              <treat as='N' diag='14|3|XPTY0020|'>
               <dot flags='a'/>
              </treat>
              <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
             </slash>
             <vc op='eq' onEmpty='0'>
              <cast flags='ae' as='?AS'>
               <attVal name='Q{}n'/>
              </cast>
              <varRef name='Q{http://saxon.sf.net/generated-variable}v1' slot='2'/>
             </vc>
            </filter>
           </check>
          </withParam>
          <withParam name='Q{}pStaffDef' flags='t' as='1NE nQ{http://www.music-encoding.org/ns/mei}staffDef'>
           <treat line='64' as='NE nQ{http://www.music-encoding.org/ns/mei}staffDef' diag='8|0|XTTE0590|pStaffDef'>
            <dot flags='a'/>
           </treat>
          </withParam>
         </callT>
        </sequence>
       </let>
      </let>
     </let>
    </sequence>
   </copy>
  </template>
 </co>
 <co id='57' binds='58'>
  <template name='Q{}calculate.multirest.measures' flags='os' line='262' module='events.xsl' slots='6'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='263'>
    <param name='Q{}pDocNode' slot='0'>
     <str role='select' val=''/>
     <supplied role='conversion' slot='0'/>
    </param>
    <iterate line='270'>
     <docOrder role='select' line='267' intra='0'>
      <filter flags='b'>
       <slash simple='2'>
        <treat as='N' diag='1|0|XPTY0019|/'>
         <varRef name='Q{}pDocNode' slot='0'/>
        </treat>
        <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}measure'/>
       </slash>
       <and op='and'>
        <fn name='exists'>
         <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}mRest'/>
        </fn>
        <fn name='empty'>
         <filter flags='b'>
          <lastOf>
           <fn name='reverse'>
            <axis name='preceding-sibling' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}measure'/>
           </fn>
          </lastOf>
          <fn name='exists'>
           <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}mRest'/>
          </fn>
         </filter>
        </fn>
       </and>
      </filter>
     </docOrder>
     <params role='params' line='271'>
      <param name='Q{}pCounter' slot='1' as='1ADI'>
       <int role='select' val='1'/>
       <treat role='conversion' as='ADI' diag='8|0|XTTE0590|pCounter'>
        <check card='1' diag='8|0|XTTE0590|pCounter'>
         <cvUntyped to='ADI' diag='8|0|XTTE0590|pCounter'>
          <data diag='8|0|XTTE0590|pCounter'>
           <supplied slot='1'/>
          </data>
         </cvUntyped>
        </check>
       </treat>
      </param>
      <param line='272' name='Q{}pMeasuresToDelete' slot='2'>
       <array role='select' size='0'/>
       <supplied role='conversion' slot='2'/>
      </param>
      <param line='273' name='Q{}pMeasuresToConvert' slot='3'>
       <map role='select' size='0'/>
       <supplied role='conversion' slot='3'/>
      </param>
     </params>
     <let role='on-completion' ns='=http://www.mozarteum.at/ns/dme array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='281' var='Q{http://saxon.sf.net/generated-variable}v0' as='1FM' slot='5' flags='l'>
      <treat as='FM' diag='0|0||map:get'>
       <check card='1' diag='0|0||map:get'>
        <varRef name='Q{}pMeasuresToConvert' slot='3'/>
       </check>
      </treat>
      <elem line='276' name='config' nsuri='http://www.mozarteum.at/ns/dme' flags='d'>
       <sequence line='277'>
        <elem name='measuresToDelete' nsuri='http://www.mozarteum.at/ns/dme' flags='dl'>
         <valueOf line='278' flags='l'>
          <fn name='string-join'>
           <convert from='A' to='AS'>
            <data>
             <mergeAdj>
              <varRef name='Q{}pMeasuresToDelete' slot='2'/>
             </mergeAdj>
            </data>
           </convert>
           <str val=' '/>
          </fn>
         </valueOf>
        </elem>
        <forEach line='280'>
         <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}keys' type='*A'>
          <treat as='FM' diag='0|0||map:keys'>
           <check card='1' diag='0|0||map:keys'>
            <varRef name='Q{}pMeasuresToConvert' slot='3'/>
           </check>
          </treat>
         </ifCall>
         <elem line='281' name='measuresToConvert' nsuri='http://www.mozarteum.at/ns/dme' flags='dl'>
          <sequence>
           <att name='count' flags='l'>
            <fn name='string-join'>
             <convert from='A' to='AS'>
              <data>
               <mergeAdj>
                <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}get' type='*'>
                 <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='5'/>
                 <dot type='1A'/>
                </ifCall>
               </mergeAdj>
              </data>
             </convert>
             <str val=' '/>
            </fn>
           </att>
           <att name='id' flags='l'>
            <convert from='A' to='AS'>
             <dot type='1A'/>
            </convert>
           </att>
          </sequence>
         </elem>
        </forEach>
       </sequence>
      </elem>
     </let>
     <let role='action' line='287' var='Q{}mrestsCount' as='1NE nQ{http://www.mozarteum.at/ns/dme}measure' slot='4'>
      <treat line='288' as='NE nQ{http://www.mozarteum.at/ns/dme}measure' diag='3|0|XTTE0570|mrestsCount'>
       <check card='1' diag='3|0|XTTE0570|mrestsCount'>
        <callT name='Q{}mrests.count' bSlot='0'/>
       </check>
      </treat>
      <choose line='293'>
       <gc op='&gt;' card='1:1' comp='QUNC'>
        <slash>
         <varRef name='Q{}mrestsCount' slot='4'/>
         <attVal name='Q{}count'/>
        </slash>
        <int val='4'/>
       </gc>
       <nextIteration line='295'>
        <withParam name='Q{}pCounter' as='1ADI' slot='1'>
         <arith op='+' calc='i+i'>
          <varRef name='Q{}pCounter' slot='1'/>
          <int val='1'/>
         </arith>
        </withParam>
        <withParam name='Q{}pMeasuresToDelete' as='1FA' slot='2'>
         <ifCall line='296' name='Q{http://www.w3.org/2005/xpath-functions/array}append' type='1FA'>
          <treat as='FA' diag='0|0||array:append'>
           <check card='1' diag='0|0||array:append'>
            <varRef name='Q{}pMeasuresToDelete' slot='2'/>
           </check>
          </treat>
          <slash simple='1'>
           <varRef name='Q{}mrestsCount' slot='4'/>
           <axis name='attribute' nodeTest='NA nQ{}ids'/>
          </slash>
         </ifCall>
        </withParam>
        <withParam name='Q{}pMeasuresToConvert' as='1FM' slot='3'>
         <ifCall line='297' name='Q{http://www.w3.org/2005/xpath-functions/map}put' type='1FM'>
          <treat as='FM' diag='0|0||map:put'>
           <check card='1' diag='0|0||map:put'>
            <varRef name='Q{}pMeasuresToConvert' slot='3'/>
           </check>
          </treat>
          <atomSing diag='0|1||map:put'>
           <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
          </atomSing>
          <slash simple='1'>
           <varRef name='Q{}mrestsCount' slot='4'/>
           <axis name='attribute' nodeTest='NA nQ{}count'/>
          </slash>
         </ifCall>
        </withParam>
       </nextIteration>
       <true/>
       <nextIteration line='302'>
        <withParam name='Q{}pCounter' as='1ADI' slot='1'>
         <arith op='+' calc='i+i'>
          <varRef name='Q{}pCounter' slot='1'/>
          <int val='1'/>
         </arith>
        </withParam>
        <withParam name='Q{}pMeasuresToDelete' slot='2'>
         <varRef line='303' name='Q{}pMeasuresToDelete' slot='2'/>
        </withParam>
        <withParam name='Q{}pMeasuresToConvert' slot='3'>
         <varRef line='304' name='Q{}pMeasuresToConvert' slot='3'/>
        </withParam>
       </nextIteration>
      </choose>
     </let>
    </iterate>
   </sequence>
  </template>
 </co>
 <co id='50' binds='59'>
  <globalParam name='Q{}P_USER_PARAMETERS' as='*' line='16' module='main.xsl' visibility='PUBLIC'>
   <doc defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='17'>
    <callT name='Q{}configXml' bSlot='0'/>
   </doc>
  </globalParam>
 </co>
 <co id='60' binds=''>
  <globalParam name='Q{}P_LANGUAGE' as='1AS' line='19' module='main.xsl' visibility='PUBLIC'>
   <str val='IT'/>
  </globalParam>
 </co>
 <co id='61' binds=''>
  <function name='Q{http://www.functx.com}if-empty' line='1238' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*' slots='2'>
   <arg name='Q{}arg' as='?'/>
   <arg name='Q{}value' as='*'/>
   <choose role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1246'>
    <fn name='string'>
     <varRef name='Q{}arg' slot='0'/>
    </fn>
    <data>
     <varRef name='Q{}arg' slot='0'/>
    </data>
    <true/>
    <varRef name='Q{}value' slot='1'/>
   </choose>
  </function>
 </co>
 <co id='62' binds=''>
  <function name='Q{http://www.functx.com}repeat-string' line='2517' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AS' slots='3'>
   <arg name='Q{}stringToRepeat' as='?AS'/>
   <arg name='Q{}count' as='1ADI'/>
   <fn role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2524' name='string-join'>
    <for var='Q{}i' as='ADI' slot='2'>
     <to role='in'>
      <int val='1'/>
      <varRef name='Q{}count' slot='1'/>
     </to>
     <varRef role='return' name='Q{}stringToRepeat' slot='0'/>
    </for>
    <str val=''/>
   </fn>
  </function>
 </co>
 <co id='63' binds=''>
  <globalVariable name='Q{}ATTRIBUTES_TO_DELETE' as='+AS' line='4' module='events.xsl' visibility='PRIVATE'>
   <literal count='4'>
    <str val='stem.dir'/>
    <str val='stem.sameas'/>
    <str val='ploc'/>
    <str val='oloc'/>
   </literal>
  </globalVariable>
 </co>
 <co id='5' binds='19'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg1559972335' as='1AB' line='100' module='main.xsl' visibility='PRIVATE'>
   <fn defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='100' name='exists'>
    <filter flags='b'>
     <slash simple='1'>
      <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
      <axis name='attribute' nodeTest='NA nQ{}allPartsRequested'/>
     </slash>
     <compareToString op='eq' val='yes'>
      <cast flags='a' as='1AS'>
       <data diag='1|0||='>
        <dot type='1NA nQ{}allPartsRequested'/>
       </data>
      </cast>
     </compareToString>
    </filter>
   </fn>
  </globalVariable>
 </co>
 <co id='64' binds='1 1 64'>
  <function name='Q{http://www.functx.com}dynamic-path' line='902' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*' slots='6'>
   <arg name='Q{}parent' as='1N'/>
   <arg name='Q{}path' as='1AS'/>
   <let role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='907' var='Q{}nextStep' slot='2'>
    <choose line='3009'>
     <fn name='contains'>
      <varRef line='907' name='Q{}path' slot='1'/>
      <str val='/'/>
     </fn>
     <fn name='substring-before'>
      <varRef line='907' name='Q{}path' slot='1'/>
      <str val='/'/>
     </fn>
     <true/>
     <varRef line='907' name='Q{}path' slot='1'/>
    </choose>
    <let line='913' var='Q{http://saxon.sf.net/generated-variable}v0' as='1AS' slot='3' flags='l'>
     <fn name='substring-after'>
      <varRef name='Q{}nextStep' slot='2'/>
      <str val='@'/>
     </fn>
     <let line='909' var='Q{}restOfSteps' as='1AS' slot='4'>
      <fn name='substring-after'>
       <varRef name='Q{}path' slot='1'/>
       <str val='/'/>
      </fn>
      <forEach line='913'>
       <sequence>
        <filter flags='b'>
         <slash simple='1'>
          <varRef name='Q{}parent' slot='0'/>
          <axis name='child' nodeTest='NE'/>
         </slash>
         <ufCall name='Q{http://www.functx.com}name-test' tailCall='false' bSlot='0'>
          <fn name='name'>
           <dot type='1NE'/>
          </fn>
          <varRef name='Q{}nextStep' slot='2'/>
         </ufCall>
        </filter>
        <filter flags='b'>
         <slash simple='1'>
          <varRef name='Q{}parent' slot='0'/>
          <axis name='attribute' nodeTest='NA'/>
         </slash>
         <ufCall name='Q{http://www.functx.com}name-test' tailCall='false' bSlot='1'>
          <fn name='name'>
           <dot type='1NA'/>
          </fn>
          <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='3'/>
         </ufCall>
        </filter>
       </sequence>
       <let line='914' var='Q{}child' as='1' slot='5'>
        <dot type='1N'/>
        <choose line='917'>
         <varRef name='Q{}restOfSteps' slot='4'/>
         <ufCall name='Q{http://www.functx.com}dynamic-path' tailCall='false' bSlot='2'>
          <varRef name='Q{}child' slot='5'/>
          <varRef name='Q{}restOfSteps' slot='4'/>
         </ufCall>
         <true/>
         <varRef name='Q{}child' slot='5'/>
        </choose>
       </let>
      </forEach>
     </let>
    </let>
   </let>
  </function>
 </co>
 <co id='65' binds=''>
  <function name='Q{http://www.functx.com}atomic-type' line='170' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*AS' slots='2'>
   <arg name='Q{}values' as='*A'/>
   <for role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='201' var='Q{}val' as='A' slot='1'>
    <varRef role='in' name='Q{}values' slot='0'/>
    <choose role='return'>
     <instance of='1AZ'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:untypedAtomic'/>
     <instance of='1AU'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:anyURI'/>
     <instance of='1AS'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:string'/>
     <instance of='1AQ'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:QName'/>
     <instance of='1AB'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:boolean'/>
     <instance of='1A2'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:base64Binary'/>
     <instance of='1AX'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:hexBinary'/>
     <instance of='1ADI'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:integer'/>
     <instance of='1AD'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:decimal'/>
     <instance of='1AF'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:float'/>
     <instance of='1AO'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:double'/>
     <instance of='1AA'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:date'/>
     <instance of='1AT'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:time'/>
     <instance of='1AM'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:dateTime'/>
     <instance of='1ARD'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:dayTimeDuration'/>
     <instance of='1ARY'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:yearMonthDuration'/>
     <instance of='1AR'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:duration'/>
     <instance of='1AI'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:gMonth'/>
     <instance of='1AG'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:gYear'/>
     <instance of='1AH'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:gYearMonth'/>
     <instance of='1AK'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:gDay'/>
     <instance of='1AJ'>
      <varRef name='Q{}val' slot='1'/>
     </instance>
     <str val='xs:gMonthDay'/>
     <true/>
     <str val='unknown'/>
    </choose>
   </for>
  </function>
 </co>
 <co id='66' binds=''>
  <function name='Q{http://www.functx.com}is-node-in-sequence' line='1594' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AB' slots='3'>
   <arg name='Q{}node' as='?N'/>
   <arg name='Q{}seq' as='*N'/>
   <some role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1600' var='Q{}nodeInSeq' slot='2'>
    <varRef name='Q{}seq' slot='1'/>
    <is op='is'>
     <varRef name='Q{}nodeInSeq' slot='2'/>
     <varRef name='Q{}node' slot='0'/>
    </is>
   </some>
  </function>
 </co>
 <co id='37' binds='25'>
  <globalVariable name='Q{}NEW_STAVES_NUMBERING' as='1FM k[ADI] v[1ADI]' line='54' module='main.xsl' visibility='PRIVATE'>
   <callT defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='55' name='Q{}new.staves.numbering' bSlot='0'/>
  </globalVariable>
 </co>
 <co id='19' binds='21'>
  <globalVariable name='Q{}REQUESTED_PARTS' as='1NE nQ{http://www.mozarteum.at/ns/dme}parts' line='47' module='main.xsl' visibility='PRIVATE'>
   <treat defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='48' as='NE nQ{http://www.mozarteum.at/ns/dme}parts' diag='3|0|XTTE0570|REQUESTED_PARTS'>
    <check card='1' diag='3|0|XTTE0570|REQUESTED_PARTS'>
     <callT name='Q{}enhance.requested.parts' bSlot='0'/>
    </check>
   </treat>
  </globalVariable>
 </co>
 <co id='67' binds=''>
  <function name='Q{http://www.functx.com}is-value-in-sequence' line='1615' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AB' slots='2'>
   <arg name='Q{}value' as='?A'/>
   <arg name='Q{}seq' as='*A'/>
   <fn role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1621' name='exists'>
    <indexedFilter2 comp='GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint' flags='u'>
     <varRef role='base' name='Q{}seq' slot='1'/>
     <dot role='use' type='1A'/>
     <varRef role='search' name='Q{}value' slot='0'/>
    </indexedFilter2>
   </fn>
  </function>
 </co>
 <co id='68' binds=''>
  <function name='Q{http://www.functx.com}escape-for-regex' line='932' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AS' slots='1'>
   <arg name='Q{}arg' as='?AS'/>
   <fn role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='938' name='replace'>
    <varRef name='Q{}arg' slot='0'/>
    <str val='(\.|\[|\]|\\|\||\-|\^|\$|\?|\*|\+|\{|\}|\(|\))'/>
    <str val='\\$1'/>
    <str val=''/>
   </fn>
  </function>
 </co>
 <co id='56' binds='11 43 69 3 60 60'>
  <template name='Q{}get.part.labels' flags='os' line='172' module='scoreDef.xsl' slots='10'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='173'>
    <param name='Q{}pLayerDef' slot='0' flags='t'>
     <str role='select' val=''/>
     <supplied role='conversion' slot='0'/>
    </param>
    <param line='174' name='Q{}pStaffDef' slot='1' flags='ti' as='1NE nQ{http://www.music-encoding.org/ns/mei}staffDef'>
     <treat role='conversion' as='NE nQ{http://www.music-encoding.org/ns/mei}staffDef' diag='8|0|XTTE0590|pStaffDef'>
      <check card='1' diag='8|0|XTTE0590|pStaffDef'>
       <supplied slot='1'/>
      </check>
     </treat>
    </param>
    <param line='175' name='Q{}pNewStaffDefNumber' slot='2' as='?ADI'>
     <empty role='select'/>
     <treat role='conversion' as='ADI' diag='8|0|XTTE0590|pNewStaffDefNumber'>
      <check card='?' diag='8|0|XTTE0590|pNewStaffDefNumber'>
       <cvUntyped to='ADI' diag='8|0|XTTE0590|pNewStaffDefNumber'>
        <data diag='8|0|XTTE0590|pNewStaffDefNumber'>
         <supplied slot='2'/>
        </data>
       </cvUntyped>
      </check>
     </treat>
    </param>
    <let line='180' var='Q{}itemPerfRes' as='1NE' slot='3'>
     <let var='Q{}perfResId' slot='4'>
      <fn name='substring-after'>
       <check card='?' diag='0|0||fn:substring-after'>
        <cvUntyped to='AS' diag='0|0||fn:substring-after'>
         <data diag='0|0||fn:substring-after'>
          <conditionalSort>
           <fn name='exists'>
            <tail start='2'>
             <treat as='N' diag='1|0|XPTY0019|/'>
              <varRef name='Q{}pLayerDef' slot='0'/>
             </treat>
            </tail>
           </fn>
           <docOrder intra='0'>
            <slash simple='2'>
             <treat as='N' diag='1|0|XPTY0019|/'>
              <varRef name='Q{}pLayerDef' slot='0'/>
             </treat>
             <axis name='attribute' nodeTest='NA nQ{}decls'/>
            </slash>
           </docOrder>
          </conditionalSort>
         </data>
        </cvUntyped>
       </check>
       <str val='#'/>
      </fn>
      <check card='1' diag='3|0|XTTE0570|itemPerfRes'>
       <slash>
        <gVarRef name='Q{}P_GLOBAL_CONTEXT_ITEM' bSlot='0'/>
        <fn name='id'>
         <varRef name='Q{}perfResId' slot='4'/>
        </fn>
       </slash>
      </check>
     </let>
     <let line='181' var='Q{}instrumentNamePerfRes' as='1AS' slot='5'>
      <fn name='normalize-space'>
       <check card='?' diag='0|0||fn:normalize-space'>
        <cvUntyped to='AS' diag='0|0||fn:normalize-space'>
         <data diag='0|0||fn:normalize-space'>
          <slash simple='1'>
           <varRef name='Q{}itemPerfRes' slot='3'/>
           <axis name='child' nodeTest='NT'/>
          </slash>
         </data>
        </cvUntyped>
       </check>
      </fn>
      <let line='184' var='Q{}itemInstrumentsList' as='?NE' slot='6'>
       <check card='?' diag='3|0|XTTE0570|itemInstrumentsList'>
        <slash>
         <fn line='182' name='doc'>
          <fn name='concat'>
           <data diag='0|0||fn:concat'>
            <gVarRef name='Q{}P_LIB_PATH' bSlot='1'/>
           </data>
           <str val='/lists/instruments.xml'/>
          </fn>
         </fn>
         <fn name='id'>
          <varRef name='Q{}instrumentNamePerfRes' slot='5'/>
         </fn>
        </slash>
       </check>
       <let line='188' var='Q{}transposition' as='?FM k[AS]' slot='7'>
        <treat line='189' as='FM k[AS]' diag='3|0|XTTE0570|transposition'>
         <check card='?' diag='3|0|XTTE0570|transposition'>
          <callT name='Q{}get.instruments.transposition' bSlot='2'>
           <withParam name='Q{}itemPerfRes' flags='c' as='1NE'>
            <varRef line='190' name='Q{}itemPerfRes' slot='3'/>
           </withParam>
           <withParam name='Q{}itemInstrumentsList' flags='c' as='?NE'>
            <varRef line='191' name='Q{}itemInstrumentsList' slot='6'/>
           </withParam>
          </callT>
         </check>
        </treat>
        <let line='195' var='Q{}romanInteger' as='1AS' slot='8'>
         <treat line='196' as='AS' diag='3|0|XTTE0570|romanInteger'>
          <check card='1' diag='3|0|XTTE0570|romanInteger'>
           <cvUntyped to='AS' diag='3|0|XTTE0570|romanInteger'>
            <data diag='3|0|XTTE0570|romanInteger'>
             <callT name='Q{}roman.integer' bSlot='3'/>
            </data>
           </cvUntyped>
          </check>
         </treat>
         <let line='199' var='Q{}newIdSuffix' as='1AS' slot='9'>
          <choose line='201'>
           <instance of='1ADI'>
            <varRef name='Q{}pNewStaffDefNumber' slot='2'/>
           </instance>
           <cvUntyped line='202' to='AS' diag='3|0|XTTE0570|newIdSuffix'>
            <cast flags='a' as='1AZ'>
             <fn name='concat'>
              <str val='_'/>
              <varRef name='Q{}pNewStaffDefNumber' slot='2'/>
             </fn>
            </cast>
           </cvUntyped>
           <true/>
           <str val=''/>
          </choose>
          <sequence ns='=http://www.music-encoding.org/ns/mei array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='210'>
           <elem name='label' nsuri='http://www.music-encoding.org/ns/mei' flags='d'>
            <sequence line='211'>
             <att name='xml:id' nsuri='http://www.w3.org/XML/1998/namespace' flags='l'>
              <fn name='normalize-space'>
               <fn name='concat'>
                <data diag='0|0||fn:concat'>
                 <slash simple='2'>
                  <slash simple='1'>
                   <varRef name='Q{}pStaffDef' slot='1'/>
                   <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}label'/>
                  </slash>
                  <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                 </slash>
                </data>
                <varRef name='Q{}newIdSuffix' slot='9'/>
               </fn>
              </fn>
             </att>
             <valueOf line='212' flags='l'>
              <fn ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='185' name='concat'>
               <fn name='normalize-space'>
                <check card='?' diag='0|0||fn:normalize-space'>
                 <cvUntyped to='AS' diag='0|0||fn:normalize-space'>
                  <data diag='0|0||fn:normalize-space'>
                   <slash simple='2'>
                    <filter flags='b'>
                     <slash simple='1'>
                      <varRef name='Q{}itemInstrumentsList' slot='6'/>
                      <axis name='child' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}name'/>
                     </slash>
                     <vc op='eq' onEmpty='0'>
                      <cast flags='ae' as='?AS'>
                       <attVal name='Q{http://www.w3.org/XML/1998/namespace}lang'/>
                      </cast>
                      <gVarRef name='Q{}P_LANGUAGE' bSlot='4'/>
                     </vc>
                    </filter>
                    <axis name='child' nodeTest='NT'/>
                   </slash>
                  </data>
                 </cvUntyped>
                </check>
               </fn>
               <varRef ns='=http://www.music-encoding.org/ns/mei array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='212' name='Q{}romanInteger' slot='8'/>
               <data ns='=http://www.music-encoding.org/ns/mei array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='212' diag='0|2||fn:concat'>
                <lookup>
                 <varRef name='Q{}transposition' slot='7'/>
                 <str val='label'/>
                </lookup>
               </data>
              </fn>
             </valueOf>
            </sequence>
           </elem>
           <elem line='215' name='labelAbbr' nsuri='http://www.music-encoding.org/ns/mei' flags='d'>
            <sequence line='216'>
             <att name='xml:id' nsuri='http://www.w3.org/XML/1998/namespace' flags='l'>
              <fn name='normalize-space'>
               <fn name='concat'>
                <data diag='0|0||fn:concat'>
                 <slash simple='2'>
                  <slash simple='1'>
                   <varRef name='Q{}pStaffDef' slot='1'/>
                   <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}labelAbbr'/>
                  </slash>
                  <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                 </slash>
                </data>
                <varRef name='Q{}newIdSuffix' slot='9'/>
               </fn>
              </fn>
             </att>
             <valueOf line='217' flags='l'>
              <fn ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='186' name='concat'>
               <fn name='normalize-space'>
                <check card='?' diag='0|0||fn:normalize-space'>
                 <cvUntyped to='AS' diag='0|0||fn:normalize-space'>
                  <data diag='0|0||fn:normalize-space'>
                   <slash simple='2'>
                    <filter flags='b'>
                     <slash simple='1'>
                      <varRef name='Q{}itemInstrumentsList' slot='6'/>
                      <axis name='child' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}name'/>
                     </slash>
                     <vc op='eq' onEmpty='0'>
                      <cast flags='ae' as='?AS'>
                       <attVal name='Q{http://www.w3.org/XML/1998/namespace}lang'/>
                      </cast>
                      <gVarRef name='Q{}P_LANGUAGE' bSlot='5'/>
                     </vc>
                    </filter>
                    <axis name='attribute' nodeTest='NA nQ{}label.abbr'/>
                   </slash>
                  </data>
                 </cvUntyped>
                </check>
               </fn>
               <data ns='=http://www.music-encoding.org/ns/mei array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='217' diag='0|1||fn:concat'>
                <lookup>
                 <varRef name='Q{}transposition' slot='7'/>
                 <str val='labelAbbr'/>
                </lookup>
               </data>
              </fn>
             </valueOf>
            </sequence>
           </elem>
          </sequence>
         </let>
        </let>
       </let>
      </let>
     </let>
    </let>
   </sequence>
  </template>
 </co>
 <co id='70' binds='47'>
  <template name='Q{}new.staff.number.controlevents' flags='os' line='220' module='controlEvents.xsl' slots='2'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='221'>
    <param name='Q{}pControlEvent' slot='0' flags='i' as='1NE'>
     <treat role='conversion' as='NE' diag='8|0|XTTE0590|pControlEvent'>
      <check card='1' diag='8|0|XTTE0590|pControlEvent'>
       <supplied slot='0'/>
      </check>
     </treat>
    </param>
    <param line='222' name='Q{}pCurrentLayerN' slot='1' as='?ADI'>
     <empty role='select'/>
     <treat role='conversion' as='ADI' diag='8|0|XTTE0590|pCurrentLayerN'>
      <check card='?' diag='8|0|XTTE0590|pCurrentLayerN'>
       <cvUntyped to='ADI' diag='8|0|XTTE0590|pCurrentLayerN'>
        <data diag='8|0|XTTE0590|pCurrentLayerN'>
         <supplied slot='1'/>
        </data>
       </cvUntyped>
      </check>
     </treat>
    </param>
    <choose line='225'>
     <fn name='exists'>
      <filter flags='b'>
       <varRef name='Q{}pControlEvent' slot='0'/>
       <vc op='eq' onEmpty='0'>
        <cast flags='ae' as='?AS'>
         <attVal name='Q{}part'/>
        </cast>
        <str val='%all'/>
       </vc>
      </filter>
     </fn>
     <choose line='227'>
      <or op='or'>
       <gcEE op='=' card='N:1' comp='CCC'>
        <literal count='2'>
         <str val='dir'/>
         <str val='tempo'/>
        </literal>
        <slash>
         <varRef name='Q{}pControlEvent' slot='0'/>
         <fn name='local-name'>
          <dot type='1NE'/>
         </fn>
        </slash>
       </gcEE>
       <and op='and'>
        <compareToString op='eq' val='fermata'>
         <slash>
          <varRef name='Q{}pControlEvent' slot='0'/>
          <fn name='local-name'>
           <dot type='1NE'/>
          </fn>
         </slash>
        </compareToString>
        <fn name='exists'>
         <filter flags='b'>
          <slash simple='1'>
           <varRef name='Q{}pControlEvent' slot='0'/>
           <axis name='attribute' nodeTest='NA nQ{}place'/>
          </slash>
          <compareToString op='eq' val='above'>
           <cast flags='a' as='1AS'>
            <data diag='1|0||='>
             <dot type='1NA nQ{}place'/>
            </data>
           </cast>
          </compareToString>
         </filter>
        </fn>
       </and>
      </or>
      <cast line='228' flags='ae' as='?ADI'>
       <fn name='min'>
        <data diag='0|0||fn:min'>
         <slash simple='2'>
          <docOrder intra='1'>
           <slash simple='2'>
            <slash>
             <varRef name='Q{}pControlEvent' slot='0'/>
             <fn name='reverse'>
              <axis name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}measure'/>
             </fn>
            </slash>
            <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staff'/>
           </slash>
          </docOrder>
          <axis name='attribute' nodeTest='NA nQ{}n'/>
         </slash>
        </data>
       </fn>
      </cast>
      <and line='230' op='and'>
       <compareToString op='eq' val='fermata'>
        <slash>
         <varRef name='Q{}pControlEvent' slot='0'/>
         <fn name='local-name'>
          <dot type='1NE'/>
         </fn>
        </slash>
       </compareToString>
       <fn name='exists'>
        <filter flags='b'>
         <slash simple='1'>
          <varRef name='Q{}pControlEvent' slot='0'/>
          <axis name='attribute' nodeTest='NA nQ{}place'/>
         </slash>
         <compareToString op='eq' val='below'>
          <cast flags='a' as='1AS'>
           <data diag='1|0||='>
            <dot type='1NA nQ{}place'/>
           </data>
          </cast>
         </compareToString>
        </filter>
       </fn>
      </and>
      <cast line='231' flags='ae' as='?ADI'>
       <fn name='max'>
        <data diag='0|0||fn:max'>
         <slash simple='2'>
          <docOrder intra='1'>
           <slash simple='2'>
            <slash>
             <varRef name='Q{}pControlEvent' slot='0'/>
             <fn name='reverse'>
              <axis name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}measure'/>
             </fn>
            </slash>
            <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staff'/>
           </slash>
          </docOrder>
          <axis name='attribute' nodeTest='NA nQ{}n'/>
         </slash>
        </data>
       </fn>
      </cast>
     </choose>
     <true/>
     <callT line='236' name='Q{}get.new.staff.number' bSlot='0' flags='t'>
      <withParam name='Q{}staffN' flags='c' as='1ADI'>
       <check line='237' card='1' diag='8|0|XTTE0590|staffN'>
        <cvUntyped to='ADI' diag='8|0|XTTE0590|staffN'>
         <slash>
          <varRef name='Q{}pControlEvent' slot='0'/>
          <attVal name='Q{}staff'/>
         </slash>
        </cvUntyped>
       </check>
      </withParam>
      <withParam name='Q{}layerN' flags='c' as='?ADI'>
       <varRef line='238' name='Q{}pCurrentLayerN' slot='1'/>
      </withParam>
     </callT>
    </choose>
   </sequence>
  </template>
 </co>
 <co id='36' binds='45 19'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg1768065241' as='1AB' line='113' module='scoreDef.xsl' visibility='PRIVATE'>
   <or defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='113' op='or'>
    <gcEE op='=' card='N:1' comp='CCC'>
     <data diag='1|0||='>
      <slash simple='1'>
       <gVarRef name='Q{}USER_PARAMETERS' bSlot='0'/>
       <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}renumberStaves'/>
      </slash>
     </data>
     <str val='yes'/>
    </gcEE>
    <fn name='exists'>
     <slash simple='2'>
      <slash simple='1'>
       <gVarRef name='Q{}REQUESTED_PARTS' bSlot='1'/>
       <axis name='descendant-or-self' nodeTest='NE'/>
      </slash>
      <axis name='attribute' nodeTest='NA nQ{}split'/>
     </slash>
    </fn>
   </or>
  </globalVariable>
 </co>
 <co id='71' binds='19 72'>
  <globalVariable name='Q{}SHRINK_MEASURES' as='1AB' line='69' module='main.xsl' slots='1' visibility='PRIVATE'>
   <and defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='71' op='and'>
    <compareToInt line='70' op='eq' val='1'>
     <fn name='count'>
      <fn name='subsequence'>
       <filter flags='b'>
        <slash simple='2'>
         <slash simple='1'>
          <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
          <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
         </slash>
         <axis name='attribute' nodeTest='NA nQ{}available'/>
        </slash>
        <compareToString op='eq' val='yes'>
         <cast flags='a' as='1AS'>
          <data diag='1|0||='>
           <dot type='1NA nQ{}available'/>
          </data>
         </cast>
        </compareToString>
       </filter>
       <int val='1'/>
       <int val='2'/>
      </fn>
     </fn>
    </compareToInt>
    <gVarRef name='Q{}P_SHRINK_MEASURES' bSlot='1'/>
   </and>
  </globalVariable>
 </co>
 <co id='8' binds=''>
  <globalParam name='Q{}P_XSPEC_TEST' as='1AB' line='23' module='main.xsl' visibility='PUBLIC'>
   <false/>
  </globalParam>
 </co>
 <co id='6' binds='19'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg1943747471' as='1AB' line='103' module='main.xsl' visibility='PRIVATE'>
   <fn defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='103' name='exists'>
    <filter flags='b'>
     <slash simple='2'>
      <slash simple='1'>
       <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
       <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
      </slash>
      <axis name='attribute' nodeTest='NA nQ{}available'/>
     </slash>
     <compareToString op='eq' val='yes'>
      <cast flags='a' as='1AS'>
       <data diag='1|0||='>
        <dot type='1NA nQ{}available'/>
       </data>
      </cast>
     </compareToString>
    </filter>
   </fn>
  </globalVariable>
 </co>
 <co id='59' binds='42'>
  <template name='Q{}configXml' flags='os' as='1NE nQ{http://www.mozarteum.at/ns/dme}parameters' line='77' module='global.xsl' slots='0'>
   <check role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='78' card='1' diag='7|0|XTTE0505|configXml'>
    <slash simple='1'>
     <fn name='doc'>
      <convert from='AU' to='AS' diag='0|0||fn:doc'>
       <gVarRef name='Q{}CONFIG_PATH' bSlot='0'/>
      </convert>
     </fn>
     <axis name='child' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}parameters'/>
    </slash>
   </check>
  </template>
 </co>
 <co id='27' binds='73'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg2081739790' as='*NE nQ{http://www.music-encoding.org/ns/mei}staffDef' line='196' module='global.xsl' visibility='PRIVATE' flags='x'>
   <slash defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='196' simple='1'>
    <gVarRef name='Q{}SCORE_DEF' bSlot='0'/>
    <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staffDef'/>
   </slash>
  </globalVariable>
 </co>
 <co id='74' binds='39 39 39'>
  <function name='Q{http://www.functx.com}time' line='3092' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AT' slots='3'>
   <arg name='Q{}hour' as='1A'/>
   <arg name='Q{}minute' as='1A'/>
   <arg name='Q{}second' as='1A'/>
   <cast role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='3103' flags='a' as='1AT'>
    <fn name='concat'>
     <sequence>
      <ufCall name='Q{http://www.functx.com}pad-integer-to-length' tailCall='false' bSlot='0'>
       <cast flags='a' as='1ADI'>
        <varRef name='Q{}hour' slot='0'/>
       </cast>
       <int val='2'/>
      </ufCall>
      <str val=':'/>
      <ufCall name='Q{http://www.functx.com}pad-integer-to-length' tailCall='false' bSlot='1'>
       <cast flags='a' as='1ADI'>
        <varRef name='Q{}minute' slot='1'/>
       </cast>
       <int val='2'/>
      </ufCall>
      <str val=':'/>
      <ufCall name='Q{http://www.functx.com}pad-integer-to-length' tailCall='false' bSlot='2'>
       <cast flags='a' as='1ADI'>
        <varRef name='Q{}second' slot='2'/>
       </cast>
       <int val='2'/>
      </ufCall>
     </sequence>
    </fn>
   </cast>
  </function>
 </co>
 <co id='69' binds='60'>
  <template name='Q{}get.instruments.transposition' flags='os' line='222' module='scoreDef.xsl' slots='5'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='223'>
    <param name='Q{}itemPerfRes' slot='0' flags='i' as='1NE'>
     <treat role='conversion' as='NE' diag='8|0|XTTE0590|itemPerfRes'>
      <check card='1' diag='8|0|XTTE0590|itemPerfRes'>
       <supplied slot='0'/>
      </check>
     </treat>
    </param>
    <param line='224' name='Q{}itemInstrumentsList' slot='1' as='?NE'>
     <empty role='select'/>
     <treat role='conversion' as='NE' diag='8|0|XTTE0590|itemInstrumentsList'>
      <check card='?' diag='8|0|XTTE0590|itemInstrumentsList'>
       <supplied slot='1'/>
      </check>
     </treat>
    </param>
    <choose line='227'>
     <fn name='exists'>
      <filter flags='b'>
       <varRef name='Q{}itemPerfRes' slot='0'/>
       <and op='and'>
        <fn name='exists'>
         <axis name='attribute' nodeTest='NA nQ{}trans.diat'/>
        </fn>
        <fn name='exists'>
         <axis name='attribute' nodeTest='NA nQ{}trans.semi'/>
        </fn>
       </and>
      </filter>
     </fn>
     <let line='228' var='Q{http://saxon.sf.net/generated-variable}v1' as='?AS' slot='2' flags='l'>
      <cast flags='ae' as='?AS'>
       <slash>
        <varRef name='Q{}itemPerfRes' slot='0'/>
        <attVal name='Q{}trans.diat'/>
       </slash>
      </cast>
      <let var='Q{http://saxon.sf.net/generated-variable}v0' as='?AS' slot='3' flags='l'>
       <cast flags='ae' as='?AS'>
        <slash>
         <varRef name='Q{}itemPerfRes' slot='0'/>
         <attVal name='Q{}trans.semi'/>
        </slash>
       </cast>
       <let line='230' var='Q{}transpositionLabel' as='1NE nQ{http://www.mozarteum.at/ns/dme}label' slot='4'>
        <check card='1' diag='3|0|XTTE0570|transpositionLabel'>
         <filter line='228' flags='b'>
          <slash simple='1'>
           <check card='1' diag='3|0|XTTE0570|itemTransposition'>
            <filter flags='b'>
             <slash simple='1'>
              <varRef name='Q{}itemInstrumentsList' slot='1'/>
              <axis name='child' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}transposition'/>
             </slash>
             <and op='and'>
              <vc op='eq' onEmpty='0'>
               <cast flags='ae' as='?AS'>
                <attVal name='Q{}trans.semi'/>
               </cast>
               <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='3'/>
              </vc>
              <vc op='eq' onEmpty='0'>
               <cast flags='ae' as='?AS'>
                <attVal name='Q{}trans.diat'/>
               </cast>
               <varRef name='Q{http://saxon.sf.net/generated-variable}v1' slot='2'/>
              </vc>
             </and>
            </filter>
           </check>
           <axis line='230' name='child' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}label'/>
          </slash>
          <vc line='230' op='eq' onEmpty='0'>
           <cast flags='ae' as='?AS'>
            <attVal name='Q{http://www.w3.org/XML/1998/namespace}lang'/>
           </cast>
           <gVarRef name='Q{}P_LANGUAGE' bSlot='0'/>
          </vc>
         </filter>
        </check>
        <ifCall line='242' name='Q{http://www.w3.org/2005/xpath-functions/map}merge' type='1FM'>
         <sequence>
          <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}entry' type='1FM'>
           <str val='label'/>
           <fn name='concat'>
            <str val=' '/>
            <fn name='normalize-space'>
             <check card='?' diag='0|0||fn:normalize-space'>
              <cvUntyped to='AS' diag='0|0||fn:normalize-space'>
               <data diag='0|0||fn:normalize-space'>
                <slash simple='1'>
                 <varRef name='Q{}transpositionLabel' slot='4'/>
                 <axis name='child' nodeTest='NT'/>
                </slash>
               </data>
              </cvUntyped>
             </check>
            </fn>
           </fn>
          </ifCall>
          <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}entry' type='1FM'>
           <str val='labelAbbr'/>
           <fn name='concat'>
            <str val=' '/>
            <slash>
             <varRef name='Q{}transpositionLabel' slot='4'/>
             <attVal name='Q{}label.abbr'/>
            </slash>
           </fn>
          </ifCall>
         </sequence>
         <map size='2'>
          <str val='duplicates'/>
          <str val='reject'/>
          <str val='duplicates-error-code'/>
          <str val='XQDY0137'/>
         </map>
        </ifCall>
       </let>
      </let>
     </let>
     <true/>
     <map size='0'/>
    </choose>
   </sequence>
  </template>
 </co>
 <co id='75' binds='75'>
  <function name='Q{http://www.functx.com}max-depth' line='1770' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='?ADI' slots='1'>
   <arg name='Q{}root' as='?N'/>
   <choose role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1777'>
    <fn name='exists'>
     <slash simple='1'>
      <varRef name='Q{}root' slot='0'/>
      <axis name='child' nodeTest='NE'/>
     </slash>
    </fn>
    <arith op='+' calc='i+i'>
     <fn name='max'>
      <slash>
       <slash simple='1'>
        <varRef name='Q{}root' slot='0'/>
        <axis name='child' nodeTest='NE'/>
       </slash>
       <ufCall name='Q{http://www.functx.com}max-depth' tailCall='false' bSlot='0'>
        <dot type='1NE'/>
       </ufCall>
      </slash>
     </fn>
     <int val='1'/>
    </arith>
    <true/>
    <int val='1'/>
   </choose>
  </function>
 </co>
 <co id='76' binds='4 47 56'>
  <template name='Q{}split.staffDef' flags='os' line='75' module='scoreDef.xsl' slots='8'>
   <let role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='77' var='Q{}currentStaffDef' as='1NE nQ{http://www.music-encoding.org/ns/mei}staffDef' slot='0'>
    <treat as='NE nQ{http://www.music-encoding.org/ns/mei}staffDef' diag='3|0|XTTE0570|currentStaffDef'>
     <dot flags='a'/>
    </treat>
    <let line='93' var='Q{http://saxon.sf.net/generated-variable}v4' as='?AZ' slot='1' flags='l'>
     <slash>
      <varRef name='Q{}currentStaffDef' slot='0'/>
      <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
     </slash>
     <let line='87' var='Q{http://saxon.sf.net/generated-variable}v3' as='1ADI' slot='2' flags='l'>
      <check card='1' diag='8|0|XTTE0590|staffN'>
       <cast flags='ae' as='?ADI'>
        <slash>
         <varRef name='Q{}currentStaffDef' slot='0'/>
         <attVal name='Q{}n'/>
        </slash>
       </cast>
      </check>
      <let line='83' var='Q{http://saxon.sf.net/generated-variable}v1' as='*NE nQ{http://www.music-encoding.org/ns/mei}layerDef' indexable='true' slot='3' flags='l'>
       <slash simple='1'>
        <varRef name='Q{}currentStaffDef' slot='0'/>
        <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
       </slash>
       <let line='82' var='Q{http://saxon.sf.net/generated-variable}v0' as='*NA' slot='4' flags='l'>
        <slash simple='1'>
         <varRef name='Q{}currentStaffDef' slot='0'/>
         <axis name='attribute' nodeTest='NA'/>
        </slash>
        <iterate line='79'>
         <slash role='select' simple='1'>
          <treat as='N' diag='14|3|XPTY0020|'>
           <dot flags='a'/>
          </treat>
          <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
         </slash>
         <params role='params'/>
         <elem role='action' line='80' name='staffDef' nsuri='http://www.music-encoding.org/ns/mei' flags='d'>
          <sequence line='82'>
           <applyT bSlot='0'>
            <varRef role='select' name='Q{http://saxon.sf.net/generated-variable}v0' slot='4'/>
           </applyT>
           <att line='83' name='decls' flags='l'>
            <fn name='string-join'>
             <convert from='A' to='AS'>
              <let var='Q{http://saxon.sf.net/generated-variable}current177868717' as='1' slot='5'>
               <dot type='1NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
               <let var='Q{http://saxon.sf.net/generated-variable}v2' as='?AS' slot='6' flags='l'>
                <cast flags='ae' as='?AS'>
                 <slash>
                  <varRef name='Q{http://saxon.sf.net/generated-variable}current177868717' slot='5'/>
                  <attVal name='Q{}n'/>
                 </slash>
                </cast>
                <data>
                 <slash simple='2'>
                  <indexedFilter2 comp='CCC'>
                   <varRef role='base' name='Q{http://saxon.sf.net/generated-variable}v1' slot='3'/>
                   <cast role='use' flags='ae' as='?AS'>
                    <attVal name='Q{}n'/>
                   </cast>
                   <varRef role='search' name='Q{http://saxon.sf.net/generated-variable}v2' slot='6'/>
                  </indexedFilter2>
                  <axis name='attribute' nodeTest='NA nQ{}decls'/>
                 </slash>
                </data>
               </let>
              </let>
             </convert>
             <str val=' '/>
            </fn>
           </att>
           <let line='85' var='Q{}newStaffNumber' as='1ADI' slot='7'>
            <callT line='86' name='Q{}get.new.staff.number' bSlot='1'>
             <withParam name='Q{}staffN' flags='c' as='1ADI'>
              <varRef line='87' name='Q{http://saxon.sf.net/generated-variable}v3' slot='2'/>
             </withParam>
             <withParam name='Q{}layerN' flags='c' as='1ADI'>
              <check line='88' card='1' diag='8|0|XTTE0590|layerN'>
               <cast flags='ae' as='?ADI'>
                <attVal name='Q{}n'/>
               </cast>
              </check>
             </withParam>
            </callT>
            <sequence line='92'>
             <att name='n' flags='l'>
              <convert from='ADI' to='AS'>
               <varRef name='Q{}newStaffNumber' slot='7'/>
              </convert>
             </att>
             <att line='93' name='xml:id' nsuri='http://www.w3.org/XML/1998/namespace' flags='l'>
              <fn name='normalize-space'>
               <fn name='concat'>
                <varRef name='Q{http://saxon.sf.net/generated-variable}v4' slot='1'/>
                <str val='_'/>
                <varRef name='Q{}newStaffNumber' slot='7'/>
               </fn>
              </fn>
             </att>
             <callT line='95' name='Q{}get.part.labels' bSlot='2'>
              <withParam name='Q{}pNewStaffDefNumber' flags='c' as='1ADI'>
               <varRef line='98' name='Q{}newStaffNumber' slot='7'/>
              </withParam>
              <withParam name='Q{}pLayerDef' flags='t' as='1NE nQ{http://www.music-encoding.org/ns/mei}layerDef'>
               <dot line='96' type='1NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
              </withParam>
              <withParam name='Q{}pStaffDef' flags='t' as='1NE nQ{http://www.music-encoding.org/ns/mei}staffDef'>
               <varRef line='97' name='Q{}currentStaffDef' slot='0'/>
              </withParam>
             </callT>
            </sequence>
           </let>
          </sequence>
         </elem>
        </iterate>
       </let>
      </let>
     </let>
    </let>
   </let>
  </template>
 </co>
 <co id='77' binds=''>
  <mode name='Q{}m.adjust.staffGrps' onNo='TC' flags='W' patternSlots='0'>
   <templateRule prec='0' prio='0.0' seq='12' rank='1' minImp='0' slots='0' matches='NE nQ{http://www.music-encoding.org/ns/mei}staffGrp' flags='s' line='123' module='scoreDef.xsl'>
    <p.nodeTest role='match' test='NE nQ{http://www.music-encoding.org/ns/mei}staffGrp'/>
    <choose role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='126'>
     <fn name='empty'>
      <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staffDef'/>
     </fn>
     <empty/>
     <and line='135' op='and'>
      <fn name='exists'>
       <axis name='parent' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staffGrp'/>
      </fn>
      <compareToInt op='eq' val='1'>
       <fn name='count'>
        <fn name='subsequence'>
         <slash simple='2'>
          <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staffGrp'/>
          <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staffDef'/>
         </slash>
         <int val='1'/>
         <int val='2'/>
        </fn>
       </fn>
      </compareToInt>
     </and>
     <applyT line='136' flags='cti' bSlot='-1'>
      <axis role='select' name='child' nodeTest='N'/>
     </applyT>
     <compareToInt line='139' op='eq' val='1'>
      <fn name='count'>
       <fn name='subsequence'>
        <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staffDef'/>
        <int val='1'/>
        <int val='2'/>
       </fn>
      </fn>
     </compareToInt>
     <choose line='142'>
      <fn name='exists'>
       <tail start='2'>
        <slash simple='2'>
         <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staffDef'/>
         <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
        </slash>
       </tail>
      </fn>
      <copy line='144' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}staffGrp'>
       <applyT role='content' flags='c' bSlot='-1'>
        <sequence role='select'>
         <axis name='attribute' nodeTest='NA'/>
         <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
        </sequence>
       </applyT>
      </copy>
      <true/>
      <copy line='149' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}staffGrp'>
       <sequence role='content'>
        <att name='symbol' flags='l'>
         <str val='none'/>
        </att>
        <applyT line='150' flags='c' bSlot='-1'>
         <sequence role='select'>
          <axis name='attribute' nodeTest='NA d[NA,NA nQ{}symbol]'/>
          <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
         </sequence>
        </applyT>
       </sequence>
      </copy>
     </choose>
     <true/>
     <copy line='157' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}staffGrp'>
      <applyT role='content' flags='c' bSlot='-1'>
       <sequence role='select'>
        <axis name='attribute' nodeTest='NA'/>
        <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
       </sequence>
      </applyT>
     </copy>
    </choose>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='2' part='1' rank='0' minImp='0' slots='0' matches='NA' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='NA'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='2' rank='0' minImp='0' slots='0' matches='N' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='N u[NP,NE,NC,NT]'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
  </mode>
 </co>
 <co id='78' binds='78'>
  <function name='Q{http://www.functx.com}index-of-string' line='1372' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*ADI' slots='5'>
   <arg name='Q{}arg' as='?AS'/>
   <arg name='Q{}substring' as='1AS'/>
   <choose role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1387'>
    <fn name='contains'>
     <varRef name='Q{}arg' slot='0'/>
     <varRef name='Q{}substring' slot='1'/>
    </fn>
    <let var='Q{http://saxon.sf.net/generated-variable}v1' as='1ADI' slot='2' flags='l'>
     <fn name='string-length'>
      <varRef name='Q{}substring' slot='1'/>
     </fn>
     <let var='Q{http://saxon.sf.net/generated-variable}v0' as='1ADI' slot='3' flags='l'>
      <fn name='string-length'>
       <fn name='substring-before'>
        <varRef name='Q{}arg' slot='0'/>
        <varRef name='Q{}substring' slot='1'/>
       </fn>
      </fn>
      <sequence>
       <arith op='+' calc='i+i'>
        <fn name='string-length'>
         <fn name='substring-before'>
          <varRef name='Q{}arg' slot='0'/>
          <varRef name='Q{}substring' slot='1'/>
         </fn>
        </fn>
        <int val='1'/>
       </arith>
       <for var='Q{}other' as='ADI' slot='4'>
        <ufCall role='in' name='Q{http://www.functx.com}index-of-string' tailCall='false' bSlot='0'>
         <fn name='substring-after'>
          <varRef name='Q{}arg' slot='0'/>
          <varRef name='Q{}substring' slot='1'/>
         </fn>
         <varRef name='Q{}substring' slot='1'/>
        </ufCall>
        <arith role='return' op='+' calc='i+i'>
         <arith op='+' calc='i+i'>
          <varRef name='Q{}other' slot='4'/>
          <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='3'/>
         </arith>
         <varRef name='Q{http://saxon.sf.net/generated-variable}v1' slot='2'/>
        </arith>
       </for>
      </sequence>
     </let>
    </let>
   </choose>
  </function>
 </co>
 <co id='79' binds=''>
  <function name='Q{http://www.functx.com}lines' line='1751' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*AS' slots='1'>
   <arg name='Q{}arg' as='?AS'/>
   <fn role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1756' name='tokenize'>
    <varRef name='Q{}arg' slot='0'/>
    <str val='(\r\n?|\n\r?)'/>
    <str val=''/>
   </fn>
  </function>
 </co>
 <co id='16' binds='19'>
  <globalVariable name='Q{}PARTS_TO_EXTRACT_MSG' as='*AS' line='68' module='main.xsl' slots='3' visibility='PRIVATE'>
   <for defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='68' var='Q{}part' as='NE nQ{http://www.mozarteum.at/ns/dme}part' slot='2'>
    <filter role='in' flags='b'>
     <slash simple='1'>
      <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
      <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
     </slash>
     <fn name='exists'>
      <filter flags='b'>
       <axis name='attribute' nodeTest='NA nQ{}available'/>
       <compareToString op='eq' val='yes'>
        <cast flags='a' as='1AS'>
         <data diag='1|0||='>
          <dot type='1NA nQ{}available'/>
         </data>
        </cast>
       </compareToString>
      </filter>
     </fn>
    </filter>
    <fn role='return' name='concat'>
     <str val='('/>
     <fn name='string-join'>
      <sequence>
       <slash>
        <varRef name='Q{}part' slot='2'/>
        <attVal name='Q{}staff'/>
       </slash>
       <slash>
        <varRef name='Q{}part' slot='2'/>
        <attVal name='Q{}layer'/>
       </slash>
      </sequence>
      <str val='-'/>
     </fn>
     <choose>
      <fn name='exists'>
       <filter flags='b'>
        <varRef name='Q{}part' slot='2'/>
        <vc op='eq' onEmpty='0'>
         <cast flags='ae' as='?AS'>
          <attVal name='Q{}split'/>
         </cast>
         <str val='yes'/>
        </vc>
       </filter>
      </fn>
      <str val='-split'/>
      <true/>
      <str val=''/>
     </choose>
     <str val=')'/>
    </fn>
   </for>
  </globalVariable>
 </co>
 <co id='80' binds='34 41'>
  <template name='Q{}update.pointers' flags='os' line='160' module='controlEvents.xsl' slots='6'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='161'>
    <param name='Q{}pControlEvent' slot='0' flags='i' as='1NE'>
     <treat role='conversion' as='NE' diag='8|0|XTTE0590|pControlEvent'>
      <check card='1' diag='8|0|XTTE0590|pControlEvent'>
       <supplied slot='0'/>
      </check>
     </treat>
    </param>
    <param line='162' name='Q{}newStaffNumber' slot='1' flags='i' as='1ADI'>
     <treat role='conversion' as='ADI' diag='8|0|XTTE0590|newStaffNumber'>
      <check card='1' diag='8|0|XTTE0590|newStaffNumber'>
       <cvUntyped to='ADI' diag='8|0|XTTE0590|newStaffNumber'>
        <data diag='8|0|XTTE0590|newStaffNumber'>
         <supplied slot='1'/>
        </data>
       </cvUntyped>
      </check>
     </treat>
    </param>
    <choose line='164'>
     <fn name='exists'>
      <slash simple='1'>
       <varRef name='Q{}pControlEvent' slot='0'/>
       <axis name='attribute' nodeTest='NA u[NA nQ{}startid,NA nQ{}endid]'/>
      </slash>
     </fn>
     <let line='166' var='Q{}refs' as='*FM k[AS] v[1AS]' slot='2'>
      <treat line='167' as='FM k[AS] v[1AS]' diag='3|0|XTTE0570|refs'>
       <callT name='Q{}get.references' bSlot='0'>
        <withParam name='Q{}pControlEvent' flags='c' as='1NE'>
         <varRef line='168' name='Q{}pControlEvent' slot='0'/>
        </withParam>
        <withParam name='Q{}pNewStaffN' flags='c' as='1ADI'>
         <varRef line='169' name='Q{}newStaffNumber' slot='1'/>
        </withParam>
       </callT>
      </treat>
      <let line='178' var='Q{http://saxon.sf.net/generated-variable}v0' as='1FM k[AS] v[1AS]' slot='3' flags='l'>
       <check card='1' diag='0|0||map:get'>
        <varRef name='Q{}refs' slot='2'/>
       </check>
       <choose line='196'>
        <vc line='192' op='gt' onEmpty='0'>
         <fn name='sum'>
          <check line='176' card='+' diag='3|0|XTTE0570|values'>
           <iterate>
            <ifCall role='select' name='Q{http://www.w3.org/2005/xpath-functions/map}keys' type='*A'>
             <check card='1' diag='0|0||map:keys'>
              <varRef name='Q{}refs' slot='2'/>
             </check>
            </ifCall>
            <params role='params'/>
            <choose role='action' line='178'>
             <fn name='exists'>
              <tail start='2'>
               <fn name='tokenize'>
                <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}get' type='*'>
                 <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='3'/>
                 <dot type='1A'/>
                </ifCall>
                <str val=','/>
                <str val=''/>
               </fn>
              </tail>
             </fn>
             <int val='1'/>
             <true/>
             <int val='0'/>
            </choose>
           </iterate>
          </check>
          <int val='0'/>
         </fn>
         <int val='0'/>
        </vc>
        <message line='198'>
         <sequence role='select'>
          <valueOf>
           <convert from='AZ' to='AS'>
            <slash>
             <varRef name='Q{}pControlEvent' slot='0'/>
             <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
            </slash>
           </convert>
          </valueOf>
          <valueOf>
           <str val=' points to multiple references. No @startid/@endid update perfomed!'/>
          </valueOf>
         </sequence>
         <str role='terminate' val='no'/>
         <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
        </message>
        <and line='200' op='and'>
         <gcEE op='=' card='N:1' comp='CCC'>
          <lookup>
           <varRef name='Q{}refs' slot='2'/>
           <str val='startid'/>
          </lookup>
          <str val=''/>
         </gcEE>
         <compareToString op='eq' val='dynam'>
          <slash>
           <varRef name='Q{}pControlEvent' slot='0'/>
           <fn name='local-name'>
            <dot type='1NE'/>
           </fn>
          </slash>
         </compareToString>
        </and>
        <callT line='201' name='Q{}startid2tstamp' bSlot='1' flags='t'/>
        <true/>
        <let line='206' var='Q{http://saxon.sf.net/generated-variable}v1' as='*NA' indexable='true' slot='4' flags='l'>
         <slash simple='1'>
          <varRef name='Q{}pControlEvent' slot='0'/>
          <axis name='attribute' nodeTest='NA'/>
         </slash>
         <forEach line='204'>
          <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}keys' type='*A'>
           <check card='1' diag='0|0||map:keys'>
            <varRef name='Q{}refs' slot='2'/>
           </check>
          </ifCall>
          <let line='205' var='Q{}key' as='1' slot='5'>
           <dot type='1A'/>
           <choose line='206'>
            <fn name='exists'>
             <indexedFilter2 comp='GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint' flags='u'>
              <varRef role='base' name='Q{http://saxon.sf.net/generated-variable}v1' slot='4'/>
              <fn role='use' name='local-name'>
               <dot type='1NA'/>
              </fn>
              <varRef role='search' name='Q{}key' slot='5'/>
             </indexedFilter2>
            </fn>
            <compAtt line='210'>
             <convert role='name' from='A' to='AS'>
              <dot type='1A'/>
             </convert>
             <fn role='select' name='concat'>
              <str val='#'/>
              <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}get' type='*'>
               <check card='1' diag='0|0||map:get'>
                <varRef name='Q{}refs' slot='2'/>
               </check>
               <dot type='1A'/>
              </ifCall>
             </fn>
            </compAtt>
           </choose>
          </let>
         </forEach>
        </let>
       </choose>
      </let>
     </let>
    </choose>
   </sequence>
  </template>
 </co>
 <co id='81' binds=''>
  <function name='Q{http://www.mozarteum.at/ns/dme}add-mei-attributes' line='69' module='functions_DIME.xsl' flags='pU' as='?NE' slots='4'>
   <arg name='Q{}elements' as='*NE'/>
   <arg name='Q{}attrNames' as='*AQ'/>
   <arg name='Q{}attrValues' as='*A'/>
   <check role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='74' card='?' diag='5|0|XTTE0780|dme:add-mei-attributes#3'>
    <forEach>
     <varRef name='Q{}elements' slot='0'/>
     <copy line='77' flags='cin' sit='1NE'>
      <sequence role='content'>
       <forEach>
        <varRef name='Q{}attrNames' slot='1'/>
        <let line='78' var='Q{}seq' as='1ADI' slot='3'>
         <fn name='position'/>
         <choose line='81'>
          <compareToString op='ne' val='http://www.w3.org/1999/XSL/Transform'>
           <fn name='namespace-uri-from-QName'>
            <dot type='1AQ'/>
           </fn>
          </compareToString>
          <compAtt line='82' flags='l'>
           <convert role='name' from='AQ' to='AS'>
            <dot type='1AQ'/>
           </convert>
           <convert role='namespace' from='AU' to='AS'>
            <fn name='namespace-uri-from-QName'>
             <dot type='1AQ'/>
            </fn>
           </convert>
           <convert role='select' from='A' to='AS'>
            <subscript>
             <varRef name='Q{}attrValues' slot='2'/>
             <varRef name='Q{}seq' slot='3'/>
            </subscript>
           </convert>
          </compAtt>
          <true/>
          <compAtt line='85' flags='l'>
           <convert role='name' from='AQ' to='AS'>
            <dot type='1AQ'/>
           </convert>
           <convert role='select' from='A' to='AS'>
            <subscript>
             <varRef name='Q{}attrValues' slot='2'/>
             <varRef name='Q{}seq' slot='3'/>
            </subscript>
           </convert>
          </compAtt>
         </choose>
        </let>
       </forEach>
       <copyOf line='89' flags='c'>
        <union op='|'>
         <filter flags='b'>
          <axis name='attribute' nodeTest='NA'/>
          <fn name='not'>
           <gcEE op='=' card='N:1' comp='EQC'>
            <varRef name='Q{}attrNames' slot='1'/>
            <fn name='node-name'>
             <dot type='1NA'/>
            </fn>
           </gcEE>
          </fn>
         </filter>
         <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
        </union>
       </copyOf>
      </sequence>
     </copy>
    </forEach>
   </check>
  </function>
 </co>
 <co id='82' binds=''>
  <template name='Q{}copy.element' flags='os' line='33' module='basic.xsl' slots='0'>
   <copy role='body' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='35' flags='cin' sit='1'>
    <applyT role='content' flags='c' bSlot='-1'>
     <slash role='select'>
      <treat as='N' diag='14|2|XPTY0020|'>
       <dot flags='a'/>
      </treat>
      <sequence>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </slash>
    </applyT>
   </copy>
  </template>
 </co>
 <co id='33' binds='83 84 85'>
  <mode name='Q{}layer' onNo='TC' flags='W' patternSlots='0'>
   <templateRule prec='0' prio='0.0' seq='14' rank='1' minImp='0' slots='3' matches='NE nQ{http://www.music-encoding.org/ns/mei}layer' flags='s' line='89' module='events.xsl'>
    <p.nodeTest role='match' test='NE nQ{http://www.music-encoding.org/ns/mei}layer'/>
    <choose role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='91'>
     <fn name='exists'>
      <axis name='attribute' nodeTest='NA nQ{}sameas'/>
     </fn>
     <let line='93' var='Q{}pointedLayer' as='1NE nQ{http://www.music-encoding.org/ns/mei}layer' slot='0'>
      <treat line='94' as='NE nQ{http://www.music-encoding.org/ns/mei}layer' diag='3|0|XTTE0570|pointedLayer'>
       <check card='1' diag='3|0|XTTE0570|pointedLayer'>
        <callT name='Q{}get.sameas.element' bSlot='0'/>
       </check>
      </treat>
      <copyOf line='98' flags='c'>
       <let ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' var='Q{}attrValues' as='*A' slot='1'>
        <data defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' diag='0|2||functx:add-or-update-attributes'>
         <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
        </data>
        <check module='functx-1.0-doc-2007-01.xsl' line='108' card='?' diag='5|0|XTTE0780|functx:add-or-update-attributes#3'>
         <forEach>
          <varRef defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' module='events.xsl' line='98' name='Q{}pointedLayer' slot='0'/>
          <copy line='110' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}layer'>
           <sequence role='content'>
            <forEach>
             <qName pre='xml' uri='http://www.w3.org/XML/1998/namespace' loc='id'/>
             <let line='111' var='Q{}seq' as='1ADI' slot='2'>
              <fn name='position'/>
              <compAtt line='114' flags='l'>
               <convert role='name' from='AQ' to='AS'>
                <dot type='1AQ'/>
               </convert>
               <convert role='namespace' from='AU' to='AS'>
                <fn name='namespace-uri-from-QName'>
                 <dot type='1AQ'/>
                </fn>
               </convert>
               <convert role='select' from='AZ' to='AS'>
                <subscript>
                 <varRef name='Q{}attrValues' slot='1'/>
                 <varRef name='Q{}seq' slot='2'/>
                </subscript>
               </convert>
              </compAtt>
             </let>
            </forEach>
            <copyOf line='116' flags='c'>
             <union op='|'>
              <filter flags='b'>
               <axis name='attribute' nodeTest='NA'/>
               <vc op='ne' onEmpty='1'>
                <fn name='node-name'>
                 <dot type='1NA'/>
                </fn>
                <qName pre='xml' uri='http://www.w3.org/XML/1998/namespace' loc='id'/>
               </vc>
              </filter>
              <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
             </union>
            </copyOf>
           </sequence>
          </copy>
         </forEach>
        </check>
       </let>
      </copyOf>
     </let>
     <fn line='100' name='exists'>
      <axis name='descendant' nodeTest='N'/>
     </fn>
     <copy line='102' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}layer'>
      <sequence role='content'>
       <callT name='Q{}create.first.layer' bSlot='1'/>
       <callT line='103' name='Q{}layer.descendants' bSlot='2'>
        <withParam name='Q{}pElements' flags='c' as='*N'>
         <axis line='104' name='child' nodeTest='N'/>
        </withParam>
       </callT>
      </sequence>
     </copy>
    </choose>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='3' part='1' rank='0' minImp='0' slots='0' matches='NA' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='NA'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='3' rank='0' minImp='0' slots='0' matches='N' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='N u[NP,NE,NC,NT]'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
  </mode>
 </co>
 <co id='86' binds='86'>
  <function name='Q{http://www.functx.com}replace-multi' line='2611' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='?AS' slots='4'>
   <arg name='Q{}arg' as='?AS'/>
   <arg name='Q{}changeFrom' as='*AS'/>
   <arg name='Q{}changeTo' as='*AS'/>
   <tailCallLoop role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2624'>
    <choose>
     <fn name='exists'>
      <varRef name='Q{}changeFrom' slot='1'/>
     </fn>
     <ufCall name='Q{http://www.functx.com}replace-multi' tailCall='self' bSlot='0'>
      <fn name='replace'>
       <varRef name='Q{}arg' slot='0'/>
       <check card='1' diag='0|1||fn:replace'>
        <first>
         <varRef name='Q{}changeFrom' slot='1'/>
        </first>
       </check>
       <check card='1' diag='0|2||fn:replace'>
        <cvUntyped to='AS' diag='0|2||fn:replace'>
         <let var='Q{}arg' slot='3'>
          <first>
           <varRef name='Q{}changeTo' slot='2'/>
          </first>
          <choose line='1223'>
           <fn name='exists'>
            <varRef name='Q{}arg' slot='3'/>
           </fn>
           <varRef name='Q{}arg' slot='3'/>
           <true/>
           <str val=''/>
          </choose>
         </let>
        </cvUntyped>
       </check>
       <str val=''/>
      </fn>
      <tail start='2'>
       <varRef name='Q{}changeFrom' slot='1'/>
      </tail>
      <tail start='2'>
       <varRef name='Q{}changeTo' slot='2'/>
      </tail>
     </ufCall>
     <true/>
     <varRef name='Q{}arg' slot='0'/>
    </choose>
   </tailCallLoop>
  </function>
 </co>
 <co id='87' binds='83'>
  <template name='Q{}resolve.sameas.element' flags='os' line='223' module='events.xsl' slots='5'>
   <let role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='225' var='Q{}pointedElement' as='1NE' slot='0'>
    <treat line='226' as='NE' diag='3|0|XTTE0570|pointedElement'>
     <check card='1' diag='3|0|XTTE0570|pointedElement'>
      <callT name='Q{}get.sameas.element' bSlot='0'/>
     </check>
    </treat>
    <let line='231' var='Q{}attrs' as='*NA' slot='1'>
     <filter flags='b'>
      <slash simple='1'>
       <treat as='N' diag='14|2|XPTY0020|'>
        <dot flags='a'/>
       </treat>
       <axis name='attribute' nodeTest='NA'/>
      </slash>
      <compareToString op='ne' val='sameas'>
       <fn name='local-name'>
        <dot type='1NA'/>
       </fn>
      </compareToString>
     </filter>
     <copyOf line='243' flags='c'>
      <let ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='234' var='Q{}attrNames' as='*AQ' slot='2'>
       <forEach ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~'>
        <varRef name='Q{}attrs' slot='1'/>
        <cast line='235' flags='a' as='1AQ'>
         <fn name='name'>
          <dot type='1NA'/>
         </fn>
        </cast>
       </forEach>
       <let line='239' var='Q{}attrValues' as='*A' slot='3'>
        <forEach ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~'>
         <varRef name='Q{}attrs' slot='1'/>
         <fn line='240' name='string'>
          <dot type='1NA'/>
         </fn>
        </forEach>
        <check module='functions_DIME.xsl' line='74' card='?' diag='5|0|XTTE0780|dme:add-mei-attributes#3'>
         <forEach>
          <varRef ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' module='events.xsl' line='243' name='Q{}pointedElement' slot='0'/>
          <copy line='77' flags='cin' sit='1NE'>
           <sequence role='content'>
            <forEach>
             <varRef name='Q{}attrNames' slot='2'/>
             <let line='78' var='Q{}seq' as='1ADI' slot='4'>
              <fn name='position'/>
              <choose line='81'>
               <compareToString op='ne' val='http://www.w3.org/1999/XSL/Transform'>
                <fn name='namespace-uri-from-QName'>
                 <dot type='1AQ'/>
                </fn>
               </compareToString>
               <compAtt line='82' flags='l'>
                <convert role='name' from='AQ' to='AS'>
                 <dot type='1AQ'/>
                </convert>
                <convert role='namespace' from='AU' to='AS'>
                 <fn name='namespace-uri-from-QName'>
                  <dot type='1AQ'/>
                 </fn>
                </convert>
                <subscript role='select'>
                 <varRef name='Q{}attrValues' slot='3'/>
                 <varRef name='Q{}seq' slot='4'/>
                </subscript>
               </compAtt>
               <true/>
               <compAtt line='85' flags='l'>
                <convert role='name' from='AQ' to='AS'>
                 <dot type='1AQ'/>
                </convert>
                <subscript role='select'>
                 <varRef name='Q{}attrValues' slot='3'/>
                 <varRef name='Q{}seq' slot='4'/>
                </subscript>
               </compAtt>
              </choose>
             </let>
            </forEach>
            <copyOf line='89' flags='c'>
             <union op='|'>
              <filter flags='b'>
               <axis name='attribute' nodeTest='NA'/>
               <fn name='not'>
                <gcEE op='=' card='N:1' comp='EQC'>
                 <varRef name='Q{}attrNames' slot='2'/>
                 <fn name='node-name'>
                  <dot type='1NA'/>
                 </fn>
                </gcEE>
               </fn>
              </filter>
              <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
             </union>
            </copyOf>
           </sequence>
          </copy>
         </forEach>
        </check>
       </let>
      </let>
     </copyOf>
    </let>
   </let>
  </template>
 </co>
 <co id='85' binds='87 0 83 85 4 85 0'>
  <template name='Q{}layer.descendants' flags='os' line='135' module='events.xsl' slots='5'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='136'>
    <param name='Q{}pElements' slot='0'>
     <str role='select' val=''/>
     <supplied role='conversion' slot='0'/>
    </param>
    <forEach line='138'>
     <varRef name='Q{}pElements' slot='0'/>
     <choose line='140'>
      <and op='and'>
       <fn name='exists'>
        <slash simple='1'>
         <treat as='N' diag='14|2|XPTY0020|'>
          <dot/>
         </treat>
         <axis name='attribute' nodeTest='NA nQ{}sameas'/>
        </slash>
       </fn>
       <fn name='empty'>
        <slash simple='1'>
         <treat as='N' diag='14|3|XPTY0020|'>
          <dot/>
         </treat>
         <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
        </slash>
       </fn>
      </and>
      <let line='141' var='Q{}resolvedElement' as='1NE' slot='1'>
       <treat line='142' as='NE' diag='3|0|XTTE0570|resolvedElement'>
        <check card='1' diag='3|0|XTTE0570|resolvedElement'>
         <callT name='Q{}resolve.sameas.element' bSlot='0'/>
        </check>
       </treat>
       <copyOf line='144' flags='c'>
        <ufCall name='Q{http://www.functx.com}remove-attributes' tailCall='false' bSlot='1'>
         <varRef name='Q{}resolvedElement' slot='1'/>
         <literal count='4'>
          <str val='stem.dir'/>
          <str val='stem.sameas'/>
          <str val='ploc'/>
          <str val='oloc'/>
         </literal>
        </ufCall>
       </copyOf>
      </let>
      <fn line='147' name='exists'>
       <slash simple='1'>
        <treat as='N' diag='14|2|XPTY0020|'>
         <dot/>
        </treat>
        <axis name='attribute' nodeTest='NA nQ{}sameas'/>
       </slash>
      </fn>
      <copy line='149' flags='cin' sit='1'>
       <let role='content' var='Q{}pointedElement' as='1NE' slot='2'>
        <treat line='150' as='NE' diag='3|0|XTTE0570|pointedElement'>
         <check card='1' diag='3|0|XTTE0570|pointedElement'>
          <callT name='Q{}get.sameas.element' bSlot='2'/>
         </check>
        </treat>
        <let line='153' var='Q{}currentAttributes' as='*NA' slot='3'>
         <except op='except'>
          <slash simple='1'>
           <treat as='N' diag='14|2|XPTY0020|'>
            <dot/>
           </treat>
           <axis name='attribute' nodeTest='NA'/>
          </slash>
          <slash simple='1'>
           <treat as='N' diag='14|2|XPTY0020|'>
            <dot/>
           </treat>
           <axis name='attribute' nodeTest='NA nQ{}sameas'/>
          </slash>
         </except>
         <let line='154' var='Q{http://saxon.sf.net/generated-variable}v0' as='+AS' slot='4' flags='l'>
          <sequence>
           <literal count='4'>
            <str val='stem.dir'/>
            <str val='stem.sameas'/>
            <str val='ploc'/>
            <str val='oloc'/>
           </literal>
           <slash>
            <varRef name='Q{}currentAttributes' slot='3'/>
            <fn name='local-name'>
             <dot type='1NA'/>
            </fn>
           </slash>
          </sequence>
          <sequence line='155'>
           <copyOf flags='c'>
            <varRef name='Q{}currentAttributes' slot='3'/>
           </copyOf>
           <copyOf line='156' flags='c'>
            <filter line='154' flags='b'>
             <slash simple='1'>
              <varRef name='Q{}pointedElement' slot='2'/>
              <axis name='attribute' nodeTest='NA'/>
             </slash>
             <fn name='not'>
              <gcEE op='=' card='N:1' comp='CCC'>
               <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='4'/>
               <fn name='local-name'>
                <dot type='1NA'/>
               </fn>
              </gcEE>
             </fn>
            </filter>
           </copyOf>
           <callT line='157' name='Q{}layer.descendants' bSlot='3'>
            <withParam name='Q{}pElements' flags='c' as='*N'>
             <slash line='158' simple='1'>
              <treat as='N' diag='14|3|XPTY0020|'>
               <dot/>
              </treat>
              <axis name='child' nodeTest='N'/>
             </slash>
            </withParam>
           </callT>
          </sequence>
         </let>
        </let>
       </let>
      </copy>
      <fn line='162' name='exists'>
       <slash simple='1'>
        <treat as='N' diag='14|3|XPTY0020|'>
         <dot/>
        </treat>
        <axis name='child' nodeTest='N'/>
       </slash>
      </fn>
      <copy line='164' flags='cin' sit='1'>
       <sequence role='content'>
        <applyT bSlot='4'>
         <filter role='select' flags='b'>
          <slash simple='1'>
           <treat as='N' diag='14|2|XPTY0020|'>
            <dot/>
           </treat>
           <axis name='attribute' nodeTest='NA'/>
          </slash>
          <fn name='not'>
           <gcEE op='=' card='N:1' comp='CCC'>
            <literal count='4'>
             <str val='stem.dir'/>
             <str val='stem.sameas'/>
             <str val='ploc'/>
             <str val='oloc'/>
            </literal>
            <fn name='local-name'>
             <dot type='1NA'/>
            </fn>
           </gcEE>
          </fn>
         </filter>
        </applyT>
        <callT line='165' name='Q{}layer.descendants' bSlot='5'>
         <withParam name='Q{}pElements' flags='c' as='*N'>
          <slash line='166' simple='1'>
           <treat as='N' diag='14|3|XPTY0020|'>
            <dot/>
           </treat>
           <axis name='child' nodeTest='N'/>
          </slash>
         </withParam>
        </callT>
       </sequence>
      </copy>
      <instance line='171' of='1NE'>
       <dot/>
      </instance>
      <choose line='174'>
       <and op='and'>
        <compareToString op='eq' val='mSpace'>
         <fn name='local-name'>
          <treat as='N' diag='0|0||fn:local-name'>
           <dot/>
          </treat>
         </fn>
        </compareToString>
        <vc op='eq' onEmpty='0'>
         <cast flags='ae' as='?AS'>
          <slash>
           <treat as='N' diag='14|2|XPTY0020|'>
            <dot/>
           </treat>
           <attVal name='Q{}type'/>
          </slash>
         </cast>
         <str val='rest'/>
        </vc>
       </and>
       <elem ns='=http://www.music-encoding.org/ns/mei array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='175' name='mRest' nsuri='http://www.music-encoding.org/ns/mei' flags='d'>
        <sequence line='176'>
         <att name='xml:id' nsuri='http://www.w3.org/XML/1998/namespace' flags='l'>
          <fn line='178' name='normalize-space'>
           <fn name='string-join'>
            <convert from='A' to='AS'>
             <choose>
              <fn name='contains'>
               <cvUntyped to='AS' diag='0|0||fn:contains'>
                <slash>
                 <treat as='N' diag='14|2|XPTY0020|'>
                  <dot/>
                 </treat>
                 <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
                </slash>
               </cvUntyped>
               <str val='_'/>
              </fn>
              <fn line='179' name='concat'>
               <str val='mrest_'/>
               <fn name='substring-after'>
                <cvUntyped to='AS' diag='0|0||fn:substring-after'>
                 <slash>
                  <treat as='N' diag='14|2|XPTY0020|'>
                   <dot/>
                  </treat>
                  <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
                 </slash>
                </cvUntyped>
                <str val='_'/>
               </fn>
              </fn>
              <true/>
              <data line='182'>
               <forEach>
                <slash simple='1'>
                 <treat as='N' diag='14|2|XPTY0020|'>
                  <dot/>
                 </treat>
                 <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                </slash>
                <copyOf flags='sc'>
                 <dot type='1NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                </copyOf>
               </forEach>
              </data>
             </choose>
            </convert>
            <str val=''/>
           </fn>
          </fn>
         </att>
         <applyT line='186' flags='c' bSlot='-1'>
          <except role='select' op='except'>
           <slash simple='1'>
            <treat as='N' diag='14|2|XPTY0020|'>
             <dot/>
            </treat>
            <axis name='attribute' nodeTest='NA'/>
           </slash>
           <docOrder intra='1'>
            <sequence>
             <slash simple='1'>
              <treat as='N' diag='14|2|XPTY0020|'>
               <dot/>
              </treat>
              <axis name='attribute' nodeTest='NA nQ{}type'/>
             </slash>
             <slash simple='1'>
              <treat as='N' diag='14|2|XPTY0020|'>
               <dot/>
              </treat>
              <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
             </slash>
            </sequence>
           </docOrder>
          </except>
         </applyT>
        </sequence>
       </elem>
       <and line='190' op='and'>
        <compareToString op='eq' val='space'>
         <fn name='local-name'>
          <treat as='N' diag='0|0||fn:local-name'>
           <dot/>
          </treat>
         </fn>
        </compareToString>
        <vc op='eq' onEmpty='0'>
         <cast flags='ae' as='?AS'>
          <slash>
           <treat as='N' diag='14|2|XPTY0020|'>
            <dot/>
           </treat>
           <attVal name='Q{}type'/>
          </slash>
         </cast>
         <str val='rest'/>
        </vc>
       </and>
       <elem ns='=http://www.music-encoding.org/ns/mei array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='191' name='rest' nsuri='http://www.music-encoding.org/ns/mei' flags='d'>
        <sequence line='192'>
         <att name='xml:id' nsuri='http://www.w3.org/XML/1998/namespace' flags='l'>
          <fn line='194' name='normalize-space'>
           <fn name='string-join'>
            <convert from='A' to='AS'>
             <choose>
              <fn name='contains'>
               <cvUntyped to='AS' diag='0|0||fn:contains'>
                <slash>
                 <treat as='N' diag='14|2|XPTY0020|'>
                  <dot/>
                 </treat>
                 <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
                </slash>
               </cvUntyped>
               <str val='_'/>
              </fn>
              <fn line='195' name='concat'>
               <str val='rest_'/>
               <fn name='substring-after'>
                <cvUntyped to='AS' diag='0|0||fn:substring-after'>
                 <slash>
                  <treat as='N' diag='14|2|XPTY0020|'>
                   <dot/>
                  </treat>
                  <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
                 </slash>
                </cvUntyped>
                <str val='_'/>
               </fn>
              </fn>
              <true/>
              <data line='198'>
               <forEach>
                <slash simple='1'>
                 <treat as='N' diag='14|2|XPTY0020|'>
                  <dot/>
                 </treat>
                 <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                </slash>
                <copyOf flags='sc'>
                 <dot type='1NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                </copyOf>
               </forEach>
              </data>
             </choose>
            </convert>
            <str val=''/>
           </fn>
          </fn>
         </att>
         <applyT line='202' flags='c' bSlot='-1'>
          <except role='select' op='except'>
           <slash simple='1'>
            <treat as='N' diag='14|2|XPTY0020|'>
             <dot/>
            </treat>
            <axis name='attribute' nodeTest='NA'/>
           </slash>
           <docOrder intra='1'>
            <sequence>
             <slash simple='1'>
              <treat as='N' diag='14|2|XPTY0020|'>
               <dot/>
              </treat>
              <axis name='attribute' nodeTest='NA nQ{}type'/>
             </slash>
             <slash simple='1'>
              <treat as='N' diag='14|2|XPTY0020|'>
               <dot/>
              </treat>
              <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
             </slash>
            </sequence>
           </docOrder>
          </except>
         </applyT>
        </sequence>
       </elem>
       <true/>
       <copyOf line='206' flags='c'>
        <ufCall name='Q{http://www.functx.com}remove-attributes' tailCall='false' bSlot='6'>
         <treat as='NE' diag='0|0||functx:remove-attributes'>
          <dot/>
         </treat>
         <literal count='4'>
          <str val='stem.dir'/>
          <str val='stem.sameas'/>
          <str val='ploc'/>
          <str val='oloc'/>
         </literal>
        </ufCall>
       </copyOf>
      </choose>
      <true/>
      <copyOf line='211' flags='c'>
       <dot/>
      </copyOf>
     </choose>
    </forEach>
   </sequence>
  </template>
 </co>
 <co id='88' binds='19'>
  <globalVariable name='Q{}REQ_PARTS_EXTRACT_STAVES' as='*ADI' line='51' module='main.xsl' visibility='PRIVATE' flags='x'>
   <slash defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='51'>
    <slash simple='2'>
     <filter flags='b'>
      <slash simple='1'>
       <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
       <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
      </slash>
      <fn name='empty'>
       <axis name='attribute' nodeTest='NA nQ{}layer'/>
      </fn>
     </filter>
     <axis name='attribute' nodeTest='NA nQ{}staff'/>
    </slash>
    <cast flags='a' as='1ADI'>
     <data diag='2|0||cast as'>
      <dot type='1NA nQ{}staff'/>
     </data>
    </cast>
   </slash>
  </globalVariable>
 </co>
 <co id='58' binds=''>
  <template name='Q{}mrests.count' flags='os' line='315' module='events.xsl' slots='2'>
   <iterate role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='316'>
    <slash role='select' simple='1'>
     <treat as='N' diag='14|7|XPTY0020|'>
      <dot flags='a'/>
     </treat>
     <axis name='following-sibling' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}measure'/>
    </slash>
    <params role='params' line='317'>
     <param name='Q{}pCounter' slot='0' as='1ADI'>
      <int role='select' val='1'/>
      <treat role='conversion' as='ADI' diag='8|0|XTTE0590|pCounter'>
       <check card='1' diag='8|0|XTTE0590|pCounter'>
        <cvUntyped to='ADI' diag='8|0|XTTE0590|pCounter'>
         <data diag='8|0|XTTE0590|pCounter'>
          <supplied slot='0'/>
         </data>
        </cvUntyped>
       </check>
      </treat>
     </param>
     <param line='318' name='Q{}pMeasureIds' slot='1'>
      <array role='select' size='0'/>
      <supplied role='conversion' slot='1'/>
     </param>
    </params>
    <elem role='on-completion' ns='=http://www.mozarteum.at/ns/dme array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='321' name='measure' nsuri='http://www.mozarteum.at/ns/dme' flags='d'>
     <sequence>
      <att name='count' flags='l'>
       <convert from='ADI' to='AS'>
        <varRef name='Q{}pCounter' slot='0'/>
       </convert>
      </att>
      <att name='ids' flags='l'>
       <fn name='string-join'>
        <convert from='A' to='AS'>
         <data>
          <mergeAdj>
           <varRef name='Q{}pMeasureIds' slot='1'/>
          </mergeAdj>
         </data>
        </convert>
        <str val=' '/>
       </fn>
      </att>
     </sequence>
    </elem>
    <choose role='action' line='324'>
     <fn name='exists'>
      <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}mRest'/>
     </fn>
     <nextIteration line='327'>
      <withParam name='Q{}pCounter' as='1ADI' slot='0'>
       <arith line='325' op='+' calc='i+i'>
        <varRef name='Q{}pCounter' slot='0'/>
        <int val='1'/>
       </arith>
      </withParam>
      <withParam name='Q{}pMeasureIds' as='1FA' slot='1'>
       <ifCall line='328' name='Q{http://www.w3.org/2005/xpath-functions/array}append' type='1FA'>
        <treat as='FA' diag='0|0||array:append'>
         <check card='1' diag='0|0||array:append'>
          <varRef name='Q{}pMeasureIds' slot='1'/>
         </check>
        </treat>
        <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
       </ifCall>
      </withParam>
     </nextIteration>
     <true/>
     <sequence ns='=http://www.mozarteum.at/ns/dme array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='333'>
      <elem name='measure' nsuri='http://www.mozarteum.at/ns/dme' flags='d'>
       <sequence>
        <att name='count' flags='l'>
         <convert from='ADI' to='AS'>
          <varRef name='Q{}pCounter' slot='0'/>
         </convert>
        </att>
        <att name='ids' flags='l'>
         <fn name='string-join'>
          <convert from='A' to='AS'>
           <data>
            <mergeAdj>
             <varRef name='Q{}pMeasureIds' slot='1'/>
            </mergeAdj>
           </data>
          </convert>
          <str val=' '/>
         </fn>
        </att>
       </sequence>
      </elem>
      <break ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='335'/>
     </sequence>
    </choose>
   </iterate>
  </template>
 </co>
 <co id='89' binds='38'>
  <function name='Q{http://www.functx.com}first-day-of-year' line='994' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='?AA' slots='1'>
   <arg name='Q{}date' as='?A'/>
   <tailCallLoop role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='999'>
    <ufCall name='Q{http://www.functx.com}date' tailCall='foreign' bSlot='0'>
     <check card='1' diag='0|0||functx:date'>
      <fn name='year-from-date'>
       <cast flags='ae' as='?AA'>
        <varRef name='Q{}date' slot='0'/>
       </cast>
      </fn>
     </check>
     <int val='1'/>
     <int val='1'/>
    </ufCall>
   </tailCallLoop>
  </function>
 </co>
 <co id='90' binds='91 77 26 52 88 46 4 47 32 33 26 4 47 4'>
  <mode name='Q{}step_one' onNo='TC' flags='W' patternSlots='0'>
   <templateRule prec='0' prio='0.5' seq='10' rank='2' minImp='0' slots='2' matches='NE nQ{http://www.music-encoding.org/ns/mei}scoreDef' flags='s' line='9' module='scoreDef.xsl'>
    <p.withPredicate role='match'>
     <p.nodeTest test='NE nQ{http://www.music-encoding.org/ns/mei}scoreDef'/>
     <and defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='9' op='and'>
      <fn name='empty'>
       <axis name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}app'/>
      </fn>
      <fn name='empty'>
       <axis name='preceding' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}scoreDef'/>
      </fn>
     </and>
    </p.withPredicate>
    <let role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='10' var='Q{}delete.staffDefs' as='1NE' slot='0'>
     <treat line='11' as='NE' diag='3|0|XTTE0570|delete.staffDefs'>
      <check card='1' diag='3|0|XTTE0570|delete.staffDefs'>
       <applyT mode='Q{}process.staffDef' bSlot='0'>
        <dot role='select' type='1NE nQ{http://www.music-encoding.org/ns/mei}scoreDef' flags='a'/>
       </applyT>
      </check>
     </treat>
     <let line='13' var='Q{}clean.staffGrps' as='1NE' slot='1'>
      <treat line='14' as='NE' diag='3|0|XTTE0570|clean.staffGrps'>
       <check card='1' diag='3|0|XTTE0570|clean.staffGrps'>
        <applyT mode='Q{}m.adjust.staffGrps' bSlot='1'>
         <varRef role='select' name='Q{}delete.staffDefs' slot='0'/>
        </applyT>
       </check>
      </treat>
      <copyOf line='16' flags='c'>
       <varRef name='Q{}clean.staffGrps' slot='1'/>
      </copyOf>
     </let>
    </let>
   </templateRule>
   <templateRule prec='0' prio='0.0' seq='9' rank='1' minImp='0' slots='0' matches='NE nQ{http://www.music-encoding.org/ns/mei}pb' flags='s' line='265' module='global.xsl'>
    <p.nodeTest role='match' test='NE nQ{http://www.music-encoding.org/ns/mei}pb'/>
    <empty role='action'/>
   </templateRule>
   <templateRule prec='0' prio='0.0' seq='13' rank='1' minImp='0' slots='9' matches='NE nQ{http://www.music-encoding.org/ns/mei}staff' flags='s' line='9' module='events.xsl'>
    <p.nodeTest role='match' test='NE nQ{http://www.music-encoding.org/ns/mei}staff'/>
    <let role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='37' var='Q{http://saxon.sf.net/generated-variable}v1' as='?AZ' slot='0' flags='l'>
     <data diag='1|1||='>
      <axis name='attribute' nodeTest='NA nQ{}n'/>
     </data>
     <let line='17' var='Q{http://saxon.sf.net/generated-variable}v0' as='?AZ' slot='1' flags='l'>
      <data diag='1|1||='>
       <axis name='attribute' nodeTest='NA nQ{}n'/>
      </data>
      <let line='10' var='Q{}staffNumber' as='1NA nQ{}n' slot='2'>
       <check card='1' diag='3|0|XTTE0570|staffNumber'>
        <axis name='attribute' nodeTest='NA nQ{}n'/>
       </check>
       <choose line='12'>
        <fn name='exists'>
         <slash simple='2'>
          <indexedFilter2 comp='CCC'>
           <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='2'/>
           <cast role='use' flags='ae' as='?AS'>
            <attVal name='Q{}staff'/>
           </cast>
           <cast role='search' flags='a' as='1AS'>
            <data diag='1|1||='>
             <varRef name='Q{}staffNumber' slot='2'/>
            </data>
           </cast>
          </indexedFilter2>
          <axis name='attribute' nodeTest='NA nQ{}split'/>
         </slash>
        </fn>
        <callT line='13' name='Q{}splitStaff' bSlot='5' flags='t'/>
        <some line='17' var='Q{}staff' slot='3'>
         <gVarRef name='Q{}REQ_PARTS_EXTRACT_LAYERS' bSlot='3'/>
         <gc op='=' card='1:1' comp='QUNC'>
          <varRef name='Q{}staff' slot='3'/>
          <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='1'/>
         </gc>
        </some>
        <copy line='19' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}staff'>
         <sequence role='content'>
          <applyT bSlot='6'>
           <axis role='select' name='attribute' nodeTest='NA'/>
          </applyT>
          <let line='20' var='Q{}newStaffNumber' as='1ADI' slot='5'>
           <callT line='21' name='Q{}get.new.staff.number' bSlot='7'>
            <withParam name='Q{}staffN' flags='c' as='1ADI'>
             <check line='22' card='1' diag='8|0|XTTE0590|staffN'>
              <cast flags='ae' as='?ADI'>
               <data diag='2|0||cast as'>
                <axis name='attribute' nodeTest='NA nQ{}n'/>
               </data>
              </cast>
             </check>
            </withParam>
           </callT>
           <sequence line='25'>
            <att name='n' flags='l'>
             <convert from='ADI' to='AS'>
              <varRef name='Q{}newStaffNumber' slot='5'/>
             </convert>
            </att>
            <choose line='27'>
             <fn name='exists'>
              <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}app'/>
             </fn>
             <callT line='28' name='Q{}process.app' bSlot='8'>
              <withParam name='Q{}staffN' flags='c' as='?NA nQ{}n'>
               <axis line='29' name='attribute' nodeTest='NA nQ{}n'/>
              </withParam>
             </callT>
            </choose>
            <applyT line='32' mode='Q{}layer' bSlot='9'>
             <let role='select' var='Q{http://saxon.sf.net/generated-variable}current2081758386' as='1' slot='6'>
              <dot type='1NE nQ{http://www.music-encoding.org/ns/mei}staff' flags='a'/>
              <let var='Q{http://saxon.sf.net/generated-variable}v2' as='*AZ' slot='7' flags='l'>
               <data diag='1|1||='>
                <slash simple='2'>
                 <indexedFilter2 comp='CCC'>
                  <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='10'/>
                  <cast role='use' flags='ae' as='?AS'>
                   <attVal name='Q{}staff'/>
                  </cast>
                  <cast role='search' flags='ae' as='?AS'>
                   <slash>
                    <varRef name='Q{http://saxon.sf.net/generated-variable}current2081758386' slot='6'/>
                    <attVal name='Q{}n'/>
                   </slash>
                  </cast>
                 </indexedFilter2>
                 <axis name='attribute' nodeTest='NA nQ{}layer'/>
                </slash>
               </data>
               <filter flags='b'>
                <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layer'/>
                <gcEE op='=' card='N:1' comp='CCC'>
                 <varRef name='Q{http://saxon.sf.net/generated-variable}v2' slot='7'/>
                 <attVal name='Q{}n'/>
                </gcEE>
               </filter>
              </let>
             </let>
            </applyT>
           </sequence>
          </let>
         </sequence>
        </copy>
        <some line='37' var='Q{}staff' slot='4'>
         <gVarRef name='Q{}REQ_PARTS_EXTRACT_STAVES' bSlot='4'/>
         <gc op='=' card='1:1' comp='QUNC'>
          <varRef name='Q{}staff' slot='4'/>
          <varRef name='Q{http://saxon.sf.net/generated-variable}v1' slot='0'/>
         </gc>
        </some>
        <copy line='39' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}staff'>
         <sequence role='content'>
          <applyT bSlot='11'>
           <axis role='select' name='attribute' nodeTest='NA'/>
          </applyT>
          <let line='40' var='Q{}newStaffNumber' as='1ADI' slot='8'>
           <callT line='41' name='Q{}get.new.staff.number' bSlot='12'>
            <withParam name='Q{}staffN' flags='c' as='1ADI'>
             <check line='42' card='1' diag='8|0|XTTE0590|staffN'>
              <cast flags='ae' as='?ADI'>
               <data diag='2|0||cast as'>
                <axis name='attribute' nodeTest='NA nQ{}n'/>
               </data>
              </cast>
             </check>
            </withParam>
           </callT>
           <sequence line='45'>
            <att name='n' flags='l'>
             <convert from='ADI' to='AS'>
              <varRef name='Q{}newStaffNumber' slot='8'/>
             </convert>
            </att>
            <applyT line='46' bSlot='13'>
             <axis role='select' name='child' nodeTest='N'/>
            </applyT>
           </sequence>
          </let>
         </sequence>
        </copy>
       </choose>
      </let>
     </let>
    </let>
   </templateRule>
   <templateRule prec='0' prio='0.0' seq='9' part='1' rank='1' minImp='0' slots='0' matches='NE nQ{http://www.music-encoding.org/ns/mei}sb' flags='s' line='265' module='global.xsl'>
    <p.nodeTest role='match' test='NE nQ{http://www.music-encoding.org/ns/mei}sb'/>
    <empty role='action'/>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='6' part='1' rank='0' minImp='0' slots='0' matches='NA' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='NA'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='6' rank='0' minImp='0' slots='0' matches='N' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='N u[NP,NE,NC,NT]'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
  </mode>
 </co>
 <co id='92' binds='4 93 70 80 94 4 4'>
  <template name='Q{}create.controlevent' flags='os' line='112' module='controlEvents.xsl' slots='6'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='113'>
    <param name='Q{}pControlEvent' slot='0' flags='i' as='1NE'>
     <treat role='conversion' as='NE' diag='8|0|XTTE0590|pControlEvent'>
      <check card='1' diag='8|0|XTTE0590|pControlEvent'>
       <supplied slot='0'/>
      </check>
     </treat>
    </param>
    <param line='114' name='Q{}pSplit' slot='1' flags='i' as='1AB'>
     <treat role='conversion' as='AB' diag='8|0|XTTE0590|pSplit'>
      <check card='1' diag='8|0|XTTE0590|pSplit'>
       <cvUntyped to='AB' diag='8|0|XTTE0590|pSplit'>
        <data diag='8|0|XTTE0590|pSplit'>
         <supplied slot='1'/>
        </data>
       </cvUntyped>
      </check>
     </treat>
    </param>
    <param line='115' name='Q{}pLayerNumber' slot='2' as='?ADI'>
     <empty role='select'/>
     <treat role='conversion' as='ADI' diag='8|0|XTTE0590|pLayerNumber'>
      <check card='?' diag='8|0|XTTE0590|pLayerNumber'>
       <cvUntyped to='ADI' diag='8|0|XTTE0590|pLayerNumber'>
        <data diag='8|0|XTTE0590|pLayerNumber'>
         <supplied slot='2'/>
        </data>
       </cvUntyped>
      </check>
     </treat>
    </param>
    <compElem line='118'>
     <slash role='name'>
      <varRef name='Q{}pControlEvent' slot='0'/>
      <fn name='local-name'>
       <dot type='1NE'/>
      </fn>
     </slash>
     <str role='namespace' val='http://www.music-encoding.org/ns/mei'/>
     <let role='content' line='125' var='Q{}isDir' as='1AB' slot='3'>
      <compareToString op='eq' val='dir'>
       <slash>
        <varRef name='Q{}pControlEvent' slot='0'/>
        <fn name='local-name'>
         <dot type='1NE'/>
        </fn>
       </slash>
      </compareToString>
      <let line='127' var='Q{http://saxon.sf.net/generated-variable}v0' as='1AB' slot='4' flags='l'>
       <fn name='not'>
        <varRef name='Q{}isDir' slot='3'/>
       </fn>
       <sequence>
        <applyT bSlot='0'>
         <sequence role='select'>
          <filter flags='b'>
           <slash simple='1'>
            <varRef name='Q{}pControlEvent' slot='0'/>
            <axis name='attribute' nodeTest='NA'/>
           </slash>
           <fn name='not'>
            <gcEE op='=' card='N:1' comp='CCC'>
             <literal count='6'>
              <str val='startid'/>
              <str val='endid'/>
              <str val='curvedir'/>
              <str val='layer'/>
              <str val='place'/>
              <str val='part'/>
             </literal>
             <fn name='local-name'>
              <dot type='1NA'/>
             </fn>
            </gcEE>
           </fn>
          </filter>
          <filter flags='ib'>
           <slash simple='1'>
            <varRef name='Q{}pControlEvent' slot='0'/>
            <axis name='attribute' nodeTest='NA nQ{}place'/>
           </slash>
           <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='4'/>
          </filter>
         </sequence>
        </applyT>
        <choose line='130'>
         <varRef name='Q{}pSplit' slot='1'/>
         <applyT line='131' mode='Q{}adjustIdsForSplitElements' bSlot='1'>
          <slash role='select' simple='1'>
           <varRef name='Q{}pControlEvent' slot='0'/>
           <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
          </slash>
          <withParam name='Q{}pCurrentLayerN' flags='t' as='1ADI'>
           <check line='132' card='1' diag='8|0|XTTE0590|pCurrentLayerN'>
            <varRef name='Q{}pLayerNumber' slot='2'/>
           </check>
          </withParam>
         </applyT>
        </choose>
        <let line='136' var='Q{}newStaffNumber' as='1ADI' slot='5'>
         <treat line='137' as='ADI' diag='3|0|XTTE0570|newStaffNumber'>
          <check card='1' diag='3|0|XTTE0570|newStaffNumber'>
           <cvUntyped to='ADI' diag='3|0|XTTE0570|newStaffNumber'>
            <data diag='3|0|XTTE0570|newStaffNumber'>
             <callT name='Q{}new.staff.number.controlevents' bSlot='2'>
              <withParam name='Q{}pControlEvent' flags='c' as='1NE'>
               <varRef line='138' name='Q{}pControlEvent' slot='0'/>
              </withParam>
              <withParam name='Q{}pCurrentLayerN' flags='c' as='?ADI'>
               <varRef line='139' name='Q{}pLayerNumber' slot='2'/>
              </withParam>
             </callT>
            </data>
           </cvUntyped>
          </check>
         </treat>
         <sequence line='143'>
          <att name='staff' flags='l'>
           <convert from='ADI' to='AS'>
            <varRef name='Q{}newStaffNumber' slot='5'/>
           </convert>
          </att>
          <callT line='145' name='Q{}update.pointers' bSlot='3'>
           <withParam name='Q{}pControlEvent' flags='c' as='1NE'>
            <varRef line='146' name='Q{}pControlEvent' slot='0'/>
           </withParam>
           <withParam name='Q{}newStaffNumber' flags='c' as='1ADI'>
            <varRef line='147' name='Q{}newStaffNumber' slot='5'/>
           </withParam>
          </callT>
          <choose line='150'>
           <and op='and'>
            <fn name='exists'>
             <filter flags='b'>
              <slash simple='1'>
               <varRef name='Q{}pControlEvent' slot='0'/>
               <axis name='attribute' nodeTest='NA nQ{}part'/>
              </slash>
              <compareToString op='eq' val='%all'>
               <cast flags='a' as='1AS'>
                <data diag='1|0||='>
                 <dot type='1NA nQ{}part'/>
                </data>
               </cast>
              </compareToString>
             </filter>
            </fn>
            <gVarRef name='Q{}EXTRACT_MULTIPLE_PARTS' bSlot='4'/>
           </and>
           <applyT line='151' bSlot='5'>
            <slash role='select' simple='1'>
             <varRef name='Q{}pControlEvent' slot='0'/>
             <axis name='attribute' nodeTest='NA nQ{}part'/>
            </slash>
           </applyT>
          </choose>
          <applyT line='154' bSlot='6'>
           <slash role='select' simple='1'>
            <varRef name='Q{}pControlEvent' slot='0'/>
            <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
           </slash>
          </applyT>
         </sequence>
        </let>
       </sequence>
      </let>
     </let>
    </compElem>
   </sequence>
  </template>
 </co>
 <co id='95' binds=''>
  <function name='Q{http://www.functx.com}node-kind' line='2087' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*AS' slots='2'>
   <arg name='Q{}nodes' as='*N'/>
   <for role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2101' var='Q{}node' as='N' slot='1'>
    <varRef role='in' name='Q{}nodes' slot='0'/>
    <choose role='return'>
     <instance of='1NE'>
      <varRef name='Q{}node' slot='1'/>
     </instance>
     <str val='element'/>
     <instance of='1NA'>
      <varRef name='Q{}node' slot='1'/>
     </instance>
     <str val='attribute'/>
     <instance of='1NT'>
      <varRef name='Q{}node' slot='1'/>
     </instance>
     <str val='text'/>
     <instance of='1ND'>
      <varRef name='Q{}node' slot='1'/>
     </instance>
     <str val='document-node'/>
     <instance of='1NC'>
      <varRef name='Q{}node' slot='1'/>
     </instance>
     <str val='comment'/>
     <instance of='1NP'>
      <varRef name='Q{}node' slot='1'/>
     </instance>
     <str val='processing-instruction'/>
     <true/>
     <str val='unknown'/>
    </choose>
   </for>
  </function>
 </co>
 <co id='84' binds='4'>
  <template name='Q{}create.first.layer' flags='os' line='250' module='events.xsl' slots='0'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='251'>
    <att name='n'>
     <str val='1'/>
    </att>
    <att line='252' name='xml:id' nsuri='http://www.w3.org/XML/1998/namespace'>
     <fn name='normalize-space'>
      <fn name='string'>
       <convert from='AZ' to='AS'>
        <slash>
         <treat as='N' diag='14|2|XPTY0020|'>
          <dot flags='a'/>
         </treat>
         <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
        </slash>
       </convert>
      </fn>
     </fn>
    </att>
    <applyT line='253' flags='t' bSlot='0'>
     <except role='select' op='except'>
      <slash simple='1'>
       <treat as='N' diag='14|2|XPTY0020|'>
        <dot flags='a'/>
       </treat>
       <axis name='attribute' nodeTest='NA'/>
      </slash>
      <docOrder intra='1'>
       <sequence>
        <slash simple='1'>
         <treat as='N' diag='14|2|XPTY0020|'>
          <dot flags='a'/>
         </treat>
         <axis name='attribute' nodeTest='NA nQ{}n'/>
        </slash>
        <slash simple='1'>
         <treat as='N' diag='14|2|XPTY0020|'>
          <dot flags='a'/>
         </treat>
         <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
        </slash>
       </sequence>
      </docOrder>
     </except>
    </applyT>
   </sequence>
  </template>
 </co>
 <co id='72' binds=''>
  <globalParam name='Q{}P_SHRINK_MEASURES' as='1AB' line='22' module='main.xsl' visibility='PUBLIC'>
   <true/>
  </globalParam>
 </co>
 <co id='96' binds=''>
  <function name='Q{http://www.functx.com}if-absent' line='1215' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*' slots='2'>
   <arg name='Q{}arg' as='*'/>
   <arg name='Q{}value' as='*'/>
   <choose role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='1223'>
    <fn name='exists'>
     <varRef name='Q{}arg' slot='0'/>
    </fn>
    <varRef name='Q{}arg' slot='0'/>
    <true/>
    <varRef name='Q{}value' slot='1'/>
   </choose>
  </function>
 </co>
 <co id='97' binds='13 26 26 4 93 4 93 97 97 13 98 26 52 88 94 92 92 92 26 92 4 47 4 71 4 4'>
  <mode name='Q{}step_two' onNo='TC' flags='W' patternSlots='0'>
   <templateRule prec='0' prio='0.5' seq='18' rank='2' minImp='0' slots='11' matches='NE' flags='s' line='321' module='controlEvents.xsl'>
    <p.withUpper role='match' axis='parent' upFirst='true'>
     <p.withPredicate>
      <p.nodeTest test='NE'/>
      <and defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='321' op='and'>
       <or op='or'>
        <or op='or'>
         <axis name='self' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}supplied'/>
         <axis name='self' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}app'/>
        </or>
        <axis name='self' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}choice'/>
       </or>
       <filter flags='b'>
        <axis name='descendant' nodeTest='NE'/>
        <gc op='=' card='M:N' comp='CCC'>
         <fn name='local-name'>
          <dot type='1NE'/>
         </fn>
         <gVarRef name='Q{}CONTROL_EVENTS' bSlot='0'/>
        </gc>
       </filter>
      </and>
     </p.withPredicate>
     <p.nodeTest test='NE nQ{http://www.music-encoding.org/ns/mei}measure'/>
    </p.withUpper>
    <let role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='322' var='Q{}layerN' as='*AS' slot='0'>
     <treat as='AS' diag='3|0|XTTE0570|layerN'>
      <cvUntyped to='AS' diag='3|0|XTTE0570|layerN'>
       <fn name='distinct-values'>
        <data diag='0|0||fn:distinct-values'>
         <slash simple='2'>
          <axis name='descendant-or-self' nodeTest='NE'/>
          <axis name='attribute' nodeTest='NA nQ{}layer'/>
         </slash>
        </data>
       </fn>
      </cvUntyped>
     </treat>
     <let line='323' var='Q{}staffN' as='*AS' slot='1'>
      <treat as='AS' diag='3|0|XTTE0570|staffN'>
       <cvUntyped to='AS' diag='3|0|XTTE0570|staffN'>
        <fn name='distinct-values'>
         <data diag='0|0||fn:distinct-values'>
          <slash simple='2'>
           <axis name='descendant-or-self' nodeTest='NE'/>
           <axis name='attribute' nodeTest='NA nQ{}staff'/>
          </slash>
         </data>
        </fn>
       </cvUntyped>
      </treat>
      <let line='324' var='Q{}partAll' as='1AB' slot='2'>
       <fn name='exists'>
        <filter flags='b'>
         <slash simple='2'>
          <axis name='descendant-or-self' nodeTest='NE'/>
          <axis name='attribute' nodeTest='NA nQ{}part'/>
         </slash>
         <compareToString op='eq' val='%all'>
          <cast flags='a' as='1AS'>
           <data diag='1|0||='>
            <dot type='1NA nQ{}part'/>
           </data>
          </cast>
         </compareToString>
        </filter>
       </fn>
       <let line='325' var='Q{}matchedElement' as='1NE' slot='3'>
        <dot type='1NE' flags='a'/>
        <choose line='332'>
         <fn name='not'>
          <compareToInt op='eq' val='1'>
           <fn name='count'>
            <fn name='subsequence'>
             <varRef name='Q{}staffN' slot='1'/>
             <int val='1'/>
             <int val='2'/>
            </fn>
           </fn>
          </compareToInt>
         </fn>
         <message line='333'>
          <sequence role='select'>
           <valueOf>
            <str val='Descendants of '/>
           </valueOf>
           <valueOf>
            <convert from='AZ' to='AS'>
             <data>
              <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
             </data>
            </convert>
           </valueOf>
           <valueOf>
            <str val=' either do not contain the mandatory @staff attribute or have different @staff values. The element is not processed!'/>
           </valueOf>
          </sequence>
          <str role='terminate' val='no'/>
          <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
         </message>
         <fn line='335' name='exists'>
          <filter flags='b'>
           <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='1'/>
           <and op='and'>
            <gcEE op='=' card='N:1' comp='CCC'>
             <varRef name='Q{}staffN' slot='1'/>
             <attVal name='Q{}staff'/>
            </gcEE>
            <fn name='exists'>
             <axis name='attribute' nodeTest='NA nQ{}split'/>
            </fn>
           </and>
          </filter>
         </fn>
         <choose line='338'>
          <and op='and'>
           <fn name='empty'>
            <varRef name='Q{}layerN' slot='0'/>
           </fn>
           <varRef name='Q{}partAll' slot='2'/>
          </and>
          <copy line='340' flags='cin' sit='1NE'>
           <applyT role='content' flags='c' bSlot='-1'>
            <sequence role='select'>
             <axis name='attribute' nodeTest='NA'/>
             <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
            </sequence>
           </applyT>
          </copy>
          <fn line='343' name='not'>
           <compareToInt op='eq' val='1'>
            <fn name='count'>
             <fn name='subsequence'>
              <varRef name='Q{}layerN' slot='0'/>
              <int val='1'/>
              <int val='2'/>
             </fn>
            </fn>
           </compareToInt>
          </fn>
          <message line='344'>
           <sequence role='select'>
            <valueOf>
             <str val='Descendants of '/>
            </valueOf>
            <valueOf>
             <convert from='AZ' to='AS'>
              <data>
               <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
              </data>
             </convert>
            </valueOf>
            <valueOf>
             <str val=' either do not contain the mandatory @layer attribute or have different @layer values. The element is not processed!'/>
            </valueOf>
           </sequence>
           <str role='terminate' val='no'/>
           <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
          </message>
          <true/>
          <let line='351' var='Q{http://saxon.sf.net/generated-variable}v4' as='1AS' slot='4' flags='l'>
           <slash>
            <varRef name='Q{}matchedElement' slot='3'/>
            <fn name='local-name'>
             <dot type='1NE'/>
            </fn>
           </slash>
           <let line='374' var='Q{http://saxon.sf.net/generated-variable}v3' as='1AB' slot='5' flags='l'>
            <fn name='exists'>
             <slash simple='1'>
              <varRef name='Q{}matchedElement' slot='3'/>
              <axis name='self' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}supplied'/>
             </slash>
            </fn>
            <let line='359' var='Q{http://saxon.sf.net/generated-variable}v2' as='1AB' slot='6' flags='l'>
             <fn name='exists'>
              <slash simple='1'>
               <varRef name='Q{}matchedElement' slot='3'/>
               <axis name='self' nodeTest='NE u[NE nQ{http://www.music-encoding.org/ns/mei}choice,NE nQ{http://www.music-encoding.org/ns/mei}app]'/>
              </slash>
             </fn>
             <let line='354' var='Q{http://saxon.sf.net/generated-variable}v1' as='?NA nQ{http://www.w3.org/XML/1998/namespace}id' slot='7' flags='l'>
              <slash simple='1'>
               <varRef name='Q{}matchedElement' slot='3'/>
               <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
              </slash>
              <let line='352' var='Q{http://saxon.sf.net/generated-variable}v0' as='*NA' slot='8' flags='l'>
               <slash simple='1'>
                <varRef name='Q{}matchedElement' slot='3'/>
                <axis name='attribute' nodeTest='NA'/>
               </slash>
               <iterate line='347'>
                <fn role='select' name='tokenize'>
                 <check card='?' diag='0|0||fn:tokenize'>
                  <varRef name='Q{}layerN' slot='0'/>
                 </check>
                 <str val='\s+'/>
                 <str val=''/>
                </fn>
                <params role='params'/>
                <let role='action' line='348' var='Q{}currentLayer' as='1ADI' slot='9'>
                 <cast flags='a' as='1ADI'>
                  <dot type='1AS'/>
                 </cast>
                 <compElem line='351'>
                  <varRef role='name' name='Q{http://saxon.sf.net/generated-variable}v4' slot='4'/>
                  <str role='namespace' val='http://www.music-encoding.org/ns/mei'/>
                  <sequence role='content' line='352'>
                   <applyT bSlot='3'>
                    <varRef role='select' name='Q{http://saxon.sf.net/generated-variable}v0' slot='8'/>
                   </applyT>
                   <applyT line='354' mode='Q{}adjustIdsForSplitElements' bSlot='4'>
                    <varRef role='select' name='Q{http://saxon.sf.net/generated-variable}v1' slot='7'/>
                    <withParam name='Q{}pCurrentLayerN' flags='t' as='1ADI'>
                     <varRef line='355' name='Q{}currentLayer' slot='9'/>
                    </withParam>
                   </applyT>
                   <choose line='359'>
                    <varRef name='Q{http://saxon.sf.net/generated-variable}v2' slot='6'/>
                    <iterate line='360'>
                     <slash role='select' simple='1'>
                      <varRef name='Q{}matchedElement' slot='3'/>
                      <axis name='child' nodeTest='NE'/>
                     </slash>
                     <params role='params'/>
                     <let role='action' line='361' var='Q{}currentIterationElement' as='1NE' slot='10'>
                      <dot type='1NE'/>
                      <compElem line='362' flags='l'>
                       <fn role='name' name='local-name'>
                        <dot type='1NE'/>
                       </fn>
                       <str role='namespace' val='http://www.music-encoding.org/ns/mei'/>
                       <sequence role='content' line='363'>
                        <applyT bSlot='5'>
                         <slash role='select' simple='1'>
                          <varRef name='Q{}currentIterationElement' slot='10'/>
                          <axis name='attribute' nodeTest='NA'/>
                         </slash>
                        </applyT>
                        <applyT line='365' mode='Q{}adjustIdsForSplitElements' bSlot='6'>
                         <slash role='select' simple='1'>
                          <varRef name='Q{}currentIterationElement' slot='10'/>
                          <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                         </slash>
                         <withParam name='Q{}pCurrentLayerN' flags='t' as='1ADI'>
                          <varRef line='366' name='Q{}currentLayer' slot='9'/>
                         </withParam>
                        </applyT>
                        <applyT line='368' mode='Q{}step_two' bSlot='7'>
                         <slash role='select' simple='1'>
                          <varRef name='Q{}currentIterationElement' slot='10'/>
                          <axis name='child' nodeTest='NE'/>
                         </slash>
                         <withParam name='Q{}pVariantsIteration' flags='t' as='1ADI'>
                          <varRef line='369' name='Q{}currentLayer' slot='9'/>
                         </withParam>
                        </applyT>
                       </sequence>
                      </compElem>
                     </let>
                    </iterate>
                    <varRef line='374' name='Q{http://saxon.sf.net/generated-variable}v3' slot='5'/>
                    <applyT line='375' mode='Q{}step_two' bSlot='8'>
                     <slash role='select' simple='1'>
                      <varRef name='Q{}matchedElement' slot='3'/>
                      <axis name='child' nodeTest='NE'/>
                     </slash>
                     <withParam name='Q{}pVariantsIteration' flags='t' as='1ADI'>
                      <varRef line='376' name='Q{}currentLayer' slot='9'/>
                     </withParam>
                    </applyT>
                   </choose>
                  </sequence>
                 </compElem>
                </let>
               </iterate>
              </let>
             </let>
            </let>
           </let>
          </let>
         </choose>
         <fn line='385' name='exists'>
          <indexedFilter2 comp='CCC' flags='u'>
           <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='2'/>
           <attVal role='use' name='Q{}staff'/>
           <varRef role='search' name='Q{}staffN' slot='1'/>
          </indexedFilter2>
         </fn>
         <copy line='387' flags='cin' sit='1NE'>
          <applyT role='content' flags='c' bSlot='-1'>
           <sequence role='select'>
            <axis name='attribute' nodeTest='NA'/>
            <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
           </sequence>
          </applyT>
         </copy>
        </choose>
       </let>
      </let>
     </let>
    </let>
   </templateRule>
   <templateRule prec='0' prio='0.5' seq='17' rank='2' minImp='0' slots='5' matches='NE' flags='s' line='12' module='controlEvents.xsl'>
    <p.withUpper role='match' axis='ancestor' upFirst='true'>
     <p.withPredicate>
      <p.nodeTest test='NE'/>
      <gc defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='12' op='=' card='M:N' comp='CCC'>
       <fn name='local-name'>
        <dot type='1NE'/>
       </fn>
       <gVarRef name='Q{}CONTROL_EVENTS' bSlot='9'/>
      </gc>
     </p.withPredicate>
     <p.nodeTest test='NE nQ{http://www.music-encoding.org/ns/mei}music'/>
    </p.withUpper>
    <sequence role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='13'>
     <param name='Q{}pVariantsIteration' slot='0' flags='t' as='?ADI'>
      <empty role='select'/>
      <treat role='conversion' as='ADI' diag='8|0|XTTE0590|pVariantsIteration'>
       <check card='?' diag='8|0|XTTE0590|pVariantsIteration'>
        <cvUntyped to='ADI' diag='8|0|XTTE0590|pVariantsIteration'>
         <data diag='8|0|XTTE0590|pVariantsIteration'>
          <supplied slot='0'/>
         </data>
        </cvUntyped>
       </check>
      </treat>
     </param>
     <let line='19' var='Q{}staffN' as='?ADI' slot='1'>
      <cast line='21' flags='ae' as='?ADI'>
       <data diag='2|0||cast as'>
        <axis name='attribute' nodeTest='NA nQ{}staff'/>
       </data>
      </cast>
      <let line='24' var='Q{}controlEvent' as='1NE' slot='2'>
       <dot type='1NE' flags='a'/>
       <choose line='27'>
        <fn name='empty'>
         <axis name='attribute' nodeTest='NA nQ{}staff'/>
        </fn>
        <message line='28'>
         <sequence role='select'>
          <valueOf>
           <str val='The element '/>
          </valueOf>
          <valueOf>
           <convert from='AZ' to='AS'>
            <data>
             <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
            </data>
           </convert>
          </valueOf>
          <valueOf>
           <str val=' does not have mandatory @staff attribute. Therefore, it is copied but not processed.'/>
          </valueOf>
         </sequence>
         <str role='terminate' val='no'/>
         <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
        </message>
        <fn line='30' name='exists'>
         <filter flags='b'>
          <axis name='attribute' nodeTest='NA nQ{}part'/>
          <compareToString op='eq' val='%all'>
           <cast flags='a' as='1AS'>
            <data diag='1|0||='>
             <dot type='1NA nQ{}part'/>
            </data>
           </cast>
          </compareToString>
         </filter>
        </fn>
        <choose line='33'>
         <or op='or'>
          <fn name='empty'>
           <filter flags='b'>
            <axis name='self' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}fermata'/>
            <vc op='eq' onEmpty='0'>
             <cast flags='ae' as='?AS'>
              <attVal name='Q{}place'/>
             </cast>
             <str val='below'/>
            </vc>
           </filter>
          </fn>
          <gVarRef name='Q{}EXTRACT_MULTIPLE_PARTS' bSlot='14'/>
         </or>
         <callT line='34' name='Q{}create.controlevent' bSlot='15' flags='t'>
          <withParam name='Q{}pSplit' flags='c' as='1AB'>
           <false/>
          </withParam>
          <withParam name='Q{}pControlEvent' flags='c' as='1NE'>
           <dot line='36' type='1NE' flags='a'/>
          </withParam>
         </callT>
        </choose>
        <and line='41' op='and'>
         <fn name='empty'>
          <axis name='attribute' nodeTest='NA nQ{}layer'/>
         </fn>
         <ifCall name='Q{http://www.w3.org/2005/xpath-functions/map}get' type='*'>
          <check card='1' diag='0|0||map:get'>
           <gVarRef name='Q{}PARTS_THAT_SHARE_A_STAFF' bSlot='10'/>
          </check>
          <check card='1' diag='0|1||map:get'>
           <cast flags='ae' as='?ADI'>
            <data diag='2|0||cast as'>
             <axis name='attribute' nodeTest='NA nQ{}staff'/>
            </data>
           </cast>
          </check>
         </ifCall>
        </and>
        <sequence line='42'>
         <message>
          <sequence role='select'>
           <valueOf>
            <str val='The element '/>
           </valueOf>
           <valueOf>
            <convert from='AZ' to='AS'>
             <data>
              <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
             </data>
            </convert>
           </valueOf>
           <valueOf>
            <str val=' does not have mandatory @layer attribute. Therefore, it is copied but not processed.'/>
           </valueOf>
          </sequence>
          <str role='terminate' val='no'/>
          <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
         </message>
         <copyOf line='43' flags='c'>
          <dot type='1NE' flags='a'/>
         </copyOf>
        </sequence>
        <fn line='46' name='exists'>
         <filter flags='b'>
          <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='11'/>
          <and op='and'>
           <gc op='=' card='1:1' comp='QUNC'>
            <attVal name='Q{}staff'/>
            <varRef name='Q{}staffN' slot='1'/>
           </gc>
           <fn name='exists'>
            <axis name='attribute' nodeTest='NA nQ{}split'/>
           </fn>
          </and>
         </filter>
        </fn>
        <choose line='49'>
         <vc op='eq' onEmpty='0'>
          <cast flags='ae' as='?AS'>
           <data diag='1|0||='>
            <axis name='attribute' nodeTest='NA nQ{}type'/>
           </data>
          </cast>
          <str val='staff'/>
         </vc>
         <empty/>
         <or line='55' op='or'>
          <fn name='exists'>
           <sequence>
            <fn name='reverse'>
             <slash simple='1'>
              <dot type='1NE' flags='a'/>
              <axis name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}supplied'/>
             </slash>
            </fn>
            <fn name='reverse'>
             <slash simple='1'>
              <dot type='1NE' flags='a'/>
              <axis name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}app'/>
             </slash>
            </fn>
           </sequence>
          </fn>
          <fn name='exists'>
           <slash simple='1'>
            <dot type='1NE' flags='a'/>
            <axis name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}choice'/>
           </slash>
          </fn>
         </or>
         <callT line='56' name='Q{}create.controlevent' bSlot='16' flags='t'>
          <withParam name='Q{}pSplit' flags='c' as='1AB'>
           <true/>
          </withParam>
          <withParam name='Q{}pControlEvent' flags='c' as='1NE'>
           <varRef line='58' name='Q{}controlEvent' slot='2'/>
          </withParam>
          <withParam name='Q{}pLayerNumber' flags='c' as='1ADI'>
           <check line='59' card='1' diag='8|0|XTTE0590|pLayerNumber'>
            <varRef name='Q{}pVariantsIteration' slot='0'/>
           </check>
          </withParam>
         </callT>
         <true/>
         <iterate line='63'>
          <check role='select' line='52' card='+' diag='3|0|XTTE0570|pointedLayers'>
           <fn name='tokenize'>
            <cvUntyped to='AS' diag='0|0||fn:tokenize'>
             <data diag='0|0||fn:tokenize'>
              <axis name='attribute' nodeTest='NA nQ{}layer'/>
             </data>
            </cvUntyped>
            <str val='\s+'/>
            <str val=''/>
           </fn>
          </check>
          <params role='params'/>
          <callT role='action' line='64' name='Q{}create.controlevent' bSlot='17'>
           <withParam name='Q{}pSplit' flags='c' as='1AB'>
            <true/>
           </withParam>
           <withParam name='Q{}pControlEvent' flags='c' as='1NE'>
            <varRef line='66' name='Q{}controlEvent' slot='2'/>
           </withParam>
           <withParam name='Q{}pLayerNumber' flags='c' as='1ADI'>
            <cast line='67' flags='a' as='1ADI'>
             <dot type='1AS'/>
            </cast>
           </withParam>
          </callT>
         </iterate>
        </choose>
        <fn line='77' name='exists'>
         <indexedFilter2 comp='CAVC'>
          <gVarRef role='base' name='Q{}REQ_PARTS_EXTRACT_LAYERS' bSlot='12'/>
          <dot role='use' type='1ADI'/>
          <varRef role='search' name='Q{}staffN' slot='1'/>
         </indexedFilter2>
        </fn>
        <choose line='82'>
         <or op='or'>
          <fn name='not'>
           <fn name='contains'>
            <cvUntyped to='AS' diag='0|0||fn:contains'>
             <data diag='0|0||fn:contains'>
              <axis name='attribute' nodeTest='NA nQ{}layer'/>
             </data>
            </cvUntyped>
            <let ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='78' var='Q{}staffN' as='1ADI' slot='3'>
             <check ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' card='1' diag='0|0||dme:requested-layer'>
              <varRef name='Q{}staffN' slot='1'/>
             </check>
             <check module='global.xsl' line='100' card='1' diag='5|0|XTTE0780|dme:requested-layer#1'>
              <slash>
               <slash simple='2'>
                <indexedFilter2 ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' comp='QUNC' flags='u'>
                 <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='18'/>
                 <attVal role='use' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' name='Q{}staff'/>
                 <varRef role='search' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' name='Q{}staffN' slot='3'/>
                </indexedFilter2>
                <axis name='attribute' nodeTest='NA nQ{}layer'/>
               </slash>
               <cast flags='a' as='1AS'>
                <data diag='2|0||cast as'>
                 <dot type='1NA nQ{}layer'/>
                </data>
               </cast>
              </slash>
             </check>
            </let>
           </fn>
          </fn>
          <vc op='eq' onEmpty='0'>
           <cast flags='ae' as='?AS'>
            <data diag='1|0||='>
             <axis name='attribute' nodeTest='NA nQ{}type'/>
            </data>
           </cast>
           <str val='staff'/>
          </vc>
         </or>
         <empty/>
         <true/>
         <callT line='84' name='Q{}create.controlevent' bSlot='19' flags='t'>
          <withParam name='Q{}pSplit' flags='c' as='1AB'>
           <false/>
          </withParam>
          <withParam name='Q{}pControlEvent' flags='c' as='1NE'>
           <dot line='86' type='1NE' flags='a'/>
          </withParam>
         </callT>
        </choose>
        <fn line='93' name='exists'>
         <indexedFilter2 comp='CAVC'>
          <gVarRef role='base' name='Q{}REQ_PARTS_EXTRACT_STAVES' bSlot='13'/>
          <dot role='use' type='1ADI'/>
          <varRef role='search' name='Q{}staffN' slot='1'/>
         </indexedFilter2>
        </fn>
        <copy line='95' flags='cin' sit='1NE'>
         <sequence role='content'>
          <applyT bSlot='20'>
           <axis role='select' name='attribute' nodeTest='NA'/>
          </applyT>
          <let line='97' var='Q{}newStaffNumber' as='1ADI' slot='4'>
           <callT line='98' name='Q{}get.new.staff.number' bSlot='21'>
            <withParam name='Q{}staffN' flags='c' as='1ADI'>
             <check line='99' card='1' diag='8|0|XTTE0590|staffN'>
              <cvUntyped to='ADI' diag='8|0|XTTE0590|staffN'>
               <data diag='8|0|XTTE0590|staffN'>
                <axis name='attribute' nodeTest='NA nQ{}staff'/>
               </data>
              </cvUntyped>
             </check>
            </withParam>
           </callT>
           <sequence line='102'>
            <att name='staff' flags='l'>
             <convert from='ADI' to='AS'>
              <varRef name='Q{}newStaffNumber' slot='4'/>
             </convert>
            </att>
            <applyT line='103' bSlot='22'>
             <axis role='select' name='child' nodeTest='N'/>
            </applyT>
           </sequence>
          </let>
         </sequence>
        </copy>
       </choose>
      </let>
     </let>
    </sequence>
   </templateRule>
   <templateRule prec='0' prio='0.5' seq='15' rank='2' minImp='0' slots='5' matches='NE nQ{http://www.music-encoding.org/ns/mei}measure' flags='s' line='346' module='events.xsl'>
    <p.withPredicate role='match'>
     <p.nodeTest test='NE nQ{http://www.music-encoding.org/ns/mei}measure'/>
     <and defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='346' op='and'>
      <fn name='exists'>
       <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}mRest'/>
      </fn>
      <gVarRef name='Q{}SHRINK_MEASURES' bSlot='23'/>
     </and>
    </p.withPredicate>
    <sequence role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='347'>
     <param name='Q{}pMultiRestMeasures' slot='0' flags='t' as='?NE'>
      <empty role='select'/>
      <treat role='conversion' as='NE' diag='8|0|XTTE0590|pMultiRestMeasures'>
       <check card='?' diag='8|0|XTTE0590|pMultiRestMeasures'>
        <supplied slot='0'/>
       </check>
      </treat>
     </param>
     <let line='349' var='Q{}measureId' as='1NA' slot='1'>
      <check card='1' diag='3|0|XTTE0570|measureId'>
       <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
      </check>
      <let line='350' var='Q{http://saxon.sf.net/generated-variable}v0' as='1AS' slot='2' flags='l'>
       <cast flags='a' as='1AS'>
        <data diag='1|1||='>
         <varRef name='Q{}measureId' slot='1'/>
        </data>
       </cast>
       <let var='Q{}itemMeasureToConvert' as='?NE nQ{http://www.mozarteum.at/ns/dme}measuresToConvert' slot='3'>
        <check card='?' diag='3|0|XTTE0570|itemMeasureToConvert'>
         <filter flags='b'>
          <slash simple='1'>
           <varRef name='Q{}pMultiRestMeasures' slot='0'/>
           <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}measuresToConvert'/>
          </slash>
          <vc op='eq' onEmpty='0'>
           <cast flags='ae' as='?AS'>
            <attVal name='Q{}id'/>
           </cast>
           <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='2'/>
          </vc>
         </filter>
        </check>
        <choose line='353'>
         <gcEE op='=' card='N:1' comp='CCC'>
          <fn name='tokenize'>
           <check card='?' diag='0|0||fn:tokenize'>
            <cvUntyped to='AS' diag='0|0||fn:tokenize'>
             <data diag='0|0||fn:tokenize'>
              <slash simple='1'>
               <varRef name='Q{}pMultiRestMeasures' slot='0'/>
               <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}measuresToDelete'/>
              </slash>
             </data>
            </cvUntyped>
           </check>
          </fn>
          <data diag='1|1||='>
           <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
          </data>
         </gcEE>
         <empty/>
         <fn line='354' name='exists'>
          <varRef name='Q{}itemMeasureToConvert' slot='3'/>
         </fn>
         <copy line='356' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}measure'>
          <let role='content' line='359' var='Q{}newMeasuresRange' as='1AS' slot='4'>
           <fn name='concat'>
            <data diag='0|0||fn:concat'>
             <axis name='attribute' nodeTest='NA nQ{}n'/>
            </data>
            <str val='-'/>
            <cast flags='a' as='1AS'>
             <check line='356' card='1' diag='3|0|XTTE0570|lastMeasureN'>
              <arith op='-' calc='i-i'>
               <arith op='+' calc='i+i'>
                <cast flags='ae' as='?ADI'>
                 <slash>
                  <varRef name='Q{}itemMeasureToConvert' slot='3'/>
                  <attVal name='Q{}count'/>
                 </slash>
                </cast>
                <cast flags='ae' as='?ADI'>
                 <data diag='2|0||cast as'>
                  <axis name='attribute' nodeTest='NA nQ{}n'/>
                 </data>
                </cast>
               </arith>
               <int val='1'/>
              </arith>
             </check>
            </cast>
           </fn>
           <sequence line='360'>
            <att name='n' flags='l'>
             <varRef name='Q{}newMeasuresRange' slot='4'/>
            </att>
            <att line='361' name='xml:id' nsuri='http://www.w3.org/XML/1998/namespace' flags='l'>
             <fn line='363' name='normalize-space'>
              <fn name='string-join'>
               <convert from='A' to='AS'>
                <choose>
                 <fn name='contains'>
                  <cvUntyped to='AS' diag='0|0||fn:contains'>
                   <data diag='0|0||fn:contains'>
                    <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                   </data>
                  </cvUntyped>
                  <str val='_'/>
                 </fn>
                 <fn line='364' name='concat'>
                  <str val='mm'/>
                  <varRef name='Q{}newMeasuresRange' slot='4'/>
                  <str val='_'/>
                  <fn name='substring-after'>
                   <cvUntyped to='AS' diag='0|0||fn:substring-after'>
                    <data diag='0|0||fn:substring-after'>
                     <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                    </data>
                   </cvUntyped>
                   <str val='_'/>
                  </fn>
                 </fn>
                 <true/>
                 <data line='367'>
                  <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                 </data>
                </choose>
               </convert>
               <str val=''/>
              </fn>
             </fn>
            </att>
            <applyT line='371' flags='c' bSlot='-1'>
             <sequence role='select'>
              <except op='except'>
               <axis name='attribute' nodeTest='NA'/>
               <docOrder intra='1'>
                <sequence>
                 <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
                 <axis name='attribute' nodeTest='NA nQ{}n'/>
                </sequence>
               </docOrder>
              </except>
              <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
             </sequence>
            </applyT>
           </sequence>
          </let>
         </copy>
         <true/>
         <copy line='376' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}measure'>
          <applyT role='content' bSlot='24'>
           <sequence role='select'>
            <axis name='attribute' nodeTest='NA'/>
            <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
           </sequence>
          </applyT>
         </copy>
        </choose>
       </let>
      </let>
     </let>
    </sequence>
   </templateRule>
   <templateRule prec='0' prio='0.0' seq='16' rank='1' minImp='0' slots='4' matches='NE nQ{http://www.music-encoding.org/ns/mei}mRest' flags='s' line='388' module='events.xsl'>
    <p.nodeTest role='match' test='NE nQ{http://www.music-encoding.org/ns/mei}mRest'/>
    <sequence role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='389'>
     <param name='Q{}pMultiRestMeasures' slot='0' flags='t' as='?NE'>
      <empty role='select'/>
      <treat role='conversion' as='NE' diag='8|0|XTTE0590|pMultiRestMeasures'>
       <check card='?' diag='8|0|XTTE0590|pMultiRestMeasures'>
        <supplied slot='0'/>
       </check>
      </treat>
     </param>
     <let line='391' var='Q{}ancestorMeasureId' as='1NA' slot='1'>
      <check card='1' diag='3|0|XTTE0570|ancestorMeasureId'>
       <slash simple='2'>
        <fn name='reverse'>
         <slash simple='1'>
          <dot type='1NE nQ{http://www.music-encoding.org/ns/mei}mRest' flags='a'/>
          <axis name='ancestor' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}measure'/>
         </slash>
        </fn>
        <axis name='attribute' nodeTest='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
       </slash>
      </check>
      <let line='392' var='Q{http://saxon.sf.net/generated-variable}v0' as='1AS' slot='2' flags='l'>
       <cast flags='a' as='1AS'>
        <data diag='1|1||='>
         <varRef name='Q{}ancestorMeasureId' slot='1'/>
        </data>
       </cast>
       <let var='Q{}itemMeasureToConvert' as='?NE nQ{http://www.mozarteum.at/ns/dme}measuresToConvert' slot='3'>
        <check card='?' diag='3|0|XTTE0570|itemMeasureToConvert'>
         <filter flags='b'>
          <slash simple='1'>
           <varRef name='Q{}pMultiRestMeasures' slot='0'/>
           <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}measuresToConvert'/>
          </slash>
          <vc op='eq' onEmpty='0'>
           <cast flags='ae' as='?AS'>
            <attVal name='Q{}id'/>
           </cast>
           <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='2'/>
          </vc>
         </filter>
        </check>
        <choose line='395'>
         <fn name='exists'>
          <varRef name='Q{}itemMeasureToConvert' slot='3'/>
         </fn>
         <elem line='396' name='multiRest' nsuri='http://www.music-encoding.org/ns/mei' flags='d'>
          <sequence line='397'>
           <applyT bSlot='25'>
            <axis role='select' name='attribute' nodeTest='NA'/>
           </applyT>
           <att line='399' name='num' flags='l'>
            <convert from='AZ' to='AS'>
             <slash>
              <varRef name='Q{}itemMeasureToConvert' slot='3'/>
              <attVal name='Q{}count'/>
             </slash>
            </convert>
           </att>
          </sequence>
         </elem>
         <true/>
         <copyOf line='403' flags='c'>
          <dot type='1NE nQ{http://www.music-encoding.org/ns/mei}mRest' flags='a'/>
         </copyOf>
        </choose>
       </let>
      </let>
     </let>
    </sequence>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='4' part='1' rank='0' minImp='0' slots='0' matches='NA' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='NA'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='4' rank='0' minImp='0' slots='0' matches='N' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='N u[NP,NE,NC,NT]'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
  </mode>
 </co>
 <co id='98' binds='73'>
  <globalVariable name='Q{}PARTS_THAT_SHARE_A_STAFF' as='1FM k[ADI] v[1AB]' line='78' module='main.xsl' visibility='PRIVATE'>
   <ifCall defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='80' name='Q{http://www.w3.org/2005/xpath-functions/map}merge' type='1FM'>
    <iterate>
     <slash role='select' simple='1'>
      <gVarRef name='Q{}SCORE_DEF' bSlot='0'/>
      <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staffDef'/>
     </slash>
     <params role='params'/>
     <ifCall role='action' line='86' name='Q{http://www.w3.org/2005/xpath-functions/map}entry' type='1FM'>
      <check card='1' diag='0|0||map:entry'>
       <cast flags='ae' as='?ADI'>
        <attVal name='Q{}n'/>
       </cast>
      </check>
      <fn name='exists'>
       <filter flags='b'>
        <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}layerDef'/>
        <vc op='eq' onEmpty='0'>
         <cast flags='ae' as='?AS'>
          <attVal name='Q{}type'/>
         </cast>
         <str val='part'/>
        </vc>
       </filter>
      </fn>
     </ifCall>
    </iterate>
    <map size='2'>
     <str val='duplicates'/>
     <str val='reject'/>
     <str val='duplicates-error-code'/>
     <str val='XTDE3365'/>
    </map>
   </ifCall>
  </globalVariable>
 </co>
 <co id='99' binds=''>
  <globalVariable name='Q{}DEBUG' as='1AB' line='77' module='main.xsl' visibility='PRIVATE'>
   <false/>
  </globalVariable>
 </co>
 <co id='100' binds='26 52 88 76 55 35 4'>
  <template name='Q{}process.staffDef' flags='os' line='24' module='scoreDef.xsl' slots='10'>
   <let role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='39' var='Q{http://saxon.sf.net/generated-variable}v1' as='?AZ' slot='0' flags='l'>
    <slash>
     <treat as='N' diag='14|2|XPTY0020|'>
      <dot flags='a'/>
     </treat>
     <attVal name='Q{}n'/>
    </slash>
    <let line='33' var='Q{http://saxon.sf.net/generated-variable}v0' as='?AZ' slot='1' flags='l'>
     <slash>
      <treat as='N' diag='14|2|XPTY0020|'>
       <dot flags='a'/>
      </treat>
      <attVal name='Q{}n'/>
     </slash>
     <choose line='27'>
      <fn name='exists'>
       <let var='Q{http://saxon.sf.net/generated-variable}current398325412' as='1' slot='2'>
        <dot flags='a'/>
        <slash simple='2'>
         <indexedFilter2 comp='CCC'>
          <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='0'/>
          <cast role='use' flags='ae' as='?AS'>
           <attVal name='Q{}staff'/>
          </cast>
          <cast role='search' flags='ae' as='?AS'>
           <slash>
            <treat as='N' diag='1|0|XPTY0019|/'>
             <varRef name='Q{http://saxon.sf.net/generated-variable}current398325412' slot='2'/>
            </treat>
            <attVal name='Q{}n'/>
           </slash>
          </cast>
         </indexedFilter2>
         <axis name='attribute' nodeTest='NA nQ{}split'/>
        </slash>
       </let>
      </fn>
      <callT line='28' name='Q{}split.staffDef' bSlot='3' flags='t'/>
      <some line='33' var='Q{}staff' slot='3'>
       <gVarRef name='Q{}REQ_PARTS_EXTRACT_LAYERS' bSlot='1'/>
       <gc op='=' card='1:1' comp='QUNC'>
        <varRef name='Q{}staff' slot='3'/>
        <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='1'/>
       </gc>
      </some>
      <callT line='34' name='Q{}resolve.layerDef' bSlot='4' flags='t'/>
      <some line='39' var='Q{}staff' slot='4'>
       <gVarRef name='Q{}REQ_PARTS_EXTRACT_STAVES' bSlot='2'/>
       <gc op='=' card='1:1' comp='QUNC'>
        <varRef name='Q{}staff' slot='4'/>
        <varRef name='Q{http://saxon.sf.net/generated-variable}v1' slot='0'/>
       </gc>
      </some>
      <copy line='42' flags='cin' sit='1'>
       <sequence role='content'>
        <callT name='Q{}renumber.staffdef' bSlot='5'/>
        <applyT line='43' bSlot='6'>
         <slash role='select' simple='1'>
          <treat as='N' diag='14|3|XPTY0020|'>
           <dot flags='a'/>
          </treat>
          <axis name='child' nodeTest='N'/>
         </slash>
        </applyT>
       </sequence>
      </copy>
     </choose>
    </let>
   </let>
  </template>
 </co>
 <co id='101' binds='101 101'>
  <function name='Q{http://www.functx.com}change-element-ns-deep' line='379' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*N' slots='4'>
   <arg name='Q{}nodes' as='*N'/>
   <arg name='Q{}newns' as='1AS'/>
   <arg name='Q{}prefix' as='1AS'/>
   <forEach role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='384'>
    <varRef name='Q{}nodes' slot='0'/>
    <let line='385' var='Q{}node' as='1' slot='3'>
     <dot type='1N'/>
     <choose line='387'>
      <instance of='1NE'>
       <varRef name='Q{}node' slot='3'/>
      </instance>
      <compElem line='393'>
       <fn role='name' name='concat'>
        <sequence>
         <varRef name='Q{}prefix' slot='2'/>
         <choose>
          <fn name='not'>
           <varRef name='Q{}prefix' slot='2'/>
          </fn>
          <str val=''/>
          <true/>
          <str val=':'/>
         </choose>
         <fn name='local-name'>
          <varRef name='Q{}node' slot='3'/>
         </fn>
        </sequence>
       </fn>
       <varRef role='namespace' name='Q{}newns' slot='1'/>
       <sequence role='content' line='396'>
        <slash simple='1'>
         <varRef name='Q{}node' slot='3'/>
         <axis name='attribute' nodeTest='NA'/>
        </slash>
        <ufCall name='Q{http://www.functx.com}change-element-ns-deep' tailCall='false' bSlot='0'>
         <slash simple='1'>
          <varRef name='Q{}node' slot='3'/>
          <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
         </slash>
         <varRef name='Q{}newns' slot='1'/>
         <varRef name='Q{}prefix' slot='2'/>
        </ufCall>
       </sequence>
      </compElem>
      <instance line='399' of='1ND'>
       <varRef name='Q{}node' slot='3'/>
      </instance>
      <doc line='400'>
       <ufCall line='402' name='Q{http://www.functx.com}change-element-ns-deep' tailCall='false' bSlot='1'>
        <slash simple='1'>
         <varRef name='Q{}node' slot='3'/>
         <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
        </slash>
        <varRef name='Q{}newns' slot='1'/>
        <varRef name='Q{}prefix' slot='2'/>
       </ufCall>
      </doc>
      <true/>
      <varRef line='406' name='Q{}node' slot='3'/>
     </choose>
    </let>
   </forEach>
  </function>
 </co>
 <co id='102' binds='1 102 102 102'>
  <function name='Q{http://www.functx.com}remove-elements-not-contents' line='2448' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*N' slots='2'>
   <arg name='Q{}nodes' as='*N'/>
   <arg name='Q{}names' as='*AS'/>
   <forEach role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2452'>
    <varRef name='Q{}nodes' slot='0'/>
    <choose line='2454'>
     <instance of='1NE'>
      <dot type='1N'/>
     </instance>
     <choose line='2456'>
      <ufCall name='Q{http://www.functx.com}name-test' tailCall='false' bSlot='0'>
       <fn name='name'>
        <dot type='1N'/>
       </fn>
       <varRef name='Q{}names' slot='1'/>
      </ufCall>
      <ufCall line='2458' name='Q{http://www.functx.com}remove-elements-not-contents' tailCall='false' bSlot='1'>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
       <varRef name='Q{}names' slot='1'/>
      </ufCall>
      <true/>
      <compElem line='2461'>
       <fn role='name' name='string'>
        <convert from='AQ' to='AS'>
         <fn name='node-name'>
          <dot type='1N'/>
         </fn>
        </convert>
       </fn>
       <sequence role='content' line='2463'>
        <axis name='attribute' nodeTest='NA'/>
        <ufCall name='Q{http://www.functx.com}remove-elements-not-contents' tailCall='false' bSlot='2'>
         <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
         <varRef name='Q{}names' slot='1'/>
        </ufCall>
       </sequence>
      </compElem>
     </choose>
     <instance line='2468' of='1ND'>
      <dot type='1N'/>
     </instance>
     <doc line='2469'>
      <ufCall line='2471' name='Q{http://www.functx.com}remove-elements-not-contents' tailCall='false' bSlot='3'>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
       <varRef name='Q{}names' slot='1'/>
      </ufCall>
     </doc>
     <true/>
     <dot line='2475' type='1N'/>
    </choose>
   </forEach>
  </function>
 </co>
 <co id='103' binds='11'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg1107044267' as='*NE nQ{http://www.music-encoding.org/ns/mei}music' line='13' module='global.xsl' visibility='PRIVATE'>
   <slash defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='13' simple='1'>
    <gVarRef name='Q{}P_GLOBAL_CONTEXT_ITEM' bSlot='0'/>
    <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}music'/>
   </slash>
  </globalVariable>
 </co>
 <co id='104' binds='19'>
  <globalVariable name='Q{}REQ_PARTS_ALL_STAVES' as='*ADI' line='50' module='main.xsl' visibility='PRIVATE'>
   <slash defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='50'>
    <slash simple='2'>
     <slash simple='1'>
      <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
      <axis name='descendant-or-self' nodeTest='NE'/>
     </slash>
     <axis name='attribute' nodeTest='NA nQ{}staff'/>
    </slash>
    <cast flags='a' as='1ADI'>
     <data diag='2|0||cast as'>
      <dot type='1NA nQ{}staff'/>
     </data>
    </cast>
   </slash>
  </globalVariable>
 </co>
 <co id='105' binds=''>
  <globalParam name='Q{}P_OUTPUT_PATH' as='1AS' line='21' module='main.xsl' visibility='PUBLIC'>
   <str val='./'/>
  </globalParam>
 </co>
 <co id='83' binds=''>
  <template name='Q{}get.sameas.element' flags='os' line='117' module='events.xsl' slots='0'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='119'>
    <try flags='r'>
     <fn name='id'>
      <fn name='substring-after'>
       <cvUntyped to='AS' diag='0|0||fn:substring-after'>
        <slash>
         <treat as='N' diag='14|2|XPTY0020|'>
          <dot flags='a'/>
         </treat>
         <attVal name='Q{}sameas'/>
        </slash>
       </cvUntyped>
       <str val='#'/>
      </fn>
     </fn>
     <catch errors='*'>
      <message line='121'>
       <sequence role='select'>
        <valueOf>
         <str val='The referenced @sameas-element does not exist! Current element ID: '/>
        </valueOf>
        <valueOf>
         <convert from='AZ' to='AS'>
          <slash>
           <treat as='N' diag='14|2|XPTY0020|'>
            <dot flags='a'/>
           </treat>
           <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
          </slash>
         </convert>
        </valueOf>
       </sequence>
       <str role='terminate' val='no'/>
       <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
      </message>
     </catch>
    </try>
    <choose line='124'>
     <fn name='not'>
      <instance of='1NE'>
       <fn name='id'>
        <fn name='substring-after'>
         <cvUntyped to='AS' diag='0|0||fn:substring-after'>
          <slash>
           <treat as='N' diag='14|2|XPTY0020|'>
            <dot flags='a'/>
           </treat>
           <attVal name='Q{}sameas'/>
          </slash>
         </cvUntyped>
         <str val='#'/>
        </fn>
       </fn>
      </instance>
     </fn>
     <message line='125'>
      <sequence role='select'>
       <valueOf>
        <str val='The referenced @sameas-element does not exist! Current element ID: '/>
       </valueOf>
       <valueOf>
        <convert from='AZ' to='AS'>
         <slash>
          <treat as='N' diag='14|2|XPTY0020|'>
           <dot flags='a'/>
          </treat>
          <attVal name='Q{http://www.w3.org/XML/1998/namespace}id'/>
         </slash>
        </convert>
       </valueOf>
      </sequence>
      <str role='terminate' val='no'/>
      <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
     </message>
    </choose>
   </sequence>
  </template>
 </co>
 <co id='22' binds='73'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg1470291630' as='*ADI' line='114' module='global.xsl' visibility='PRIVATE'>
   <forEach defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='114'>
    <slash simple='2'>
     <slash simple='1'>
      <gVarRef name='Q{}SCORE_DEF' bSlot='0'/>
      <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}staffDef'/>
     </slash>
     <axis name='attribute' nodeTest='NA nQ{}n'/>
    </slash>
    <cast flags='a' as='1ADI'>
     <data diag='2|0||cast as'>
      <dot type='1NA nQ{}n'/>
     </data>
    </cast>
   </forEach>
  </globalVariable>
 </co>
 <co id='9' binds=''>
  <globalParam name='Q{}P_OVERWRITE_FILE' as='1AB' line='20' module='main.xsl' visibility='PUBLIC'>
   <false/>
  </globalParam>
 </co>
 <co id='106' binds='106 106'>
  <function name='Q{http://www.functx.com}change-element-names-deep' line='329' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*N' slots='7'>
   <arg name='Q{}nodes' as='*N'/>
   <arg name='Q{}oldNames' as='*AQ'/>
   <arg name='Q{}newNames' as='*AQ'/>
   <sequence role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='334'>
    <choose>
     <vc op='ne' onEmpty='0'>
      <fn name='count'>
       <varRef name='Q{}oldNames' slot='1'/>
      </fn>
      <fn name='count'>
       <varRef name='Q{}newNames' slot='2'/>
      </fn>
     </vc>
     <treat line='336' as='N' diag='5|0|XTTE0780|functx:change-element-names-deep#3'>
      <fn name='error'>
       <qName pre='functx' uri='http://www.functx.com' loc='Different_number_of_names'/>
      </fn>
     </treat>
    </choose>
    <forEach line='338'>
     <varRef name='Q{}nodes' slot='0'/>
     <let line='339' var='Q{}node' as='1' slot='3'>
      <dot type='1N'/>
      <choose line='341'>
       <instance of='1NE'>
        <varRef name='Q{}node' slot='3'/>
       </instance>
       <let line='345' var='Q{http://saxon.sf.net/generated-variable}v0' as='*ADI' slot='4' flags='l'>
        <fn name='index-of'>
         <varRef name='Q{}oldNames' slot='1'/>
         <check card='1' diag='0|1||fn:index-of'>
          <fn name='node-name'>
           <varRef name='Q{}node' slot='3'/>
          </fn>
         </check>
        </fn>
        <let var='Q{}theName' slot='5'>
         <let var='Q{}arg' as='?' slot='6'>
          <filter flags='ip'>
           <varRef name='Q{}newNames' slot='2'/>
           <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='4'/>
          </filter>
          <choose line='1246'>
           <fn name='string'>
            <varRef name='Q{}arg' slot='6'/>
           </fn>
           <varRef name='Q{}arg' slot='6'/>
           <true/>
           <fn line='345' name='node-name'>
            <varRef name='Q{}node' slot='3'/>
           </fn>
          </choose>
         </let>
         <compElem line='347'>
          <fn role='name' name='string-join'>
           <convert from='A' to='AS'>
            <data>
             <mergeAdj>
              <varRef name='Q{}theName' slot='5'/>
             </mergeAdj>
            </data>
           </convert>
           <str val=' '/>
          </fn>
          <fn role='namespace' name='string'>
           <convert from='AU' to='AS'>
            <fn name='namespace-uri-from-QName'>
             <treat as='AQ' diag='0|0||fn:namespace-uri-from-QName'>
              <check card='?' diag='0|0||fn:namespace-uri-from-QName'>
               <cvUntyped to='AQ'>
                <data diag='0|0||fn:namespace-uri-from-QName'>
                 <varRef name='Q{}theName' slot='5'/>
                </data>
               </cvUntyped>
              </check>
             </treat>
            </fn>
           </convert>
          </fn>
          <sequence role='content' line='350'>
           <slash simple='1'>
            <varRef name='Q{}node' slot='3'/>
            <axis name='attribute' nodeTest='NA'/>
           </slash>
           <ufCall name='Q{http://www.functx.com}change-element-names-deep' tailCall='false' bSlot='0'>
            <slash simple='1'>
             <varRef name='Q{}node' slot='3'/>
             <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
            </slash>
            <varRef name='Q{}oldNames' slot='1'/>
            <varRef name='Q{}newNames' slot='2'/>
           </ufCall>
          </sequence>
         </compElem>
        </let>
       </let>
       <instance line='353' of='1ND'>
        <varRef name='Q{}node' slot='3'/>
       </instance>
       <doc line='354'>
        <ufCall line='356' name='Q{http://www.functx.com}change-element-names-deep' tailCall='false' bSlot='1'>
         <slash simple='1'>
          <varRef name='Q{}node' slot='3'/>
          <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
         </slash>
         <varRef name='Q{}oldNames' slot='1'/>
         <varRef name='Q{}newNames' slot='2'/>
        </ufCall>
       </doc>
       <true/>
       <varRef line='360' name='Q{}node' slot='3'/>
      </choose>
     </let>
    </forEach>
   </sequence>
  </function>
 </co>
 <co id='10' binds='16'>
  <template name='Q{}create.message.parts.nonavailable' flags='os' line='175' module='global.xsl' slots='0'>
   <message role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='177'>
    <sequence role='select'>
     <valueOf>
      <fn name='concat'>
       <str val='The requested part(s) '/>
       <fn name='string-join'>
        <gVarRef name='Q{}PARTS_TO_EXTRACT_MSG' bSlot='0'/>
        <str val=', '/>
       </fn>
       <str val='is/are not available in the MEI file or no parts were requested!'/>
      </fn>
     </valueOf>
     <valueOf>
      <str val='. NB: No extraction was performed.'/>
     </valueOf>
    </sequence>
    <str role='terminate' val='no'/>
    <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
   </message>
  </template>
 </co>
 <co id='7' binds='15 90 103 71 57 97 97 8 9 105 16'>
  <template name='Q{}perform.extraction' flags='os' line='8' module='global.xsl' slots='5'>
   <sequence role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='10'>
    <callT name='Q{}create.message.extracting.parts' bSlot='0'/>
    <let line='12' var='Q{}extractedEvents' as='1ND' slot='0'>
     <doc line='13'>
      <applyT mode='Q{}step_one' bSlot='1'>
       <gVarRef role='select' name='Q{http://saxon.sf.net/generated-variable}gg1107044267' bSlot='2'/>
      </applyT>
     </doc>
     <let line='16' var='Q{}extractedControlEvents' as='1ND' slot='1'>
      <doc line='19'>
       <choose>
        <gVarRef name='Q{}SHRINK_MEASURES' bSlot='3'/>
        <let line='21' var='Q{}multiRestMeasures' as='1NE' slot='2'>
         <treat line='22' as='NE' diag='3|0|XTTE0570|multiRestMeasures'>
          <check card='1' diag='3|0|XTTE0570|multiRestMeasures'>
           <callT name='Q{}calculate.multirest.measures' bSlot='4'>
            <withParam name='Q{}pDocNode' flags='c' as='1ND'>
             <varRef line='23' name='Q{}extractedEvents' slot='0'/>
            </withParam>
           </callT>
          </check>
         </treat>
         <applyT line='27' mode='Q{}step_two' bSlot='5'>
          <varRef role='select' name='Q{}extractedEvents' slot='0'/>
          <withParam name='Q{}pMultiRestMeasures' flags='t' as='1NE'>
           <varRef line='28' name='Q{}multiRestMeasures' slot='2'/>
          </withParam>
         </applyT>
        </let>
        <true/>
        <applyT line='33' mode='Q{}step_two' bSlot='6'>
         <varRef role='select' name='Q{}extractedEvents' slot='0'/>
        </applyT>
       </choose>
      </doc>
      <let line='40' var='Q{}output' as='1ND' slot='3' flags='e'>
       <doc line='41'>
        <elem ns='=http://www.music-encoding.org/ns/mei array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' name='mei' nsuri='http://www.music-encoding.org/ns/mei' flags='dl'>
         <sequence line='42'>
          <copyOf flags='sc'>
           <slash simple='2'>
            <slash simple='1'>
             <treat as='N' diag='14|3|XPTY0020|'>
              <dot flags='a'/>
             </treat>
             <axis name='child' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}mei'/>
            </slash>
            <axis name='attribute' nodeTest='NA'/>
           </slash>
          </copyOf>
          <copyOf flags='sc'>
           <slash simple='1'>
            <treat as='N' diag='1|0|XPTY0019|/'>
             <dot flags='a'/>
            </treat>
            <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}meiHead'/>
           </slash>
          </copyOf>
          <copyOf line='43' flags='c'>
           <varRef name='Q{}extractedControlEvents' slot='1'/>
          </copyOf>
         </sequence>
        </elem>
       </doc>
       <choose line='58'>
        <or op='or'>
         <gVarRef name='Q{}P_XSPEC_TEST' bSlot='7'/>
         <gVarRef name='Q{}P_OVERWRITE_FILE' bSlot='8'/>
        </or>
        <copyOf line='59' flags='c'>
         <varRef name='Q{}output' slot='3'/>
        </copyOf>
        <true/>
        <let line='63' var='Q{}outputPath' as='1AS' slot='4'>
         <fn name='concat'>
          <gVarRef name='Q{}P_OUTPUT_PATH' bSlot='9'/>
          <fn name='substring-before'>
           <check line='62' card='1' diag='3|0|XTTE0570|meiFileName'>
            <lastOf>
             <fn name='tokenize'>
              <convert from='AU' to='AS' diag='0|0||fn:tokenize'>
               <fn name='base-uri'>
                <treat as='N' diag='0|0||fn:base-uri'>
                 <dot flags='a'/>
                </treat>
               </fn>
              </convert>
              <str val='/'/>
              <str val=''/>
             </fn>
            </lastOf>
           </check>
           <str val='.'/>
          </fn>
          <str val='_'/>
          <fn name='string-join'>
           <gVarRef name='Q{}PARTS_TO_EXTRACT_MSG' bSlot='10'/>
           <str val='-'/>
          </fn>
          <str val='.mei'/>
         </fn>
         <sequence line='64'>
          <resultDoc global='method=xml&#xA;indent=yes&#xA;standalone=no&#xA;encoding=UTF-8&#xA;use-character-maps= entities&#xA;' local='method=xml&#xA;indent=yes&#xA;' flags='a'>
           <varRef role='href' name='Q{}outputPath' slot='4'/>
           <copyOf role='content' line='65' flags='c'>
            <varRef name='Q{}output' slot='3'/>
           </copyOf>
          </resultDoc>
          <message line='67'>
           <sequence role='select'>
            <valueOf>
             <str val='The output file was written to '/>
            </valueOf>
            <valueOf>
             <convert from='AU' to='AS'>
              <fn name='resolve-uri'>
               <varRef name='Q{}outputPath' slot='4'/>
              </fn>
             </convert>
            </valueOf>
           </sequence>
           <str role='terminate' val='no'/>
           <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
          </message>
         </sequence>
        </let>
       </choose>
      </let>
     </let>
    </let>
   </sequence>
  </template>
 </co>
 <co id='107' binds=''>
  <function name='Q{http://www.functx.com}day-of-week' line='684' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='?ADI' slots='1'>
   <arg name='Q{}date' as='?A'/>
   <choose role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='692'>
    <fn name='empty'>
     <varRef name='Q{}date' slot='0'/>
    </fn>
    <empty/>
    <true/>
    <arith op='mod' calc='i%i'>
     <cast flags='ae' as='?ADI'>
      <arith op='div' calc='u/u'>
       <arith op='-' calc='t-t'>
        <cast flags='ae' as='?AA'>
         <varRef name='Q{}date' slot='0'/>
        </cast>
        <atomic val='1901-01-06' type='AA'/>
       </arith>
       <atomic val='P1D' type='ARD'/>
      </arith>
     </cast>
     <int val='7'/>
    </arith>
   </choose>
  </function>
 </co>
 <co id='1' binds=''>
  <function name='Q{http://www.functx.com}name-test' line='2018' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='1AB' slots='4'>
   <arg name='Q{}testname' as='?AS'/>
   <arg name='Q{}names' as='*AS'/>
   <or role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2034' op='or'>
    <or op='or'>
     <or op='or'>
      <fn name='exists'>
       <indexedFilter2 comp='CCC'>
        <varRef role='base' name='Q{}names' slot='1'/>
        <dot role='use' type='1AS'/>
        <varRef role='search' name='Q{}testname' slot='0'/>
       </indexedFilter2>
      </fn>
      <fn name='exists'>
       <indexedFilter2 comp='CCC' flags='u'>
        <varRef role='base' name='Q{}names' slot='1'/>
        <dot role='use' type='1AS'/>
        <str role='search' val='*'/>
       </indexedFilter2>
      </fn>
     </or>
     <gcEE op='=' card='N:1' comp='CCC'>
      <for var='Q{}name' as='AS' slot='2'>
       <varRef role='in' name='Q{}names' slot='1'/>
       <fn role='return' name='substring-after'>
        <varRef name='Q{}name' slot='2'/>
        <str val='*:'/>
       </fn>
      </for>
      <choose line='2923'>
       <fn name='contains'>
        <varRef line='2034' name='Q{}testname' slot='0'/>
        <str val=':'/>
       </fn>
       <fn name='substring-after'>
        <varRef line='2034' name='Q{}testname' slot='0'/>
        <str val=':'/>
       </fn>
       <true/>
       <varRef line='2034' name='Q{}testname' slot='0'/>
      </choose>
     </gcEE>
    </or>
    <gcEE op='=' card='N:1' comp='CCC'>
     <for var='Q{}name' as='AS' slot='3'>
      <filter role='in' flags='b'>
       <varRef name='Q{}names' slot='1'/>
       <fn name='contains'>
        <dot type='1AS'/>
        <str val=':*'/>
       </fn>
      </filter>
      <fn role='return' name='substring-before'>
       <varRef name='Q{}name' slot='3'/>
       <str val=':*'/>
      </fn>
     </for>
     <fn name='substring-before'>
      <varRef name='Q{}testname' slot='0'/>
      <str val=':'/>
     </fn>
    </gcEE>
   </or>
  </function>
 </co>
 <co id='108' binds=''>
  <function name='Q{http://www.functx.com}substring-before-if-contains' line='3001' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='?AS' slots='2'>
   <arg name='Q{}arg' as='?AS'/>
   <arg name='Q{}delim' as='1AS'/>
   <choose role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='3009'>
    <fn name='contains'>
     <varRef name='Q{}arg' slot='0'/>
     <varRef name='Q{}delim' slot='1'/>
    </fn>
    <fn name='substring-before'>
     <varRef name='Q{}arg' slot='0'/>
     <varRef name='Q{}delim' slot='1'/>
    </fn>
    <true/>
    <varRef name='Q{}arg' slot='0'/>
   </choose>
  </function>
 </co>
 <co id='93' binds=''>
  <mode name='Q{}adjustIdsForSplitElements' onNo='TC' flags='W' patternSlots='0'>
   <templateRule prec='0' prio='-0.5' seq='5' part='1' rank='0' minImp='0' slots='0' matches='NA' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='NA'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
   <templateRule prec='0' prio='0.0' seq='8' rank='1' minImp='0' slots='1' matches='NA nQ{http://www.w3.org/XML/1998/namespace}id' flags='s' line='217' module='global.xsl'>
    <p.nodeTest role='match' test='NA nQ{http://www.w3.org/XML/1998/namespace}id'/>
    <sequence role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='218'>
     <param name='Q{}pCurrentLayerN' slot='0' flags='ti' as='1ADI'>
      <treat role='conversion' as='ADI' diag='8|0|XTTE0590|pCurrentLayerN'>
       <check card='1' diag='8|0|XTTE0590|pCurrentLayerN'>
        <cvUntyped to='ADI' diag='8|0|XTTE0590|pCurrentLayerN'>
         <data diag='8|0|XTTE0590|pCurrentLayerN'>
          <supplied slot='0'/>
         </data>
        </cvUntyped>
       </check>
      </treat>
     </param>
     <att line='219' name='xml:id' nsuri='http://www.w3.org/XML/1998/namespace'>
      <fn name='normalize-space'>
       <fn name='concat'>
        <data diag='0|0||fn:concat'>
         <dot type='1NA nQ{http://www.w3.org/XML/1998/namespace}id' flags='a'/>
        </data>
        <str val='_'/>
        <fn name='string'>
         <varRef name='Q{}pCurrentLayerN' slot='0'/>
        </fn>
       </fn>
      </fn>
     </att>
    </sequence>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='5' rank='0' minImp='0' slots='0' matches='N' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='N u[NP,NE,NC,NT]'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
  </mode>
 </co>
 <co id='73' binds='11'>
  <globalVariable name='Q{}SCORE_DEF' as='1NE nQ{http://www.music-encoding.org/ns/mei}scoreDef' line='53' module='main.xsl' visibility='PRIVATE'>
   <check defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='53' card='1' diag='3|0|XTTE0570|SCORE_DEF'>
    <filter flags='b'>
     <slash simple='1'>
      <gVarRef name='Q{}P_GLOBAL_CONTEXT_ITEM' bSlot='0'/>
      <axis name='descendant' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}scoreDef'/>
     </slash>
     <fn name='empty'>
      <axis name='preceding' nodeTest='NE nQ{http://www.music-encoding.org/ns/mei}scoreDef'/>
     </fn>
    </filter>
   </check>
  </globalVariable>
 </co>
 <co id='91' binds='26 52 88 76 55 35 4'>
  <mode name='Q{}process.staffDef' onNo='TC' flags='W' patternSlots='0'>
   <templateRule prec='0' prio='0.0' seq='11' rank='1' minImp='0' slots='10' matches='NE nQ{http://www.music-encoding.org/ns/mei}staffDef' flags='s' line='24' module='scoreDef.xsl'>
    <p.nodeTest role='match' test='NE nQ{http://www.music-encoding.org/ns/mei}staffDef'/>
    <let role='action' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dita=http://dita-ot.sourceforge.net dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xs=~ xsl=~ xml=~' line='39' var='Q{http://saxon.sf.net/generated-variable}v1' as='?AZ' slot='5' flags='l'>
     <data diag='1|1||='>
      <axis name='attribute' nodeTest='NA nQ{}n'/>
     </data>
     <let line='33' var='Q{http://saxon.sf.net/generated-variable}v0' as='?AZ' slot='6' flags='l'>
      <data diag='1|1||='>
       <axis name='attribute' nodeTest='NA nQ{}n'/>
      </data>
      <choose line='27'>
       <fn name='exists'>
        <let var='Q{http://saxon.sf.net/generated-variable}current398325412' as='1' slot='7'>
         <dot type='1NE nQ{http://www.music-encoding.org/ns/mei}staffDef' flags='a'/>
         <slash simple='2'>
          <indexedFilter2 comp='CCC'>
           <gVarRef role='base' name='Q{http://saxon.sf.net/generated-variable}gg1346991457' bSlot='0'/>
           <cast role='use' flags='ae' as='?AS'>
            <attVal name='Q{}staff'/>
           </cast>
           <cast role='search' flags='ae' as='?AS'>
            <slash>
             <varRef name='Q{http://saxon.sf.net/generated-variable}current398325412' slot='7'/>
             <attVal name='Q{}n'/>
            </slash>
           </cast>
          </indexedFilter2>
          <axis name='attribute' nodeTest='NA nQ{}split'/>
         </slash>
        </let>
       </fn>
       <callT line='28' name='Q{}split.staffDef' bSlot='3' flags='t'/>
       <some line='33' var='Q{}staff' slot='8'>
        <gVarRef name='Q{}REQ_PARTS_EXTRACT_LAYERS' bSlot='1'/>
        <gc op='=' card='1:1' comp='QUNC'>
         <varRef name='Q{}staff' slot='8'/>
         <varRef name='Q{http://saxon.sf.net/generated-variable}v0' slot='6'/>
        </gc>
       </some>
       <callT line='34' name='Q{}resolve.layerDef' bSlot='4' flags='t'/>
       <some line='39' var='Q{}staff' slot='9'>
        <gVarRef name='Q{}REQ_PARTS_EXTRACT_STAVES' bSlot='2'/>
        <gc op='=' card='1:1' comp='QUNC'>
         <varRef name='Q{}staff' slot='9'/>
         <varRef name='Q{http://saxon.sf.net/generated-variable}v1' slot='5'/>
        </gc>
       </some>
       <copy line='42' flags='cin' sit='1NE nQ{http://www.music-encoding.org/ns/mei}staffDef'>
        <sequence role='content'>
         <callT name='Q{}renumber.staffdef' bSlot='5'/>
         <applyT line='43' bSlot='6'>
          <axis role='select' name='child' nodeTest='N'/>
         </applyT>
        </sequence>
       </copy>
      </choose>
     </let>
    </let>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='7' part='1' rank='0' minImp='0' slots='0' matches='NA' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='NA'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
   <templateRule prec='0' prio='-0.5' seq='7' rank='0' minImp='0' slots='0' matches='N' flags='s' line='27' module='basic.xsl'>
    <p.nodeTest role='match' test='N u[NP,NE,NC,NT]'/>
    <copy role='action' ns='=http://www.w3.org/1999/XSL/Transform dme=http://www.mozarteum.at/ns/dme mei=http://www.music-encoding.org/ns/mei saxon=~ xs=~ xsl=~ xml=~' line='29' flags='cin' sit='1N'>
     <applyT role='content' flags='c' bSlot='-1'>
      <sequence role='select'>
       <axis name='attribute' nodeTest='NA'/>
       <axis name='child' nodeTest='N u[NP,NE,NC,NT]'/>
      </sequence>
     </applyT>
    </copy>
   </templateRule>
  </mode>
 </co>
 <co id='26' binds='19'>
  <globalVariable name='Q{http://saxon.sf.net/generated-variable}gg1346991457' as='*NE nQ{http://www.mozarteum.at/ns/dme}part' line='189' module='global.xsl' visibility='PRIVATE' flags='x'>
   <slash defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='189' simple='1'>
    <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
    <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
   </slash>
  </globalVariable>
 </co>
 <co id='109' binds='5 6 7 8 9 10'>
  <template name='Q{}main' flags='os' line='98' module='main.xsl' slots='0'>
   <choose role='body' defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='100'>
    <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg1559972335' bSlot='0'/>
    <message line='101'>
     <valueOf role='select'>
      <str val='No extraction performed as all parts are selected!'/>
     </valueOf>
     <str role='terminate' val='no'/>
     <str role='error' val='Q{http://www.w3.org/2005/xqt-errors}XTMM9000'/>
    </message>
    <gVarRef name='Q{http://saxon.sf.net/generated-variable}gg1943747471' bSlot='1'/>
    <callT line='104' name='Q{}perform.extraction' bSlot='2' flags='t'/>
    <true/>
    <sequence line='107'>
     <choose>
      <or op='or'>
       <gVarRef name='Q{}P_XSPEC_TEST' bSlot='3'/>
       <gVarRef name='Q{}P_OVERWRITE_FILE' bSlot='4'/>
      </or>
      <copyOf line='108' flags='c'>
       <dot flags='a'/>
      </copyOf>
     </choose>
     <callT line='110' name='Q{}create.message.parts.nonavailable' bSlot='5' flags='t'/>
    </sequence>
   </choose>
  </template>
 </co>
 <co id='94' binds='19'>
  <globalVariable name='Q{}EXTRACT_MULTIPLE_PARTS' as='1AB' line='76' module='main.xsl' visibility='PRIVATE'>
   <fn defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='76' name='exists'>
    <tail start='2'>
     <filter flags='b'>
      <slash simple='2'>
       <slash simple='1'>
        <gVarRef name='Q{}REQUESTED_PARTS' bSlot='0'/>
        <axis name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}part'/>
       </slash>
       <axis name='attribute' nodeTest='NA nQ{}available'/>
      </slash>
      <compareToString op='eq' val='yes'>
       <cast flags='a' as='1AS'>
        <data diag='1|0||='>
         <dot type='1NA nQ{}available'/>
        </data>
       </cast>
      </compareToString>
     </filter>
    </tail>
   </fn>
  </globalVariable>
 </co>
 <co id='110' binds=''>
  <function name='Q{http://www.functx.com}path-to-node' line='2283' module='functx-1.0-doc-2007-01.xsl' flags='pU' as='*AS' slots='1'>
   <arg name='Q{}nodes' as='*N'/>
   <slash role='body' ns='dxmlf=http://www.datypic.com/xmlf fn=~ functx=http://www.functx.com local=http://www.datypic.com/local xs=~ xsl=~ xml=~' line='2288'>
    <varRef name='Q{}nodes' slot='0'/>
    <fn name='string-join'>
     <slash>
      <fn name='reverse'>
       <axis name='ancestor-or-self' nodeTest='NE'/>
      </fn>
      <fn name='name'>
       <dot type='1NE'/>
      </fn>
     </slash>
     <str val='/'/>
    </fn>
   </slash>
  </function>
 </co>
 <overridden/>
 <key name='Q{http://saxon.sf.net/}kk101' line='0' binds='' flags='uv'>
  <p.nodeSet test='NE nQ{http://www.mozarteum.at/ns/dme}renumberStaves'>
   <axis defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='74' name='descendant' nodeTest='NE nQ{http://www.mozarteum.at/ns/dme}renumberStaves'/>
  </p.nodeSet>
  <cast defaultElementNS='http://www.music-encoding.org/ns/mei' ns='=http://www.w3.org/1999/XSL/Transform array=~ dme=http://www.mozarteum.at/ns/dme functx=http://www.functx.com map=~ mei=http://www.music-encoding.org/ns/mei xd=http://www.oxygenxml.com/ns/doc/xsl xi=http://www.w3.org/2001/XInclude xs=~ xsl=~ xml=~' line='74' flags='a' as='1AS'>
   <data diag='1|0||='>
    <dot type='1NE nQ{http://www.mozarteum.at/ns/dme}renumberStaves'/>
   </data>
  </cast>
 </key>
 <output>
  <property name='method' value='xml'/>
  <property name='indent' value='yes'/>
  <property name='standalone' value='no'/>
  <property name='encoding' value='UTF-8'/>
  <property name='use-character-maps' value=' entities'/>
  <property name='Q{http://saxon.sf.net/}stylesheet-version' value='30'/>
 </output>
 <charMap name='Q{}entities'>
  <m c='8194' s='&amp;#8194;'/>
  <m c='57955' s='&amp;#xe263;'/>
  <m c='324' s='&amp;#324;'/>
  <m c='59996' s='&amp;#xea5c;'/>
  <m c='119051' s='&amp;#x1D10B;'/>
  <m c='8198' s='&amp;#8198;'/>
  <m c='171' s='&amp;'/>
  <m c='8211' s='&amp;#8211;'/>
  <m c='8195' s='&amp;#8195;'/>
  <m c='59990' s='&amp;#xea56;'/>
  <m c='160' s='&amp;#160;'/>
 </charMap>
 <strip>
  <s test='NE' prec='0'/>
 </strip>
 <decimalFormat/>
</package>
<? fbb6b035?>
